import{A as E,T as C,aS as V,N as _,M as G}from"./index-a1eb659d.js";import{l as x,x as b,c as o,i as R,n as u,f as X,b as N,ab as D,r as Y,B as q}from"./vendor-4aa48d2c.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const P=Symbol("progressContext");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const S=100;function T(s){return!s||s<0?0:s>S?S:s}const j=s=>{const t=[];return Object.keys(s).forEach(e=>{const n=parseFloat(e.replace(/%/g,""));isNaN(n)||t.push({key:n,value:s[e]})}),t.sort((e,n)=>e.key-n.key)},H=(s,t)=>{const{from:e=t?getComputedStyle(t).getPropertyValue("--ix-color-primary"):"#1c6eff",to:n=t?getComputedStyle(t).getPropertyValue("--ix-color-primary"):"#1c6eff",direction:l="to right",...a}=s;if(Object.keys(a).length!==0){const c=j(a).map(({key:i,value:f})=>`${f} ${i}%`).join(", ");return`linear-gradient(${l}, ${c})`}return`linear-gradient(${l}, ${e}, ${n})`},K=s=>j(s).map(({key:t,value:e})=>({offset:`${t}%`,color:e})),W=x({setup(s,{slots:t}){const{props:e,config:n,mergedPrefixCls:l,status:a,percent:c,successPercent:i}=b(P),f=o(()=>{var d;return(d=e.format)!=null?d:n.format}),v=o(()=>f.value(c.value,i.value)),h=o(()=>a.value==="success"||a.value==="normal"&&c.value===S),g=o(()=>a.value==="exception"),m=o(()=>R(e.format)||!(h.value||g.value)),k=o(()=>{var d,$;return($=(d=e.icons)==null?void 0:d.success)!=null?$:n.icon.success}),r=o(()=>{var d,$;return($=(d=e.icons)==null?void 0:d.exception)!=null?$:n.icon.exception}),y=()=>{if(m.value)return v.value;const d=l.value;return h.value&&k.value?L(k.value,`${d}-success-icon`):g.value&&r.value?L(r.value,`${d}-exception-icon`):null};return()=>{var $;if(e.hideInfo)return null;const d=($=t.format)!=null?$:t.default;return u("div",{class:`${l.value}-info`},[d?d({percent:c.value,successPercent:i.value}):y()])}}});function L(s,t){return X(s)?u(E,{class:t,name:s},null):s}const J=6,Q=x({name:"IxProgressCircle",setup(s,{slots:t}){const{props:e,mergedPrefixCls:n,mergedStrokeLinecap:l,percent:a,successPercent:c}=b(P),i=o(()=>`${n.value}-circle`),f=o(()=>C(e.strokeWidth,J)),v=o(()=>N(e.strokeColor)),h=o(()=>`${n.value}-gradient-${V()}`),g=o(()=>{var w,z;const p=e.type==="circle",I=50-f.value/2;return{isGradient:v.value,percent:a.value,linearGradientId:h.value,radius:I,gapPosition:(w=e.gapPosition)!=null?w:p?"top":"bottom",len:Math.PI*2*I,gapDegree:C((z=e.gapDegree)!=null?z:p?0:75)}}),m=o(()=>v.value?K(e.strokeColor):[]),k=U(g),r=Z(g),y=ee(g,i,e,a,c),d=o(()=>{var p;return{stroke:(p=e.trailColor)!=null?p:"#f5f5f5","fill-opacity":"0","stroke-linecap":l.value,"stroke-width":f.value,d:k.value}}),$=o(()=>({"fill-opacity":"0","stroke-linecap":l.value,"stroke-width":a.value?f.value:0,d:k.value})),M=o(()=>{const p=i.value;return{[p]:!0,[`${p}-gradient`]:v.value}}),O=o(()=>({width:e.width&&`${e.width}px`,height:e.width&&`${e.width}px`,fontSize:e.width&&`${C(e.width)*.15+6}px`})),B=()=>v.value?u("defs",null,[u("linearGradient",{id:h.value,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[m.value.map(p=>u("stop",{offset:p.offset,"stop-color":p.color},null))])]):null,A=()=>y.value.map(p=>u("path",D({class:[`${i.value}-path`,...p.strokeClasses],style:p.strokePathStyle,stroke:p.stroke},$.value),null));return()=>u("div",{class:M.value,style:O.value},[u("svg",{viewBox:"0 0 100 100"},[B(),u("path",D({class:`${i.value}-trail`,style:r.value},d.value),null),A()]),u(W,null,t)])}});function U(s){return o(()=>{const{radius:t,gapPosition:e}=s.value;let n=0,l=-t,a=0,c=t*-2;switch(e){case"left":n=-t,l=0,a=t*2,c=0;break;case"right":n=t,l=0,a=t*-2,c=0;break;case"bottom":l=t,c=t*2;break}return`M 50,50 m ${n},${l}
       a ${t},${t} 0 1 1 ${a},${-c}
       a ${t},${t} 0 1 1 ${-a},${c}`})}function Z(s){return o(()=>{const{len:t,gapDegree:e}=s.value;return{strokeDasharray:`${t-e}px ${t}px`,strokeDashoffset:`-${e/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"}})}function ee(s,t,e,n,l){return o(()=>{var g;const{gapDegree:a,len:c,isGradient:i,linearGradientId:f}=s.value,v=l.value>0?[l.value,n.value]:[n.value],h=(g=e.success)==null?void 0:g.strokeColor;return v.map((m,k)=>{const r=v.length>1&&k===0;return{stroke:i&&!r?`url(#${f})`:void 0,strokeClasses:[!i&&r?`${t.value}-success`:"",i?"":`${t.value}-bg`],strokePathStyle:{stroke:i?void 0:r?h:e.strokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${m/100*(c-a)}px ${c}px`,strokeDashoffset:`-${a/2}px`}}}).reverse()})}const te=x({name:"IxProgressLine",setup(s,{slots:t}){const{props:e,mergedPrefixCls:n,mergedSize:l,mergedStrokeLinecap:a,percent:c,successPercent:i}=b(P),f=o(()=>`${n.value}-line`),v=Y(),h=o(()=>{const r=f.value;return{[r]:!0,[`${r}-${l.value}`]:!0,[`${r}-round`]:a.value==="round"}}),g=o(()=>({background:e.trailColor})),m=o(()=>{var r;return{height:`${e.strokeWidth}px`,width:`${i.value}%`,background:(r=e.success)==null?void 0:r.strokeColor}}),k=o(()=>({height:`${e.strokeWidth}px`,width:`${c.value}%`,background:N(e.strokeColor)?H(e.strokeColor,v.value):e.strokeColor}));return()=>{const r=f.value;return u("div",{ref:v,class:h.value},[u("div",{class:`${r}-outer`},[u("div",{class:`${r}-inner`,style:g.value},[!!i.value&&u("div",{class:`${r}-success-bg`,style:m.value},null),u("div",{class:`${r}-bg`,style:k.value},null)])]),u(W,null,t)])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const se=["normal","success","exception","active"],re={type:{type:String,default:"line"},format:Function,percent:{type:Number,default:0},status:String,hideInfo:{type:Boolean,default:!1},success:Object,trailColor:String,strokeColor:[String,Object],strokeLinecap:String,strokeWidth:Number,gapDegree:Number,gapPosition:String,width:{type:Number,default:132},size:String,icons:Object};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function F(s){const{colorEmphasizedContainerBg:t,fontSizeSm:e,fontSizeMd:n,fontSize2xl:l,paddingSizeSm:a}=s;return{trailBgColor:t,textWidth:36,borderRadius:100,lineSizeSm:2,lineSizeMd:6,lineSizeLg:8,lineFontSizeSm:e,lineFontSizeMd:e,lineFontSizeLg:n,lineTextPadding:`0 0 0 ${a}px`,circleWidth:120,circleFontSize:l}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const oe=(s,t)=>F(s),ne=x({name:"IxProgress",props:re,setup(s,{slots:t}){const{globalHashId:e,hashId:n,registerToken:l}=_("progress");l(oe);const a=G("progress"),c=G("common"),i=o(()=>`${c.prefixCls}-progress`),f=o(()=>T(s.percent)),v=o(()=>{var r;return T((r=s.success)==null?void 0:r.percent)}),h=o(()=>{var r;return(r=s.size)!=null?r:a.size}),g=o(()=>{var r;return(r=s.strokeLinecap)!=null?r:a.strokeLinecap}),m=o(()=>{var r;return!se.includes(s.status)&&(f.value>=S||v.value>=S)?"success":(r=s.status)!=null?r:"normal"}),k=o(()=>{const r=i.value;return{[e.value]:!!e.value,[n.value]:!!n.value,[r]:!0,[`${r}-${m.value}`]:!!m.value}});return q(P,{props:s,config:a,mergedPrefixCls:i,mergedSize:h,mergedStrokeLinecap:g,percent:f,successPercent:v,status:m}),()=>{const r=s.type==="line"?te:Q;return u(r,{class:k.value},t)}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const ce=ne;export{ce as I};
