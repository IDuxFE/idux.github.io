import{N as Y,K as U,am as ve,r as Ye,a9 as Qe,ad as Ge,ae as Je,m as q,aa as We,A as se,L as Q,aD as we,ac as ce,a7 as ke,au as Ve,av as Se}from"./index-20a6d8b7.js";import{u as oe,Éµ as Fe,a as Ae}from"./index-98124a83.js";import{w as z,c as I,y as ue,R as ae,t as Xe,x as K,l as ee,z as he,A as v,a4 as L,q as be,J as ie,K as de,r as Z,a3 as Oe}from"./vendor-63a43443.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function te(e,t,a){if(t)return e.convert(t,a)}function ne(e,t,a,l){return Y(l).reduce((n,u)=>e.set(n,e.get(t,u),u),a)}function ge(e,t,a,l){return Y(l).every(n=>e.get(t,n)===e.get(a,n))}function pe(e,t,a,l="time"){return t?a?l==="time"?t.valueOf()-a.valueOf():e.startOf(t,l).valueOf()-e.startOf(a,l).valueOf():0:1}function le(e,t,a="time"){return t.sort((l,o)=>pe(e,l,o,a))}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function me(e,t,a,l,o){const{formatRef:n,dateFormatRef:u,timeFormatRef:c}=t,[r,f]=U(""),[s,p]=U(""),[d,i]=U(""),[m,x]=U(void 0),[y,g]=U("datePanel"),[S,O]=U(!1),[P,k]=U(!1);function h(w,D=!1){if(!w){f("");return}const{parse:$,format:E}=e;(D||$(r.value,n.value).valueOf()!==w.valueOf())&&f(E(w,n.value))}function V(w,D=!1){if(!w){p("");return}const{parse:$,format:E}=e,W=$(s.value,u.value);(D||!ge(e,W,w,["year","month","date"]))&&p(E(w,u.value))}function C(w,D=!1){if(!w){i("");return}const{parse:$,format:E}=e,W=$(d.value,c.value);(D||!ge(e,W,w,["hour","minute","second"]))&&i(E(w,c.value))}function T(w=!1){const D=te(e,l.value,n.value);h(D,w),a.value.enableOverlayDateInput&&V(D,w),a.value.enableOverlayTimeInput&&C(D,w),x(D)}z([l,n],()=>T(),{immediate:!0}),z(a,()=>T());function F(w,D){return w?e.parse(w,D):void 0}function b(w){return!w||e.isValid(w)}function R(w){const D=w.target.value;f(D);const $=F(D,n.value);b($)&&o($)}function A(w){const D=w.target.value;p(D);let $=F(D,u.value);if(!b($))return;const E=te(e,l.value,n.value);$&&E&&($=ne(e,E,$,["hour","minute","second"])),o($),g("datePanel")}function M(w){const D=w.target.value;i(D);let $=F(D,c.value);if(!b($))return;const E=te(e,l.value,n.value);$&&E&&($=ne(e,E,$,["year","month","date"])),o($),g("timePanel")}function B(){p("")}function H(){i("")}function N(w){o(w)}function G(){g("datePanel"),O(!0)}function J(){g("timePanel"),k(!0)}function j(){O(!1)}function _(){k(!1)}return{inputValue:r,dateInputValue:s,timeInputValue:d,dateInputFocused:S,timeInputFocused:P,panelValue:m,visiblePanel:y,setVisiblePanel:g,init:T,handleInput:R,handleDateInput:A,handleTimeInput:M,handleDateInputClear:B,handleTimeInputClear:H,handlePanelChange:N,handleDateInputFocus:G,handleTimeInputFocus:J,handleDateInputBlur:j,handleTimeInputBlur:_}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Ce={date:"yyyy-MM-dd",week:"RRRR-II",month:"yyyy-MM",quarter:"yyyy-'Q'Q",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss"};function Re(e,t){const a=I(()=>{var p,d,i;const s=e.type;return(i=(d=e.format)!=null?d:(p=t.format)==null?void 0:p[s])!=null?i:Ce[s]}),{hourEnabled:l,hourUse12Hours:o,minuteEnabled:n,secondEnabled:u,use12Hours:c}=Ze(e,a),r=I(()=>{var s;return e.type!=="datetime"?a.value:(s=e.dateFormat)!=null?s:Ce.date}),f=I(()=>{if(e.timeFormat)return e.timeFormat;const p=[l.value&&(o.value?"hh":"HH"),n.value&&"mm",u.value&&"ss"].filter(Boolean).join(":");return c.value?`${p} a`:p});return{formatRef:a,dateFormatRef:r,timeFormatRef:f,hourEnabled:l,minuteEnabled:n,secondEnabled:u,use12Hours:c}}function Ze(e,t){const a=I(()=>{var l;return(l=e.timeFormat)!=null?l:t.value});return{hourEnabled:I(()=>/[hH]/.test(a.value)),hourUse12Hours:I(()=>/h/.test(a.value)),minuteEnabled:I(()=>/m/.test(a.value)),secondEnabled:I(()=>/s/.test(a.value)),use12Hours:I(()=>/[aA]/.test(a.value))}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function $e(e,t){return I(()=>{var l;const a=(l=e.allowInput)!=null?l:t.allowInput;return{allowInput:a,enableInput:a===!0,enableOverlayDateInput:a==="overlay"||e.type==="datetime",enableOverlayTimeInput:e.type==="datetime"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function et(e,t){return a=>{if(a.code==="Escape"){t(!1);return}if(!e.value&&!["Backspace","Tab"].includes(a.code)){a.preventDefault(),t(!0);return}a.code==="Enter"&&t(!1)}}function tt(e,t,a,l){const{bufferUpdated:o,buffer:n}=e;return u=>{if(u.code==="Escape"){a(!1);return}if(!t.value&&!["Backspace","Tab"].includes(u.code)){u.preventDefault(),a(!0);return}u.code==="Enter"&&(o.value&&l(n.value),a(!1))}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const at=[0,4];function Be(e){const{props:t,common:a,config:l,accessor:o,mergedPrefixCls:n,overlayOpened:u,setOverlayOpened:c,onAfterLeave:r}=e;return I(()=>{var f;return{clickOutside:!1,container:(f=t.overlayContainer)!=null?f:l.overlayContainer,containerFallback:`.${n.value}-overlay-container`,disabled:o.disabled||t.readonly,offset:at,placement:"bottomStart",transitionName:`${a.prefixCls}-slide-auto`,trigger:"manual",visible:u.value,"onUpdate:visible":c,onAfterLeave:r}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Me(e){const[t,a]=ve(e,"open",!1),[l,o]=U(!1);z(t,u=>{u&&o(!0)},{immediate:!0});const n=()=>{t.value||o(!1)};return ue(()=>{e.autofocus&&a(!0)}),{overlayOpened:t,overlayVisible:l,setOverlayOpened:a,onAfterLeave:n}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ee(e,t,a,l,o){const{accessor:n,control:u}=Ye();Qe(u);const c=Ge(e,t),r=Je(e,u);function f(i){const m=ae(i)?le(a,i):i;if(Y(m).some(y=>{var g;return(g=e.disabledDate)==null?void 0:g.call(e,y)}))return;let x=Xe(n.value);x=ae(x)?x.map(y=>te(a,y,l.value)):te(a,x,l.value),n.setValue(m),q(e.onChange,m,x)}function s(i){q(e.onClear,i),f(void 0)}function p(i){q(e.onFocus,i)}function d(i){n.markAsBlurred(),o(!1),q(e.onBlur,i)}return{accessor:n,mergedSize:c,mergedStatus:r,handleChange:f,handleClear:s,handleFocus:p,handleBlur:d}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ue(e){return I(()=>{var o,n;const{props:t,config:a,accessor:l}=e;return{borderless:!1,clearable:(o=t.clearable)!=null?o:a.clearable,clearIcon:(n=t.clearIcon)!=null?n:a.clearIcon,disabled:l.disabled,size:"sm"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function nt(e,t,a,l,o){return I(()=>{var n;return{...ye((n=e.timePanelOptions)!=null?n:{}),hourEnabled:t.value,minuteEnabled:a.value,secondEnabled:l.value,use12Hours:o.value}})}function lt(e,t,a,l,o){const n=c=>{var r;return(r=ae(e.timePanelOptions)?e.timePanelOptions[c?0:1]:e.timePanelOptions)!=null?r:{}};return I(()=>{const c={hourEnabled:t.value,minuteEnabled:a.value,secondEnabled:l.value,use12Hours:o.value};return[{...ye(n(!0)),...c},{...ye(n(!1)),...c}]})}function ye(e){const{disabledHours:t,disabledMinutes:a,disabledSeconds:l,hideDisabledOptions:o,hourStep:n,minuteStep:u,secondStep:c}=e;return{disabledHours:t,disabledMinutes:a,disabledSeconds:l,hideDisabledOptions:o,hourStep:n,minuteStep:u,secondStep:c}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ot(e,t,a){const[l,o]=ve(e,"activeDate",()=>t.now()),n=I(()=>{const u=l.value,c=a.value,{startOf:r,set:f,get:s}=t;switch(c){case"date":case"week":return r(r(u,"month"),"week");case"month":return r(r(u,"year"),"month");case"quarter":return r(r(u,"year"),"quarter");case"year":return f(u,parseInt(`${s(u,"year")/10}`,10)*10-1,"year");default:return u}});return{activeDate:l,setActiveDate:o,startActiveDate:n}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ut(e){const[t,a]=U(e.type);return z(()=>e.type,a),z(()=>e.visible,l=>l&&a(e.type)),{activeType:t,setActiveType:a}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function rt(e){const t=I(()=>{switch(e.value){case"date":case"week":return 6;case"month":return 4;case"quarter":return 1;case"year":return 4;default:return 0}}),a=I(()=>{switch(e.value){case"date":case"week":return 7;case"month":return 3;case"quarter":return 4;case"year":return 3;default:return 0}});return{maxRowIndex:t,maxCellIndex:a}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const re=Symbol("datePanelToken");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const st={cellTooltip:Function,disabledDate:Function,type:{type:String,default:"date"},value:[Date,Array],activeDate:Date,visible:{type:Boolean,default:void 0},isSelecting:{type:Boolean,default:void 0},onCellClick:[Function,Array],onCellMouseenter:[Function,Array],"onUpdate:activeDate":[Function,Array]},ct={rowIndex:{type:Number,required:!0}},it={rowIndex:{type:Number,required:!0},cellIndex:{type:Number,required:!0}};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function X(e){return e==="week"?"date":e}function dt(e,t,a,l){const o=X(t);if(o==="date")return l(e);const n={date:void 0,month:"date",quarter:"month",year:"quarter"},u=[],c=(r,f)=>{const s=n[f];if(!s)return;const[p,d]=["startOf","endOf"].map(i=>a.get(a[i](r,f),s));for(let i=p;i<=d;i++)u.push({date:a.set(r,i,s),type:s})};for(c(e,o);u.length;){const r=u.pop();if(!l(r.date))return!1;c(r.date,r.type)}return!0}const vt={date:"d",week:"d",month:"MMM",quarter:"'Q'Q",year:"yyyy"},ft=K({props:it,setup(e){const{props:t,slots:a,mergedPrefixCls:l,dateConfig:o,activeDate:n,setActiveDate:u,startActiveDate:c,activeType:r,setActiveType:f,maxRowIndex:s,maxCellIndex:p}=ee(re),d=I(()=>e.rowIndex*p.value+e.cellIndex),i=I(()=>o.add(c.value,d.value,X(r.value))),m=I(()=>De(o,t.value,r.value,!0)),x=I(()=>De(o,t.value,r.value,!1)),y=I(()=>{const b=t.disabledDate;return b?dt(i.value,r.value,o,b):!1}),g=I(()=>{var b;return(b=t.cellTooltip)==null?void 0:b.call(t,{value:i.value,disabled:!!y.value})}),S=I(()=>m.value&&o.isSame(m.value,i.value,X(r.value))),O=I(()=>x.value&&o.isSame(x.value,i.value,X(r.value))),P=I(()=>o.isSame(i.value,o.now(),X(r.value))),k=I(()=>{const b=r.value;if(X(r.value)==="date")return!o.isSame(i.value,n.value,"month");if(b==="year"){const R=d.value;return R===0||R===s.value*p.value}return!1}),h=I(()=>{if(k.value)return!1;const b=X(r.value);return t.isSelecting?m.value&&o.isSame(m.value,i.value,b):m.value&&o.isSame(m.value,i.value,b)||x.value&&o.isSame(x.value,i.value,b)}),V=I(()=>{const b=X(r.value),R=o.startOf(i.value,b).valueOf();return!!m.value&&!!x.value&&R>=o.startOf(m.value,b).valueOf()&&R<=o.startOf(x.value,b).valueOf()}),C=I(()=>{const b=`${l.value}-cell`;return he({[b]:!0,[`${b}-disabled`]:y.value,[`${b}-selected`]:h.value,[`${b}-in-range`]:V.value,[`${b}-current`]:P.value,[`${b}-out-view`]:k.value,[`${b}-start`]:S.value,[`${b}-end`]:O.value})}),T=b=>{b.stopPropagation();const R=i.value;t.type!==r.value?(f(t.type),u(R)):q(t.onCellClick,R)},F=()=>{q(t.onCellMouseenter,i.value)};return()=>{var M,B;const b=i.value,{format:R}=o,A=(B=(M=a.cell)==null?void 0:M.call(a,{date:b}))!=null?B:v("div",{class:`${l.value}-cell-inner`},[v("div",{class:`${l.value}-cell-trigger`},[R(b,vt[r.value])])]);return v("td",{class:C.value,role:"gridcell",onClick:y.value?void 0:T,onMouseenter:y.value?void 0:F},[g.value?v(We,{title:g.value},{default:()=>[A]}):A])}}});function De(e,t,a,l){var n;const o=Y(t);return a==="week"?l?e.startOf(o[0],"week"):e.endOf((n=o[1])!=null?n:o[0],"week"):o[l?0:1]}const pt=K({props:ct,setup(e){const{mergedPrefixCls:t,activeType:a,maxCellIndex:l}=ee(re),o=I(()=>{const{rowIndex:n}=e,u=a.value,c=[],r=l.value;for(let f=0;f<r;f++)c.push({key:`${u}-${f}`,rowIndex:n,cellIndex:f});return c});return()=>{const n=o.value.map(u=>v(ft,u,null));return v("tr",{role:"row",class:`${t.value}-row`},[n])}}}),mt=K({setup(){const{mergedPrefixCls:e,dateConfig:t,activeType:a,maxRowIndex:l,maxCellIndex:o}=ee(re),n=yt(t,a,o);return()=>{const u=`${e.value}-body`,c=n.value.map(s=>{const{key:p,label:d}=s;return v("th",{role:"columnheader",key:p},[v("div",{class:`${u}-header-cell`},[d])])}),r=l.value,f=[];for(let s=0;s<r;s++)f.push(v(pt,{key:s,rowIndex:s},null));return v("div",{class:u},[v("table",{role:"grid"},[c.length>0&&v("thead",null,[v("tr",{role:"row"},[c])]),v("tbody",null,[f])])])}}});function yt(e,t,a){return I(()=>{const l=t.value,o=[];if(l==="date"||l==="week"){const n=a.value,u=e.getLocalizedLabels("day",n,"narrow"),c=e.weekStartsOn();for(let r=0;r<n;r++)o.push({key:r,label:u[(r+c)%n]})}return o})}const xe=["month","quarter","year"],ht=K({setup(){const{locale:e,mergedPrefixCls:t,dateConfig:a,activeDate:l,setActiveDate:o,activeType:n,setActiveType:u}=ee(re),c=bt(n,l,e,a,u),r=()=>{const d=n.value==="year"?-10:-1;o(a.add(l.value,d,"year"))},f=()=>{o(a.add(l.value,-1,"month"))},s=()=>{const d=n.value==="year"?10:1;o(a.add(l.value,d,"year"))},p=()=>{o(a.add(l.value,1,"month"))};return()=>{const{previousDecade:d,previousYear:i,previousMonth:m,nextDecade:x,nextYear:y,nextMonth:g}=e.datePicker,S=n.value,O=!xe.includes(n.value),P=!xe.includes(n.value),k=c.value.map(V=>{const{label:C,...T}=V;return v("button",L({type:"button",tabindex:"-1"},T),[C])}),h=`${t.value}-header`;return v("div",{class:h},[v("button",{class:`${h}-super-prev visible`,type:"button",tabindex:"-1",title:S==="year"?d:i,onClick:r},[v(se,{name:"double-left"},null)]),v("button",{class:`${h}-prev${O?" visible":""}`,type:"button",tabindex:"-1",title:m,onClick:f},[v(se,{name:"left"},null)]),v("div",{class:`${h}-content`},[k]),v("button",{class:`${h}-super-next${P?" visible":""}`,type:"button",tabindex:"-1",title:g,onClick:p},[v(se,{name:"right"},null)]),v("button",{class:`${h}-super-prev visible`,type:"button",tabindex:"-1",title:S==="year"?x:y,onClick:s},[v(se,{name:"double-right"},null)])])}}});function bt(e,t,a,l,o){const n=(u,c)=>{u.stopPropagation(),o(c)};return I(()=>{const u=e.value,c=t.value,{yearSelect:r,monthSelect:f,yearFormat:s,monthFormat:p}=a.datePicker,{format:d,get:i}=l;switch(u){case"date":case"week":return[{key:"year",title:r,onClick:m=>n(m,"year"),label:d(c,s)},{key:"month",title:f,onClick:m=>n(m,"month"),label:d(c,p)}];case"month":case"quarter":return[{key:"year",title:r,onClick:m=>n(m,"year"),label:d(c,s)}];case"year":{const m=parseInt(`${i(c,"year")/10}`,10)*10,x=m+9;return[{key:"decade",label:`${m}-${x}`}]}default:return[]}})}const It=K({name:"ÉµDatePanel",props:st,setup(e,{slots:t}){const a=Q("common"),l=Q("locale"),o=I(()=>`${a.prefixCls}-date-panel`),n=oe(),{activeType:u,setActiveType:c}=ut(e),{activeDate:r,setActiveDate:f,startActiveDate:s}=ot(e,n,u),{maxRowIndex:p,maxCellIndex:d}=rt(u);return be(re,{props:e,slots:t,locale:l,mergedPrefixCls:o,dateConfig:n,activeType:u,setActiveType:c,activeDate:r,setActiveDate:f,startActiveDate:s,maxRowIndex:p,maxCellIndex:d}),()=>{const i=o.value;return v("div",{class:`${i} ${i}-${u.value}`},[v(ht,null,null),v(mt,null,null)])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const He=It;/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Pt(e,t){var o;const[a,l]=ve(t,"activeValue",(o=t.value)!=null?o:e.now());return z(()=>t.value,n=>l(n!=null?n:e.now())),{activeValue:a,setActiveValue:l}}const Te={date:"month",datetime:"month",week:"month",month:"year",quarter:"year",year:"year"};function gt(e,t,a,l){var P,k;const{set:o,get:n}=e,u=e.now(),c=I(()=>Te[t.type]),r=I(()=>t.type==="year"?12:1),f=I(()=>{var h;return(h=a.value)==null?void 0:h[0]}),s=I(()=>{var h;return(h=a.value)==null?void 0:h[1]}),p=(h,V)=>{if(!h||!V)return!1;const C=n(h,c.value),T=n(V,c.value);return t.type==="year"?C<T-r.value:(()=>{const F=n(h,"year"),b=n(V,"year");return F>b?!1:F<b||C<T})()},d=(h,V,C)=>{const T=b=>o(b,n(b,c.value)+(C==="from"?-r.value:r.value),c.value);if(!h)return C==="from"?u:T(u);if(!V)return C==="from"?h:T(h);const F=p(h,V);return C==="from"?F?h:T(V):F?V:T(h)},i=()=>{var T,F,b;if(l.value)return;const h=(F=(T=a.value)==null?void 0:T[0])!=null?F:u,V=(b=a.value)==null?void 0:b[1];[h,V].every(R=>{if(!R)return!0;const A=n(R,"year");if(Te[t.type]==="year")return[y,g].map(B=>n(B.value,"year")).includes(A);const M=n(R,"month");return[y,g].some(B=>A===n(B.value,"year")&&M===n(B.value,"month"))})&&p(y.value,g.value)||x([h,d(h,V,"to")])},[m,x]=ve(t,"activeValue",[(P=f.value)!=null?P:u,d((k=f.value)!=null?k:u,s.value,"to")]),y=I(()=>m.value[0]),g=I(()=>m.value[1]);return z([a,()=>t.visible,()=>t.type],i),{fromActiveValue:y,toActiveValue:g,setFromActiveValue:h=>{x([h,d(h,g.value,"to")])},setToActiveValue:h=>{x([d(y.value,h,"from"),h])}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Ne={control:{type:[String,Number,Object,Array],default:void 0},cellTooltip:Function,open:{type:Boolean,default:void 0},allowInput:{type:[Boolean,String],default:void 0},autofocus:{type:Boolean,default:!1},borderless:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},clearIcon:String,disabled:{type:Boolean,default:!1},disabledDate:Function,format:String,dateFormat:String,timeFormat:String,overlayClassName:String,overlayContainer:{type:[String,HTMLElement,Function],default:void 0},overlayRender:Function,readonly:{type:Boolean,default:!1},size:String,status:String,suffix:String,type:{type:String,default:"date"},"onUpdate:open":[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array]},Ct={...Ne,value:[String,Date,Number],footer:{type:[Boolean,Array,Object],default:!1},placeholder:String,timePanelOptions:Object,onChange:[Function,Array],onInput:[Function,Array],"onUpdate:value":[Function,Array]},Dt={...Ne,value:Array,footer:{type:[Boolean,Array,Object],default:!0},placeholder:Array,separator:[String,Object],timePanelOptions:[Object,Array],onChange:[Function,Array],onInput:[Function,Array],onSelect:[Function,Array],"onUpdate:value":[Function,Array]},xt={activeValue:Date,cellTooltip:Function,disabledDate:Function,value:Date,type:{type:String,default:"date"},timePanelOptions:{type:Object,default:()=>({})},visible:[String,Boolean],onChange:[Function,Array],"onUpdate:activeValue":[Function,Array]},Tt={activeValue:Array,cellTooltip:Function,disabledDate:Function,value:Array,type:{type:String,default:"date"},timePanelOptions:{type:Array,default:()=>[]},visible:[String,Boolean],onChange:[Function,Array],onSelect:[Function,Array],"onUpdate:activeValue":[Function,Array]},_e=K({name:"IxDatePanel",props:xt,setup(e,{slots:t}){const a=Q("common"),l=I(()=>`${a.prefixCls}-date-picker-panel`),o=oe(),{activeValue:n,setActiveValue:u}=Pt(o,e);function c(d){q(e.onChange,d)}function r(d){c(e.value?ne(o,e.value,d,["hour","minute","second"]):d)}function f(d){c(e.value?ne(o,e.value,d,["year","month","date"]):d)}const s=d=>{r(d)},p=d=>{d.target instanceof HTMLInputElement||d.preventDefault()};return()=>{const d=e.type==="datetime"?"date":e.type,i={cellTooltip:e.cellTooltip,disabledDate:e.disabledDate,type:d,value:e.value,visible:e.type==="datetime"?e.visible==="datePanel":!!e.visible,activeDate:n.value,onCellClick:s,"onUpdate:activeDate":u},m={...e.timePanelOptions,activeValue:n.value,value:e.value,visible:e.type==="datetime"?e.visible==="timePanel":!1,onChange:f,"onUpdate:activeValue":u};return v("div",{class:l.value,tabindex:-1,onMousedown:p},[ie(v(He,i,t),[[de,e.visible!=="timePanel"]]),e.type==="datetime"&&ie(v(Fe,m,null),[[de,e.visible==="timePanel"]])])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Ie=Symbol("datePickerToken"),Pe=Symbol("dateRangePickerToken"),wt=K({setup(){const e=ee(Ie),{props:t,mergedPrefixCls:a,dateFormatRef:l,timeFormatRef:o,hourEnabled:n,minuteEnabled:u,secondEnabled:c,use12Hours:r,slots:f,inputEnableStatus:s,inputRef:p,controlContext:{dateInputValue:d,timeInputValue:i,visiblePanel:m,panelValue:x,dateInputFocused:y,timeInputFocused:g,handleDateInput:S,handleTimeInput:O,handleDateInputClear:P,handleTimeInputClear:k,handleDateInputFocus:h,handleTimeInputFocus:V,handleDateInputBlur:C,handleTimeInputBlur:T,handlePanelChange:F},overlayVisible:b,setOverlayOpened:R,handleKeyDown:A,handleClear:M}=e,B=Z();ue(()=>{var D;s.value.allowInput==="overlay"&&(p.value=(D=B.value)==null?void 0:D.getInputElement())});const H=D=>{h(),s.value.allowInput==="overlay"&&(p.value=D.target)},N=D=>{V(),s.value.allowInput==="overlay"&&(p.value=D.target)},G=D=>{F(D),s.value.enableOverlayTimeInput||R(!1)},J=D=>{s.value.enableOverlayTimeInput||M(D),P()},j=Ue(e),_=nt(t,n,u,c,r),w=D=>{if(s.value.enableOverlayDateInput)return v("div",{class:D},[v(ce,L({ref:B},j.value,{class:`${D}-date-input`,value:d.value,clearVisible:!!d.value&&!!s.value.allowInput,focused:y.value,placeholder:l.value,readonly:!s.value.allowInput,onInput:S,onFocus:H,onBlur:C,onKeydown:A,onClear:J}),f),s.value.enableOverlayTimeInput&&v(ce,L(j.value,{class:`${D}-time-input`,value:i.value,clearVisible:!!i.value&&!!s.value.allowInput,focused:g.value,placeholder:o.value,readonly:!s.value.allowInput,onInput:O,onFocus:N,onBlur:T,onKeydown:A,onClear:k}),f)])};return()=>{const D=`${a.value}-overlay`,$=`${D}-inputs`,E={cellTooltip:t.cellTooltip,disabledDate:t.disabledDate,value:x.value,type:t.type,timePanelOptions:_.value,visible:b.value&&m.value,onChange:G},W=[v("div",{class:`${D}-body`,tabindex:-1},[w($),v(_e,E,f)]),v(we,{class:`${D}-footer`,footer:t.footer},f)];return t.overlayRender?t.overlayRender(W):v("div",null,[W])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function qe(e){const{props:t,config:a,accessor:l,mergedSize:o,mergedStatus:n,focused:u,handleFocus:c,handleBlur:r,handleClear:f,handleKeyDown:s,overlayOpened:p,setOverlayOpened:d}=e,i=()=>{const m=p.value;l.disabled||d(!m)};return I(()=>{var m,x,y;return{borderless:t.borderless,clearable:!t.readonly&&!l.disabled&&((m=t.clearable)!=null?m:a.clearable)&&(ae(l.value)?!!l.value.length:!!l.value),clearIcon:(x=t.clearIcon)!=null?x:a.clearIcon,disabled:l.disabled,focused:u.value,readonly:t.readonly,size:o.value,status:n.value,suffix:(y=t.suffix)!=null?y:a.suffix,onClick:i,onClear:f,onFocus:c,onBlur:r,onKeyDown:s}})}const kt=K({inheritAttrs:!1,setup(e,{attrs:t,expose:a}){const l=ee(Ie),{accessor:o,props:n,slots:u,locale:c,controlContext:{inputValue:r,handleInput:f},mergedPrefixCls:s,formatRef:p,inputEnableStatus:d,inputRef:i}=l,m=Z(),x=I(()=>{var k;return(k=n.placeholder)!=null?k:c.datePicker[`${n.type}Placeholder`]}),y=I(()=>Math.max(10,p.value.length)+2),g=qe(l);a({focus:()=>{var k;(k=(d.value.allowInput==="overlay"?m:i).value)==null||k.focus()}});const O=k=>{f(k),q(n.onInput,k)},P=k=>v("div",{class:`${k}-input`},[v("input",{ref:d.value.allowInput==="overlay"?m:i,class:`${k}-input-inner`,autocomplete:"off",disabled:o.disabled,placeholder:x.value,readonly:n.readonly||d.value.enableInput===!1,size:y.value,value:r.value,onInput:O},null)]);return()=>{const k=s.value,h={default:()=>P(k),suffix:u.suffix,clearIcon:u.clearIcon};return v(Ae,L({className:k},g.value,t),h)}}}),Vt=K({name:"IxDatePicker",inheritAttrs:!1,props:Ct,setup(e,{attrs:t,expose:a,slots:l}){const o=Q("common"),n=Q("locale"),u=I(()=>`${o.prefixCls}-date-picker`),c=Q("datePicker"),r=oe(),f=Z(),s=Z(),{elementRef:p,focus:d,blur:i}=ke();a({focus:d,blur:i});const{overlayOpened:m,overlayVisible:x,onAfterLeave:y,setOverlayOpened:g}=Me(e),S=$e(e,c),O=Re(e,c),P=Ee(e,c,r,O.formatRef,g),{accessor:k,handleFocus:h,handleBlur:V,handleChange:C}=P,{focused:T,handleFocus:F,handleBlur:b,bindOverlayMonitor:R}=Ve(h,V);ue(()=>{R(f,m)});const A=me(r,O,S,Oe(k,"value"),C),M=et(m,g),B={props:e,slots:l,common:o,locale:n,config:c,focused:T,mergedPrefixCls:u,dateConfig:r,inputRef:p,inputEnableStatus:S,overlayOpened:m,overlayVisible:x,onAfterLeave:y,setOverlayOpened:g,handleKeyDown:M,controlContext:A,...O,...P,handleFocus:F,handleBlur:b};be(Ie,B),z(m,j=>{var _;j?setTimeout(()=>{var w;(w=p.value)==null||w.focus()}):(A.init(!0),T.value&&((_=s.value)==null||_.focus()))});const H=()=>v(kt,L({ref:s},t),null),N=()=>v(wt,null,null),G=Be(B),J=I(()=>he([`${u.value}-overlay`,e.overlayClassName]));return()=>v(Se,L({ref:f},G.value,{class:J.value,triggerId:t.id}),{default:H,content:N})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function St(e,t,a,l){const{formatRef:o}=t,[n,u]=U(Y(l.value).map(P=>te(e,P,o.value))),[c,r]=U(!1),f=P=>{u(le(e,Ft(e,P,o.value),"date")),r(!0)},[s,p]=U("datePanel"),d=P=>{s.value!==P&&p(P),g.visiblePanel.value!==P&&g.setVisiblePanel(P),S.visiblePanel.value!==P&&S.setVisiblePanel(P)},i=I(()=>Y(n.value)),m=I(()=>i.value[0]),x=I(()=>i.value[1]);z([l,o],([P])=>{f(P)});const y=(P,k)=>{var h,V,C,T;return k?pe(e,P,(h=n.value)==null?void 0:h[1],"date")>0?[P,P]:[P,(V=n.value)==null?void 0:V[1]]:pe(e,P,(C=n.value)==null?void 0:C[0],"date")<0?[P,P]:[(T=n.value)==null?void 0:T[0],P]},g=me(e,t,a,m,P=>{u(y(P,!0)),r(!0)}),S=me(e,t,a,x,P=>{u(y(P,!1)),r(!0)});return z(g.visiblePanel,d),z(S.visiblePanel,d),{buffer:n,bufferUpdated:c,visiblePanel:s,setVisiblePanel:d,fromControl:g,toControl:S,init:(P=!1)=>{f(l.value),r(!1),g.init(P),S.init(P)},handlePanelChange:f}}function Ft(e,t,a){return Y(t).map(l=>te(e,l,a))}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function At(e,t){const[a,l]=U(e.value),[o,n]=U(!1);z(()=>e.visible,()=>{n(!1)});const u=I(()=>o.value?le(t,[...Y(a.value)],"date"):Y(e.value)),c=s=>{q(e.onChange,s),q(e.onSelect,s)};return{panelValue:u,isSelecting:o,handleChange:c,handleDatePanelCellClick:s=>{if(!o.value)n(!0),l([s,void 0]),q(e.onSelect,[s,void 0]);else{const p=Y(e.value);c(le(t,[a.value[0],s],"date").map((d,i)=>p[i]?ne(t,p[i],d,["hour","minute","second"]):d)),n(!1)}},handleDatePanelCellMouseenter:s=>{var p;o.value&&l([(p=a.value)==null?void 0:p[0],s])}}}const ze=K({name:"IxDateRangePanel",props:Tt,setup(e,{slots:t}){const a=Q("common"),l=I(()=>`${a.prefixCls}-date-range-picker-panel`),o=oe(),{handleChange:n,handleDatePanelCellClick:u,handleDatePanelCellMouseenter:c,panelValue:r,isSelecting:f}=At(e,o),{fromActiveValue:s,toActiveValue:p,setFromActiveValue:d,setToActiveValue:i}=gt(o,e,r,f),m=y=>{y.target instanceof HTMLInputElement||y.preventDefault()},x=y=>{var h,V;const g=(h=r.value)==null?void 0:h[y?0:1],S=y?s.value:p.value,O=C=>{var T,F;n(le(o,y?[C,(T=r.value)==null?void 0:T[1]]:[(F=r.value)==null?void 0:F[0],C],"date"))},P={cellTooltip:e.cellTooltip,disabledDate:e.disabledDate,type:e.type==="datetime"?"date":e.type,value:r.value,visible:e.type==="datetime"?e.visible==="datePanel":!!e.visible,activeDate:S,onCellClick:u,onCellMouseenter:c,"onUpdate:activeDate":y?d:i},k={...(V=ae(e.timePanelOptions)?e.timePanelOptions[y?0:1]:e.timePanelOptions)!=null?V:{},activeValue:g!=null?g:S,value:g,visible:e.type==="datetime"?e.visible==="timePanel":!1,onChange:O,"onUpdate:activeValue":y?d:i};return v("div",{class:`${l.value}-side`},[ie(v(He,P,t),[[de,e.visible!=="timePanel"]]),e.type==="datetime"&&ie(v(Fe,k,null),[[de,e.visible==="timePanel"]])])};return()=>{var g,S;const y=l.value;return v("div",{class:y,tabindex:-1,onMousedown:m},[x(!0),(S=(g=t.separator)==null?void 0:g.call(t))!=null?S:v("div",{class:`${y}-separator`},null),x(!1)])}}}),Ot=K({setup(){const e=ee(Pe),{props:t,locale:a,slots:l,dateFormatRef:o,timeFormatRef:n,hourEnabled:u,minuteEnabled:c,secondEnabled:r,use12Hours:f,rangeControlContext:{buffer:s,visiblePanel:p,fromControl:d,toControl:i,handlePanelChange:m},mergedPrefixCls:x,inputEnableStatus:y,inputRef:g,handleChange:S,handleKeyDown:O,overlayVisible:P,renderSeparator:k,setOverlayOpened:h}=e,V=Z();ue(()=>{var A;y.value.allowInput==="overlay"&&(g.value=(A=V.value)==null?void 0:A.getInputElement())});const C=()=>{S(s.value),h(!1)},T=A=>{A.target instanceof HTMLInputElement||A.preventDefault()},F=Ue(e),b=lt(t,u,c,r,f),R=(A,M)=>{const{enableOverlayTimeInput:B}=y.value,{dateInputValue:H,timeInputValue:N,dateInputFocused:G,timeInputFocused:J,handleDateInput:j,handleTimeInput:_,handleDateInputClear:w,handleTimeInputClear:D,handleDateInputFocus:$,handleTimeInputFocus:E,handleDateInputBlur:W,handleTimeInputBlur:Ke}=M?d:i,Le=fe=>{$(),y.value.allowInput==="overlay"&&(g.value=fe.target)},je=fe=>{E(),y.value.allowInput==="overlay"&&(g.value=fe.target)};return v("div",{class:`${A}-side`},[v(ce,L({ref:M?V:void 0},F.value,{class:`${A}-date-input`,value:H.value,clearVisible:!!H.value&&!!y.value.allowInput,focused:G.value,placeholder:o.value,readonly:!y.value.allowInput,onInput:j,onFocus:Le,onBlur:W,onKeydown:O,onClear:w}),l),B&&v(ce,L(F.value,{class:`${A}-time-input`,value:N.value,clearVisible:!!N.value&&!!y.value.allowInput,focused:J.value,placeholder:n.value,readonly:!y.value.allowInput,onInput:_,onFocus:je,onBlur:Ke,onKeydown:O,onClear:D}),l)])};return()=>{const A=`${x.value}-overlay`,M=`${A}-inputs`,B={value:s.value,cellTooltip:t.cellTooltip,disabledDate:t.disabledDate,type:t.type,timePanelOptions:b.value,visible:P.value&&p.value,onChange:m,onSelect:t.onSelect},H={cell:l.cell,separator:y.value.enableOverlayDateInput?()=>v("div",{class:`${A}-separator`},null):void 0},N=[v("div",{class:`${A}-body`,tabindex:-1,onMousedown:T},[y.value.enableOverlayDateInput&&v("div",{class:M},[R(M,!0),v("div",{class:`${A}-separator`},[k()]),R(M,!1)]),v(ze,B,H)]),v(we,{class:`${A}-footer`,footer:t.footer,okText:a.dateRangePicker.okText,okButton:{size:"xs",mode:"primary"},cancelVisible:!1,ok:C},l)];return t.overlayRender?t.overlayRender(N):v("div",{onMousedown:T},[N])}}}),Rt=K({inheritAttrs:!1,setup(e,{attrs:t,expose:a}){const l=ee(Pe),{accessor:o,props:n,slots:u,locale:c,rangeControlContext:{fromControl:r,toControl:f},mergedPrefixCls:s,formatRef:p,inputRef:d,inputEnableStatus:i,renderSeparator:m}=l,x=Z(),y=I(()=>{var C,T,F,b;return[(T=(C=n.placeholder)==null?void 0:C[0])!=null?T:c.dateRangePicker[`${n.type}Placeholder`][0],(b=(F=n.placeholder)==null?void 0:F[1])!=null?b:c.dateRangePicker[`${n.type}Placeholder`][1]]}),g=I(()=>Math.max(10,p.value.length)+2),S=qe(l),O=C=>{r.handleInput(C),q(n.onInput,!0,C)},P=C=>{f.handleInput(C),q(n.onInput,!1,C)};a({focus:()=>{var C;(C=(i.value.allowInput==="overlay"?x:d).value)==null||C.focus()}});const h=C=>{const T=s.value,{inputValue:F}=C?r:f,b=y.value[C?0:1],R=C?O:P;return v("input",{ref:C?i.value.allowInput==="overlay"?x:d:void 0,class:`${T}-input-inner`,autocomplete:"off",disabled:o.disabled,placeholder:b,readonly:n.readonly||i.value.enableInput===!1,size:g.value,value:F.value,onInput:R},null)},V=C=>v("div",{class:`${C}-input`},[h(!0),v("span",{class:`${C}-input-separator`},[m()]),h(!1)]);return()=>{const C=s.value,T={default:()=>V(C),suffix:u.suffix,clearIcon:u.clearIcon};return v(Ae,L({className:C},S.value,t),T)}}}),$t=K({name:"IxDateRangePicker",inheritAttrs:!1,props:Dt,setup(e,{attrs:t,expose:a,slots:l}){const o=Q("common"),n=Q("locale"),u=I(()=>`${o.prefixCls}-date-range-picker`),c=Q("datePicker"),r=oe(),f=Z(),s=Z(),{elementRef:p,focus:d,blur:i}=ke();a({focus:d,blur:i});const{overlayOpened:m,overlayVisible:x,onAfterLeave:y,setOverlayOpened:g}=Me(e),S=$e(e,c),O=Re(e,c),P=Ee(e,c,r,O.formatRef,g),{accessor:k,handleFocus:h,handleBlur:V,handleChange:C}=P,T=St(r,O,S,Oe(k,"value")),F=tt(T,m,g,C),{focused:b,handleFocus:R,handleBlur:A,bindOverlayMonitor:M}=Ve(h,V);ue(()=>{M(f,m)});const H={props:e,slots:l,common:o,locale:n,config:c,focused:b,mergedPrefixCls:u,dateConfig:r,inputRef:p,inputEnableStatus:S,overlayOpened:m,overlayVisible:x,onAfterLeave:y,setOverlayOpened:g,rangeControlContext:T,renderSeparator:()=>{var _,w,D;return(D=(w=(_=l.separator)==null?void 0:_.call(l))!=null?w:e.separator)!=null?D:n.dateRangePicker.separator},handleKeyDown:F,...O,...P,handleFocus:R,handleBlur:A};be(Pe,H),z(m,_=>{var w;_?setTimeout(()=>{var D;(D=p.value)==null||D.focus()}):(T.init(!0),b.value&&((w=s.value)==null||w.focus()))});const N=()=>v(Rt,L({ref:s},t),null),G=()=>v(Ot,null,null),J=Be(H),j=I(()=>he([`${u.value}-overlay`,e.overlayClassName]));return()=>v(Se,L({ref:f},J.value,{class:j.value,triggerId:t.id}),{default:N,content:G})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Ut=Vt,Ht=_e,Nt=$t,_t=ze;export{Ut as I,Nt as a,Ht as b,_t as c};
