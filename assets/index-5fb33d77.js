import{K as M,ao as Oe,r as Te,aa as Be,ae as Ee,af as Re,m as U,P as X,ad as ue,aH as se,N as Z,M as _,a8 as ce,ay as ie,az as de}from"./index-15e00ad6.js";import{n as $e,c as we,Éµ as fe,a as pe,b as De,g as ve,u as me}from"./index-41f89a71.js";import{c as V,f as Me,w as j,m as Y,a0 as ne,t as He,l as L,y as ee,r as H,$ as he,q as C,ad as w,ac as ge,D as be,p as ye}from"./vendor-f86ff22e.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function K(e,n,a){if(n)return e.convert(n,a)}function ze(e){return e.sort((n,a)=>n?a?n.valueOf()-a.valueOf():0:1)}function Ue(e){return/[hH]/.test(e)}function Ke(e){return/m/.test(e)}function Ne(e){return/s/.test(e)}function Ie(e){return/[aA]/.test(e)}function _e(e){return/A/.test(e)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ae(e,n,a,t){const[r,s]=M(void 0),[c,u]=M(!1),[i,l]=M(void 0),{parse:d,format:m}=e,v=V(()=>K(e,t.value,n.value)),P=V(()=>Me(t.value)?t.value:v.value?m(v.value,n.value):"");function o(y=!1){var p;(y||!r.value||d(r.value,n.value).valueOf()!==((p=v.value)==null?void 0:p.valueOf()))&&s(P.value),l(v.value)}j([t,n],()=>o(),{immediate:!0});function h(y,p){return y?e.parse(y,p):void 0}function g(y){return!y||e.isValid(y)}function I(y){const p=y.target.value;s(p);const f=h(p,n.value);g(f)&&a(r.value?f:void 0)}function k(){s("")}function x(){u(!0)}function F(){u(!1)}function O(y){a(y)}return{inputValue:r,panelValue:i,inputFocused:c,setInputValue:s,setPanelValue:l,init:o,handleInput:I,handleInputClear:k,handleInputFocus:x,handleInputBlur:F,handlePanelChange:O}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ce(e,n){return V(()=>{var t;const a=(t=e.allowInput)!=null?t:n.allowInput;return{enableExternalInput:a===!0,enableInternalInput:a==="overlay"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function je(e,n){return a=>{if(a.code==="Escape"){n(!1);return}if(!e.value&&!["Backspace","Tab"].includes(a.code)){a.preventDefault(),n(!0);return}a.code==="Enter"&&n(!1)}}function Le(e,n,a,t){const{bufferUpdated:r,buffer:s}=e;return c=>{if(c.code==="Escape"){a(!1);return}if(!n.value&&!["Backspace","Tab"].includes(c.code)){c.preventDefault(),a(!0);return}switch(c.code){case"Enter":r.value&&t(s.value),a(!1);break}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const qe=[0,4];function Pe(e){const{props:n,common:a,config:t,accessor:r,mergedPrefixCls:s,overlayOpened:c,setOverlayOpened:u}=e;return V(()=>{var i;return{clickOutside:!1,container:(i=n.overlayContainer)!=null?i:t.overlayContainer,containerFallback:`.${s.value}-overlay-container`,disabled:r.disabled||n.readonly,offset:qe,placement:"bottomStart",transitionName:`${a.prefixCls}-slide-auto`,trigger:"manual",visible:c.value,"onUpdate:visible":u}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ke(e,n){const[a,t]=Oe(e,"open",!1);return Y(()=>{e.autofocus&&n()}),{overlayOpened:a,setOverlayOpened:t}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function xe(e,n,a,t,r){const{accessor:s,control:c}=Te();Be(c);const u=Ee(e,n),i=Re(e,c),l=o=>{const{get:h}=a,g=Ie(t.value);return X(o).some(I=>{const k=h(I,"hour"),x=$e(k,g),F=we(k,!!g),O=h(I,"minute"),y=h(I,"second");return e.disabledHours(x).includes(F)||e.disabledMinutes(F,x).includes(O)||e.disabledSeconds(F,O,x).includes(y)})};function d(o){const h=ne(o)?ze(o):o;if(l(h))return;let g=He(s.value);g=ne(g)?g.map(I=>K(a,I,t.value)):K(a,g,t.value),s.setValue(h),U(e.onChange,h,g)}function m(o){d(void 0),U(e.onClear,o)}function v(o){U(e.onFocus,o)}function P(o){s.markAsBlurred(),r(!1),U(e.onBlur,o)}return{accessor:s,mergedSize:u,mergedStatus:i,handleChange:d,handleClear:m,handleFocus:v,handleBlur:P}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ve(e){return V(()=>{var r,s;const{props:n,config:a,accessor:t}=e;return{borderless:!1,clearable:(r=n.clearable)!=null?r:a.clearable,clearIcon:(s=n.clearIcon)!=null?s:a.clearIcon,disabled:t.disabled,size:"sm"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ge(e,n,a,t){const r=V(()=>K(n,e.defaultOpenValue,a.value)),[s,c]=M(()=>{var u;return(u=t.value)!=null?u:r.value});return j(t,u=>{c(u!=null?u:r.value)}),{activeValue:s,setActiveValue:c}}function Je(e,n,a,t){const r=V(()=>X(e.defaultOpenValue).map(l=>K(n,l,a.value))),[s,c]=M(()=>{var l,d;return(d=(l=t.value)==null?void 0:l[0])!=null?d:r.value[0]}),[u,i]=M(()=>{var l,d;return(d=(l=t.value)==null?void 0:l[1])!=null?d:r.value[1]});return j(t,l=>{var d,m;c((d=l==null?void 0:l[0])!=null?d:r.value[0]),i((m=l==null?void 0:l[1])!=null?m:r.value[1])}),{fromActiveValue:s,toActiveValue:u,setFromActiveValue:c,setToActiveValue:i}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Se(e,n){return V(()=>{const{disabledHours:a,disabledMinutes:t,disabledSeconds:r,hideDisabledOptions:s,hourStep:c,minuteStep:u,secondStep:i}=e,l=n.value;return{disabledHours:a,disabledMinutes:t,disabledSeconds:r,hideDisabledOptions:s,hourStep:c,minuteStep:u,secondStep:i,hourEnabled:Ue(l),minuteEnabled:Ke(l),secondEnabled:Ne(l),use12Hours:Ie(l),amPmCapital:_e(l)}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const te=Symbol("timePickerContext"),oe=Symbol("timeRangePickerContext"),Qe=L({setup(){const e=ee(te),{slots:n,props:a,locale:t,formatRef:r,dateConfig:s,inputRef:c,inputEnableStatus:u,mergedPrefixCls:i,overlayOpened:l,handleClear:d,handleKeyDown:m,controlContext:{inputValue:v,panelValue:P,inputFocused:o,handleInput:h,handleInputFocus:g,handleInputBlur:I,handlePanelChange:k}}=e,x=H(),F=()=>{var A;u.value.enableInternalInput&&(c.value=(A=x.value)==null?void 0:A.getInputElement())};Y(F),he(F);const O=Ve(e),y=Se(a,r),{activeValue:p,setActiveValue:f}=Ge(a,s,r,P),S=A=>{A.target instanceof HTMLInputElement||A.preventDefault()};return()=>{var $;const A=`${i.value}-overlay`,T=`${i.value}-board`,b={...y.value,activeValue:p.value,visible:l.value,value:P.value,onChange:k,"onUpdate:activeValue":f},R=[C("div",{class:`${A}-body ${T}`,tabindex:-1,onMousedown:S},[u.value.enableInternalInput&&C(ue,w({ref:x,class:`${T}-input`},O.value,{clearVisible:!!v.value,value:v.value,readonly:a.readonly,focused:o.value,placeholder:($=a.placeholder)!=null?$:t.timePicker.placeholder,onInput:h,onClear:d,onFocus:g,onBlur:I,onKeydown:m}),n),C(fe,w(b,{class:`${T}-panel`,tabindex:-1}),null)]),C(se,{class:`${A}-footer`,footer:a.footer},n)];return a.overlayRender?a.overlayRender(R):C("div",{onMousedown:S},[R])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ae(e){const{props:n,config:a,accessor:t,mergedSize:r,mergedStatus:s,focused:c,handleBlur:u,handleFocus:i,handleClear:l,handleKeyDown:d,overlayOpened:m,setOverlayOpened:v}=e,P=()=>{t.disabled||v(!m.value)};return V(()=>{var o,h,g;return{borderless:n.borderless,clearable:!n.readonly&&!t.disabled&&((o=n.clearable)!=null?o:a.clearable)&&(ne(t.value)?!!t.value.length:!!t.value),clearIcon:(h=n.clearIcon)!=null?h:a.clearIcon,disabled:t.disabled,focused:c.value,readonly:n.readonly,size:r.value,status:s.value,suffix:(g=n.suffix)!=null?g:a.suffix,onClick:P,onClear:l,onFocus:i,onBlur:u,onKeyDown:d}})}const We=L({inheritAttrs:!1,setup(e,{expose:n,attrs:a}){const{globalHashId:t,hashId:r}=Z("timePicker"),s=ee(te),{accessor:c,props:u,slots:i,locale:l,mergedPrefixCls:d,formatRef:m,inputRef:v,inputEnableStatus:P,controlContext:{inputValue:o,handleInput:h}}=s,g=H(),I=V(()=>{var p;return(p=u.placeholder)!=null?p:l.timePicker.placeholder}),k=V(()=>Math.max(10,m.value.length)+2),x=p=>{h(p),U(u.onInput,p)};n({focus:()=>{var p;(p=(P.value.enableExternalInput?v:g).value)==null||p.focus()}});const O=Ae(s),y=p=>C("input",{ref:P.value.enableExternalInput?v:g,class:`${p}-input`,autocomplete:"off",disabled:c.disabled,placeholder:I.value,readonly:u.readonly||!P.value.enableExternalInput,size:k.value,value:o.value,onInput:x},null);return()=>{const p=d.value,f={default:()=>y(p),suffix:i.suffix,clearIcon:i.clearIcon};return C(pe,w({className:`${p} ${t.value} ${r.value}`},O.value,a),f)}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Fe={...De,open:{type:Boolean,default:void 0},control:{type:[String,Number,Object,Array],default:void 0},allowInput:{type:[Boolean,String],default:void 0},autofocus:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},clearIcon:String,clearText:String,disabled:{type:Boolean,default:!1},format:String,overlayClassName:String,overlayContainer:{type:[String,HTMLElement,Function],default:void 0},overlayRender:Function,readonly:{type:Boolean,default:!1},size:String,status:String,suffix:String,"onUpdate:open":[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array]},Xe={...Fe,value:[String,Date,Number],defaultOpenValue:[String,Date,Number],footer:{type:[Boolean,Array,Object],default:!1},placeholder:String,"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},Ye={...Fe,value:Array,defaultOpenValue:Array,footer:{type:[Boolean,Array,Object],default:!0},placeholder:Array,separator:[String,Object],"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},Ze=L({name:"IxTimePicker",inheritAttrs:!1,props:Xe,setup(e,{attrs:n,expose:a,slots:t}){const r=_("common"),{globalHashId:s,hashId:c,registerToken:u}=Z("timePicker");u(ve);const i=V(()=>`${r.prefixCls}-time-picker`),l=_("locale"),d=_("timePicker"),m=me(),v=H(),P=H(),{elementRef:o,focus:h,blur:g}=ce(),I=V(()=>{var D;return(D=e.format)!=null?D:d.format}),{overlayOpened:k,setOverlayOpened:x}=ke(e,h),F=xe(e,d,m,I,x),{accessor:O,handleFocus:y,handleBlur:p,handleChange:f}=F,S=ae(m,I,f,ge(O,"value")),A=Ce(e,d),T=je(k,x),{focused:b,handleFocus:R,handleBlur:$,bindOverlayMonitor:q}=ie(y,p);Y(()=>{q(v,k)});const G={props:e,slots:t,dateConfig:m,common:r,locale:l,config:d,mergedPrefixCls:i,formatRef:I,focused:b,handleKeyDown:T,inputRef:o,inputEnableStatus:A,overlayOpened:k,setOverlayOpened:x,controlContext:S,...F,handleFocus:R,handleBlur:$};be(te,G),a({focus:h,blur:g}),j(k,D=>{var B;D?setTimeout(()=>{var E;(E=o.value)==null||E.focus()}):(S.init(!0),b.value&&((B=P.value)==null||B.focus()))});const N=()=>C(We,w({ref:P},n),null),J=()=>C(Qe,null,null),Q=Pe(G),W=V(()=>ye([`${i.value}-overlay`,s.value,c.value,e.overlayClassName]));return()=>C(de,w({ref:v},Q.value,{class:W.value,triggerId:n.id}),{default:N,content:J})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function en(e,n,a){const[t,r]=M(X(a.value).map(o=>K(e,o,n.value))),[s,c]=M(!1),u=o=>{r(nn(e,o,n.value)),c(!0)};j([a,n],([o])=>{u(o)});const i=V(()=>X(t.value)),l=V(()=>i.value[0]),d=V(()=>i.value[1]),m=ae(e,n,o=>{u([o,d.value])},l),v=ae(e,n,o=>{u([l.value,o])},d);return{buffer:t,bufferUpdated:s,fromControl:m,toControl:v,init:(o=!1)=>{u(a.value),c(!1),m.init(o),v.init(o)}}}function nn(e,n,a){return X(n).map(t=>K(e,t,a))}const an=L({setup(){const e=ee(oe),{props:n,slots:a,dateConfig:t,locale:r,mergedPrefixCls:s,formatRef:c,inputRef:u,inputEnableStatus:i,overlayOpened:l,handleChange:d,handleKeyDown:m,renderSeparator:v,setOverlayOpened:P,rangeControlContext:{buffer:o,fromControl:h,toControl:g}}=e,I=H(),k=()=>{var b;i.value.enableInternalInput&&(u.value=(b=I.value)==null?void 0:b.getInputElement())};Y(k),he(k);const x=Ve(e),F=Se(n,c),{fromActiveValue:O,toActiveValue:y,setFromActiveValue:p,setToActiveValue:f}=Je(n,t,c,V(()=>[h.panelValue.value,g.panelValue.value])),S=()=>{d(o.value),P(!1)},A=b=>{b.target instanceof HTMLInputElement||b.preventDefault()};function T(b){var le,re;const{inputValue:R,inputFocused:$,panelValue:q,handleInput:G,handleInputClear:N,handleInputFocus:J,handleInputBlur:Q,handlePanelChange:W}=b?h:g,D=b?0:1,B=(re=(le=n.placeholder)==null?void 0:le[D])!=null?re:r.timeRangePicker.placeholder[D],E=`${s.value}-board`,z={...F.value,activeValue:b?O.value:y.value,visible:l.value,value:q.value,onChange:W,"onUpdate:activeValue":b?p:f};return C("div",{class:E},[i.value.enableInternalInput&&C(ue,w({ref:b?I:void 0,class:`${E}-input`},x.value,{clearVisible:!!R.value,value:R.value,readonly:n.readonly,focused:$.value,placeholder:B,onInput:G,onClear:N,onFocus:J,onBlur:Q,onKeydown:m}),a),C(fe,w(z,{class:`${E}-panel`,tabindex:-1}),null)])}return()=>{const b=`${s.value}-overlay`,R={[`${b}-separator`]:!0,[`${b}-separator-line`]:!i.value.enableInternalInput},$=[C("div",{class:`${b}-body`,onMousedown:A},[T(!0),C("div",{class:R},[i.value.enableInternalInput&&v()]),T(!1)]),C(se,{class:`${b}-footer`,footer:n.footer,okText:r.timeRangePicker.okText,okButton:{size:"xs",mode:"primary"},cancelVisible:!1,ok:S},a)];return n.overlayRender?n.overlayRender($):C("div",{onMousedown:A},[$])}}}),tn=L({inheritAttrs:!1,setup(e,{attrs:n,expose:a}){const{globalHashId:t,hashId:r}=Z("timePicker"),s=ee(oe),{accessor:c,props:u,slots:i,locale:l,mergedPrefixCls:d,inputRef:m,inputEnableStatus:v,renderSeparator:P,rangeControlContext:{fromControl:o,toControl:h}}=s,g=H(),I=V(()=>{var f,S,A,T;return[(S=(f=u.placeholder)==null?void 0:f[0])!=null?S:l.timeRangePicker.placeholder[0],(T=(A=u.placeholder)==null?void 0:A[1])!=null?T:l.timeRangePicker.placeholder[1]]});a({focus:()=>{var f;(f=(v.value.enableExternalInput?m:g).value)==null||f.focus()}});const x=f=>{o.handleInput(f),U(u.onInput,!0,f)},F=f=>{h.handleInput(f),U(u.onInput,!1,f)};function O(f,S){const{inputValue:A}=S?o:h,T=I.value[S?0:1],b=S?x:F;return C("input",{ref:S?v.value.enableExternalInput?m:g:void 0,class:`${f}-input-inner`,autocomplete:"off",disabled:c.disabled,value:A.value,placeholder:T,readonly:u.readonly||!v.value.enableExternalInput,onInput:b},null)}const y=Ae(s),p=f=>C("span",{class:`${f}-input`},[O(f,!0),C("span",{class:`${f}-input-separator`},[P()]),O(f,!1)]);return()=>{const f=d.value,S={default:()=>p(f),suffix:i.suffix,clearIcon:i.clearIcon};return C(pe,w({className:`${f} ${t.value} ${r.value}`},y.value,n),S)}}}),on=L({name:"IxTimeRangePicker",inheritAttrs:!1,props:Ye,setup(e,{attrs:n,expose:a,slots:t}){const r=_("common"),{globalHashId:s,hashId:c,registerToken:u}=Z("timePicker");u(ve);const i=V(()=>`${r.prefixCls}-time-range-picker`),l=_("locale"),d=_("timePicker"),m=me(),v=H(),P=H(),{elementRef:o,focus:h,blur:g}=ce(),I=V(()=>{var B;return(B=e.format)!=null?B:d.format}),{overlayOpened:k,setOverlayOpened:x}=ke(e,h),F=xe(e,d,m,I,x),{accessor:O,handleFocus:y,handleBlur:p,handleChange:f}=F,S=en(m,I,ge(O,"value")),A=Ce(e,d),T=Le(S,k,x,f),{focused:b,handleFocus:R,handleBlur:$,bindOverlayMonitor:q}=ie(y,p);Y(()=>{q(v,k)});const N={props:e,slots:t,dateConfig:m,common:r,locale:l,config:d,focused:b,mergedPrefixCls:i,formatRef:I,handleKeyDown:T,inputRef:o,inputEnableStatus:A,overlayOpened:k,setOverlayOpened:x,renderSeparator:()=>{var B,E,z;return(z=(E=(B=t.separator)==null?void 0:B.call(t))!=null?E:e.separator)!=null?z:l.timeRangePicker.separator},rangeControlContext:S,...F,handleFocus:R,handleBlur:$};be(oe,N),a({focus:h,blur:g}),j(k,B=>{var E;B?setTimeout(()=>{var z;(z=o.value)==null||z.focus()}):(S.init(!0),b.value&&((E=P.value)==null||E.focus()))});const J=()=>C(tn,w({ref:P},n),null),Q=()=>C(an,null,null),W=Pe(N),D=V(()=>ye([`${i.value}-overlay`,s.value,c.value,e.overlayClassName]));return()=>C(de,w({ref:v},W.value,{class:D.value,triggerId:n.id}),{default:J,content:Q})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const sn=Ze,cn=on;export{sn as I,cn as a};
