import{K as z,am as Ae,r as Fe,a9 as Oe,ad as Re,ae as Be,m as H,N as J,ac as oe,aD as le,L as N,a7 as re,au as ue,av as se}from"./index-25c9e6c5.js";import{n as Ee,c as Te,Éµ as ce,a as ie,b as $e,u as de}from"./index-15247eaa.js";import{c as P,f as we,w as _,y as Q,R as Y,t as De,x as j,l as W,r as U,ax as fe,A as y,a4 as w,a3 as pe,q as ve,z as me}from"./vendor-9ef21769.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function K(e,n,t){if(n)return e.convert(n,t)}function Me(e){return e.sort((n,t)=>n?t?n.valueOf()-t.valueOf():0:1)}function ze(e){return/[hH]/.test(e)}function Ue(e){return/m/.test(e)}function He(e){return/s/.test(e)}function he(e){return/[aA]/.test(e)}function Ke(e){return/A/.test(e)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Z(e,n,t,a){const[c,r]=z(void 0),[i,s]=z(!1),[d,u]=z(void 0),{parse:f,format:h}=e,g=P(()=>K(e,a.value,n.value)),x=P(()=>we(a.value)?a.value:g.value?h(g.value,n.value):"");function o(l=!1){var b;(l||!c.value||f(c.value,n.value).valueOf()!==((b=g.value)==null?void 0:b.valueOf()))&&r(x.value),u(g.value)}_([a,n],()=>o(),{immediate:!0});function p(l,b){return l?e.parse(l,b):void 0}function v(l){return!l||e.isValid(l)}function I(l){const b=l.target.value;r(b);const F=p(b,n.value);v(F)&&t(c.value?F:void 0)}function A(){r("")}function V(){s(!0)}function k(){s(!1)}function m(l){t(l)}return{inputValue:c,panelValue:d,inputFocused:i,setInputValue:r,setPanelValue:u,init:o,handleInput:I,handleInputClear:A,handleInputFocus:V,handleInputBlur:k,handlePanelChange:m}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ge(e,n){return P(()=>{var a;const t=(a=e.allowInput)!=null?a:n.allowInput;return{enableExternalInput:t===!0,enableInternalInput:t==="overlay"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ne(e,n){return t=>{if(t.code==="Escape"){n(!1);return}if(!e.value&&!["Backspace","Tab"].includes(t.code)){t.preventDefault(),n(!0);return}t.code==="Enter"&&n(!1)}}function _e(e,n,t,a){const{bufferUpdated:c,buffer:r}=e;return i=>{if(i.code==="Escape"){t(!1);return}if(!n.value&&!["Backspace","Tab"].includes(i.code)){i.preventDefault(),t(!0);return}switch(i.code){case"Enter":c.value&&a(r.value),t(!1);break}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const je=[0,4];function be(e){const{props:n,common:t,config:a,accessor:c,mergedPrefixCls:r,overlayOpened:i,setOverlayOpened:s}=e;return P(()=>{var d;return{clickOutside:!1,container:(d=n.overlayContainer)!=null?d:a.overlayContainer,containerFallback:`.${r.value}-overlay-container`,disabled:c.disabled||n.readonly,offset:je,placement:"bottomStart",transitionName:`${t.prefixCls}-slide-auto`,trigger:"manual",visible:i.value,"onUpdate:visible":s}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ye(e,n){const[t,a]=Ae(e,"open",!1);return Q(()=>{e.autofocus&&n()}),{overlayOpened:t,setOverlayOpened:a}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ie(e,n,t,a,c){const{accessor:r,control:i}=Fe();Oe(i);const s=Re(e,n),d=Be(e,i),u=o=>{const{get:p}=t,v=he(a.value);return J(o).some(I=>{const A=p(I,"hour"),V=Ee(A,v),k=Te(A,!!v),m=p(I,"minute"),l=p(I,"second");return e.disabledHours(V).includes(k)||e.disabledMinutes(k,V).includes(m)||e.disabledSeconds(k,m,V).includes(l)})};function f(o){const p=Y(o)?Me(o):o;if(u(p))return;let v=De(r.value);v=Y(v)?v.map(I=>K(t,I,a.value)):K(t,v,a.value),r.setValue(p),H(e.onChange,p,v)}function h(o){f(void 0),H(e.onClear,o)}function g(o){H(e.onFocus,o)}function x(o){r.markAsBlurred(),c(!1),H(e.onBlur,o)}return{accessor:r,mergedSize:s,mergedStatus:d,handleChange:f,handleClear:h,handleFocus:g,handleBlur:x}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ce(e){return P(()=>{var c,r;const{props:n,config:t,accessor:a}=e;return{borderless:!1,clearable:(c=n.clearable)!=null?c:t.clearable,clearIcon:(r=n.clearIcon)!=null?r:t.clearIcon,disabled:a.disabled,size:"sm"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Le(e,n,t,a){const c=P(()=>K(n,e.defaultOpenValue,t.value)),[r,i]=z(()=>{var s;return(s=a.value)!=null?s:c.value});return _(a,s=>{i(s!=null?s:c.value)}),{activeValue:r,setActiveValue:i}}function qe(e,n,t,a){const c=P(()=>J(e.defaultOpenValue).map(u=>K(n,u,t.value))),[r,i]=z(()=>{var u,f;return(f=(u=a.value)==null?void 0:u[0])!=null?f:c.value[0]}),[s,d]=z(()=>{var u,f;return(f=(u=a.value)==null?void 0:u[1])!=null?f:c.value[1]});return _(a,u=>{var f,h;i((f=u==null?void 0:u[0])!=null?f:c.value[0]),d((h=u==null?void 0:u[1])!=null?h:c.value[1])}),{fromActiveValue:r,toActiveValue:s,setFromActiveValue:i,setToActiveValue:d}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Pe(e,n){return P(()=>{const{disabledHours:t,disabledMinutes:a,disabledSeconds:c,hideDisabledOptions:r,hourStep:i,minuteStep:s,secondStep:d}=e,u=n.value;return{disabledHours:t,disabledMinutes:a,disabledSeconds:c,hideDisabledOptions:r,hourStep:i,minuteStep:s,secondStep:d,hourEnabled:ze(u),minuteEnabled:Ue(u),secondEnabled:He(u),use12Hours:he(u),amPmCapital:Ke(u)}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const ee=Symbol("timePickerContext"),ne=Symbol("timeRangePickerContext"),Ge=j({setup(){const e=W(ee),{slots:n,props:t,locale:a,formatRef:c,dateConfig:r,inputRef:i,inputEnableStatus:s,mergedPrefixCls:d,overlayOpened:u,handleClear:f,handleKeyDown:h,controlContext:{inputValue:g,panelValue:x,inputFocused:o,handleInput:p,handleInputFocus:v,handleInputBlur:I,handlePanelChange:A}}=e,V=U(),k=()=>{var S;s.value.enableInternalInput&&(i.value=(S=V.value)==null?void 0:S.getInputElement())};Q(k),fe(k);const m=Ce(e),l=Pe(t,c),{activeValue:b,setActiveValue:F}=Le(t,r,c,x),O=S=>{S.target instanceof HTMLInputElement||S.preventDefault()};return()=>{var R;const S=`${d.value}-overlay`,T=`${d.value}-board`,C={...l.value,activeValue:b.value,visible:u.value,value:x.value,onChange:A,"onUpdate:activeValue":F},E=[y("div",{class:`${S}-body ${T}`,tabindex:-1,onMousedown:O},[s.value.enableInternalInput&&y(oe,w({ref:V,class:`${T}-input`},m.value,{clearVisible:!!g.value,value:g.value,readonly:t.readonly,focused:o.value,placeholder:(R=t.placeholder)!=null?R:a.timePicker.placeholder,onInput:p,onClear:f,onFocus:v,onBlur:I,onKeydown:h}),n),y(ce,w(C,{class:`${T}-panel`,tabindex:-1}),null)]),y(le,{class:`${S}-footer`,footer:t.footer},n)];return t.overlayRender?t.overlayRender(E):y("div",{onMousedown:O},[E])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function xe(e){const{props:n,config:t,accessor:a,mergedSize:c,mergedStatus:r,focused:i,handleBlur:s,handleFocus:d,handleClear:u,handleKeyDown:f,overlayOpened:h,setOverlayOpened:g}=e,x=()=>{a.disabled||g(!h.value)};return P(()=>{var o,p,v;return{borderless:n.borderless,clearable:!n.readonly&&!a.disabled&&((o=n.clearable)!=null?o:t.clearable)&&(Y(a.value)?!!a.value.length:!!a.value),clearIcon:(p=n.clearIcon)!=null?p:t.clearIcon,disabled:a.disabled,focused:i.value,readonly:n.readonly,size:c.value,status:r.value,suffix:(v=n.suffix)!=null?v:t.suffix,onClick:x,onClear:u,onFocus:d,onBlur:s,onKeyDown:f}})}const Je=j({inheritAttrs:!1,setup(e,{expose:n,attrs:t}){const a=W(ee),{accessor:c,props:r,slots:i,locale:s,mergedPrefixCls:d,formatRef:u,inputRef:f,inputEnableStatus:h,controlContext:{inputValue:g,handleInput:x}}=a,o=U(),p=P(()=>{var m;return(m=r.placeholder)!=null?m:s.timePicker.placeholder}),v=P(()=>Math.max(10,u.value.length)+2),I=m=>{x(m),H(r.onInput,m)};n({focus:()=>{var m;(m=(h.value.enableExternalInput?f:o).value)==null||m.focus()}});const V=xe(a),k=m=>y("input",{ref:h.value.enableExternalInput?f:o,class:`${m}-input`,autocomplete:"off",disabled:c.disabled,placeholder:p.value,readonly:r.readonly||!h.value.enableExternalInput,size:v.value,value:g.value,onInput:I},null);return()=>{const m=d.value,l={default:()=>k(m),suffix:i.suffix,clearIcon:i.clearIcon};return y(ie,w({className:m},V.value,t),l)}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Ve={...$e,open:{type:Boolean,default:void 0},control:{type:[String,Number,Object,Array],default:void 0},allowInput:{type:[Boolean,String],default:void 0},autofocus:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},clearIcon:String,clearText:String,disabled:{type:Boolean,default:!1},format:String,overlayClassName:String,overlayContainer:{type:[String,HTMLElement,Function],default:void 0},overlayRender:Function,readonly:{type:Boolean,default:!1},size:String,status:String,suffix:String,"onUpdate:open":[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array]},Qe={...Ve,value:[String,Date,Number],defaultOpenValue:[String,Date,Number],footer:{type:[Boolean,Array,Object],default:!1},placeholder:String,"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},We={...Ve,value:Array,defaultOpenValue:Array,footer:{type:[Boolean,Array,Object],default:!0},placeholder:Array,separator:[String,Object],"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},Xe=j({name:"IxTimePicker",inheritAttrs:!1,props:Qe,setup(e,{attrs:n,expose:t,slots:a}){const c=N("common"),r=P(()=>`${c.prefixCls}-time-picker`),i=N("locale"),s=N("timePicker"),d=de(),u=U(),f=U(),{elementRef:h,focus:g,blur:x}=re(),o=P(()=>{var D;return(D=e.format)!=null?D:s.format}),{overlayOpened:p,setOverlayOpened:v}=ye(e,g),I=Ie(e,s,d,o,v),{accessor:A,handleFocus:V,handleBlur:k,handleChange:m}=I,l=Z(d,o,m,pe(A,"value")),b=ge(e,s),F=Ne(p,v),{focused:O,handleFocus:S,handleBlur:T,bindOverlayMonitor:C}=ue(V,k);Q(()=>{C(u,p)});const E={props:e,slots:a,dateConfig:d,common:c,locale:i,config:s,mergedPrefixCls:r,formatRef:o,focused:O,handleKeyDown:F,inputRef:h,inputEnableStatus:b,overlayOpened:p,setOverlayOpened:v,controlContext:l,...I,handleFocus:S,handleBlur:T};ve(ee,E),t({focus:g,blur:x}),_(p,D=>{var B;D?setTimeout(()=>{var $;($=h.value)==null||$.focus()}):(l.init(!0),O.value&&((B=f.value)==null||B.focus()))});const R=()=>y(Je,w({ref:f},n),null),L=()=>y(Ge,null,null),q=be(E),G=P(()=>me([`${r.value}-overlay`,e.overlayClassName]));return()=>y(se,w({ref:u},q.value,{class:G.value,triggerId:n.id}),{default:R,content:L})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ye(e,n,t){const[a,c]=z(J(t.value).map(o=>K(e,o,n.value))),[r,i]=z(!1),s=o=>{c(Ze(e,o,n.value)),i(!0)};_([t,n],([o])=>{s(o)});const d=P(()=>J(a.value)),u=P(()=>d.value[0]),f=P(()=>d.value[1]),h=Z(e,n,o=>{s([o,f.value])},u),g=Z(e,n,o=>{s([u.value,o])},f);return{buffer:a,bufferUpdated:r,fromControl:h,toControl:g,init:(o=!1)=>{s(t.value),i(!1),h.init(o),g.init(o)}}}function Ze(e,n,t){return J(n).map(a=>K(e,a,t))}const en=j({setup(){const e=W(ne),{props:n,slots:t,dateConfig:a,locale:c,mergedPrefixCls:r,formatRef:i,inputRef:s,inputEnableStatus:d,overlayOpened:u,handleChange:f,handleKeyDown:h,renderSeparator:g,setOverlayOpened:x,rangeControlContext:{buffer:o,fromControl:p,toControl:v}}=e,I=U(),A=()=>{var C;d.value.enableInternalInput&&(s.value=(C=I.value)==null?void 0:C.getInputElement())};Q(A),fe(A);const V=Ce(e),k=Pe(n,i),{fromActiveValue:m,toActiveValue:l,setFromActiveValue:b,setToActiveValue:F}=qe(n,a,i,P(()=>[p.panelValue.value,v.panelValue.value])),O=()=>{f(o.value),x(!1)},S=C=>{C.target instanceof HTMLInputElement||C.preventDefault()};function T(C){var te,ae;const{inputValue:E,inputFocused:R,panelValue:L,handleInput:q,handleInputClear:G,handleInputFocus:D,handleInputBlur:B,handlePanelChange:$}=C?p:v,M=C?0:1,ke=(ae=(te=n.placeholder)==null?void 0:te[M])!=null?ae:c.timeRangePicker.placeholder[M],X=`${r.value}-board`,Se={...k.value,activeValue:C?m.value:l.value,visible:u.value,value:L.value,onChange:$,"onUpdate:activeValue":C?b:F};return y("div",{class:X},[d.value.enableInternalInput&&y(oe,w({ref:C?I:void 0,class:`${X}-input`},V.value,{clearVisible:!!E.value,value:E.value,readonly:n.readonly,focused:R.value,placeholder:ke,onInput:q,onClear:G,onFocus:D,onBlur:B,onKeydown:h}),t),y(ce,w(Se,{class:`${X}-panel`,tabindex:-1}),null)])}return()=>{const C=`${r.value}-overlay`,E={[`${C}-separator`]:!0,[`${C}-separator-line`]:!d.value.enableInternalInput},R=[y("div",{class:`${C}-body`,onMousedown:S},[T(!0),y("div",{class:E},[d.value.enableInternalInput&&g()]),T(!1)]),y(le,{class:`${C}-footer`,footer:n.footer,okText:c.timeRangePicker.okText,okButton:{size:"xs",mode:"primary"},cancelVisible:!1,ok:O},t)];return n.overlayRender?n.overlayRender(R):y("div",{onMousedown:S},[R])}}}),nn=j({inheritAttrs:!1,setup(e,{attrs:n,expose:t}){const a=W(ne),{accessor:c,props:r,slots:i,locale:s,mergedPrefixCls:d,inputRef:u,inputEnableStatus:f,renderSeparator:h,rangeControlContext:{fromControl:g,toControl:x}}=a,o=U(),p=P(()=>{var l,b,F,O;return[(b=(l=r.placeholder)==null?void 0:l[0])!=null?b:s.timeRangePicker.placeholder[0],(O=(F=r.placeholder)==null?void 0:F[1])!=null?O:s.timeRangePicker.placeholder[1]]});t({focus:()=>{var l;(l=(f.value.enableExternalInput?u:o).value)==null||l.focus()}});const I=l=>{g.handleInput(l),H(r.onInput,!0,l)},A=l=>{x.handleInput(l),H(r.onInput,!1,l)};function V(l,b){const{inputValue:F}=b?g:x,O=p.value[b?0:1],S=b?I:A;return y("input",{ref:b?f.value.enableExternalInput?u:o:void 0,class:`${l}-input-inner`,autocomplete:"off",disabled:c.disabled,value:F.value,placeholder:O,readonly:r.readonly||!f.value.enableExternalInput,onInput:S},null)}const k=xe(a),m=l=>y("span",{class:`${l}-input`},[V(l,!0),y("span",{class:`${l}-input-separator`},[h()]),V(l,!1)]);return()=>{const l=d.value,b={default:()=>m(l),suffix:i.suffix,clearIcon:i.clearIcon};return y(ie,w({className:l},k.value,n),b)}}}),tn=j({name:"IxTimeRangePicker",inheritAttrs:!1,props:We,setup(e,{attrs:n,expose:t,slots:a}){const c=N("common"),r=P(()=>`${c.prefixCls}-time-range-picker`),i=N("locale"),s=N("timePicker"),d=de(),u=U(),f=U(),{elementRef:h,focus:g,blur:x}=re(),o=P(()=>{var B;return(B=e.format)!=null?B:s.format}),{overlayOpened:p,setOverlayOpened:v}=ye(e,g),I=Ie(e,s,d,o,v),{accessor:A,handleFocus:V,handleBlur:k,handleChange:m}=I,l=Ye(d,o,pe(A,"value")),b=ge(e,s),F=_e(l,p,v,m),{focused:O,handleFocus:S,handleBlur:T,bindOverlayMonitor:C}=ue(V,k);Q(()=>{C(u,p)});const R={props:e,slots:a,dateConfig:d,common:c,locale:i,config:s,focused:O,mergedPrefixCls:r,formatRef:o,handleKeyDown:F,inputRef:h,inputEnableStatus:b,overlayOpened:p,setOverlayOpened:v,renderSeparator:()=>{var B,$,M;return(M=($=(B=a.separator)==null?void 0:B.call(a))!=null?$:e.separator)!=null?M:i.timeRangePicker.separator},rangeControlContext:l,...I,handleFocus:S,handleBlur:T};ve(ne,R),t({focus:g,blur:x}),_(p,B=>{var $;B?setTimeout(()=>{var M;(M=h.value)==null||M.focus()}):(l.init(!0),O.value&&(($=f.value)==null||$.focus()))});const L=()=>y(nn,w({ref:f},n),null),q=()=>y(en,null,null),G=be(R),D=P(()=>me([`${r.value}-overlay`,e.overlayClassName]));return()=>y(se,w({ref:u},G.value,{class:D.value,triggerId:n.id}),{default:L,content:q})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const rn=Xe,un=tn;export{rn as I,un as a};
