import{q as M,N as j,F as R,M as F,aC as k,a9 as D,af as K,aD as H,ai as G,b as V,e as w,ab as E,A as X}from"./index-ebff8fb2.js";import{l as z,D as I,c as m,p as O,q as d,s as A,w as Y,i as x,b as J,f as q,N as Q,y as U,Y as Z,ad as W,W as P,au as ee}from"./vendor-7de7c0f1.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const N=[Number,String,Object],oe={control:{type:[String,Number,Object,Array],default:void 0},colonless:{type:Boolean,default:void 0},controlCol:N,controlTooltipIcon:String,labelAlign:String,labelCol:N,labelTooltipIcon:String,layout:String,messageTooltip:{type:[Boolean,Object],default:!1},size:String,onSubmit:{type:Function,default:e=>e.preventDefault()}},te={colonless:{type:Boolean,default:void 0},control:{type:[String,Number,Object,Array],default:void 0},controlCol:N,controlTooltip:String,controlTooltipIcon:String,description:String,label:[String,Number],labelAlign:String,labelCol:N,labelFor:[String,Number],labelTooltip:String,labelTooltipIcon:String,required:{type:Boolean,default:!1},message:[String,Function,Object],messageTooltip:{type:[Boolean,Object],default:void 0},status:String},le={control:{type:[String,Number,Object,Array],default:void 0}};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ne(e){const{colorTextInfo:l,colorErrorBg:n,colorErrorText:r,fontSizeSm:i,marginSize2Xs:s,marginSizeSm:c,paddingSizeSm:o}=e;return{labelColor:l,labelRequiredColor:r,labelFontSize:i,labelColonMarginLeft:s,labelColonMarginRight:c,messageTooltipBgColor:n,itemMarginBottom:c,verticalItemLabelPadding:`0 0 ${o}px`,verticalItemLabelMargin:0}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const _=e=>ne(e),ae=z({name:"IxForm",props:oe,setup(e,{slots:l}){const n=M(),{globalHashId:r,hashId:i,registerToken:s}=j("form");s(_),I(R,n);const c=F("common"),o=m(()=>`${c.prefixCls}-form`),a=F("form"),g=m(()=>{var u;return(u=e.layout)!=null?u:a.layout}),b=m(()=>{var u;return(u=e.size)!=null?u:a.size});I(k,{props:e,config:a}),I(D,{size:b});const v=m(()=>{const u=o.value;return O({[r.value]:!!r,[i.value]:!!i.value,[u]:!0,[`${u}-${g.value}`]:!0,[`${u}-${b.value}`]:!0})});return()=>d("form",{class:v.value,onSubmit:e.onSubmit},[l.default&&l.default()])}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function re(e){const l=se(),n=K(e,l),r=ie(e,l,n);return{status:n,message:r}}function se(){const e=A();let l,n;I(H,{registerControl:(o,a)=>{n||(l=o,n=Q(()=>e.value=a.value))},unregisterControl:o=>{o===l&&(n&&(n(),n=void 0),e.value=void 0)}});const s=M(),c=A();return Y([s,e],([o,a])=>{const g=o!=null?o:a;c.value!==g&&(c.value=g)},{immediate:!0}),c}function ie(e,l,n){const r=F("locale");return m(()=>{const i=n.value;if(!i)return;const s=e.message;return s?x(s)?s(l.value):J(s)?s[i]:i==="invalid"?s:void 0:ce(l,r)})}function ce(e,l){const n=e.value;if(!n)return;const r=n.errors.value;for(const i in r){if(!G(r,i))continue;const{message:s,...c}=r[i];if(s){if(q(s))return s;if(x(s))return s(c,n);const o=s[l.type];if(o)return x(o)?o(c,n):o}}}const ue=z({name:"IxFormItem",props:te,setup(e,{slots:l}){const n=F("common"),{globalHashId:r,hashId:i,registerToken:s}=j("form");s(_);const c=m(()=>`${n.prefixCls}-form-item`),{props:o,config:a}=U(k,null)||{},g=m(()=>{var t,f;return(f=(t=e.colonless)!=null?t:o==null?void 0:o.colonless)!=null?f:a==null?void 0:a.colonless}),b=m(()=>{var t,f;return(f=(t=e.labelAlign)!=null?t:o==null?void 0:o.labelAlign)!=null?f:a==null?void 0:a.labelAlign}),v=m(()=>{var t;return B((t=e.labelCol)!=null?t:o==null?void 0:o.labelCol)}),u=m(()=>{var t,f;return(f=(t=e.labelTooltipIcon)!=null?t:o==null?void 0:o.labelTooltipIcon)!=null?f:a==null?void 0:a.labelTooltipIcon}),$=m(()=>{var t;return B((t=e.controlCol)!=null?t:o==null?void 0:o.controlCol)}),T=m(()=>{var t,f;return(f=(t=e.controlTooltipIcon)!=null?t:o==null?void 0:o.controlTooltipIcon)!=null?f:a==null?void 0:a.controlTooltipIcon}),y=m(()=>{var t;return(t=e.messageTooltip)!=null?t:o==null?void 0:o.messageTooltip}),{status:S,message:h}=re(e),C=m(()=>{const t=c.value,f=S.value;return O({[r.value]:!!r.value,[i.value]:!!i.value,[t]:!0,[`${t}-${f}`]:!!f})}),p=m(()=>{const t=c.value;return O({[`${t}-label`]:!0,[`${t}-label-colon`]:!g.value,[`${t}-label-required`]:e.required,[`${t}-label-start`]:b.value==="start"})});return()=>{const t=c.value;return d(V,{class:C.value},{default:()=>[de(e,l,p,v,u,t,i.value),me(e,l,n,$,T,S,h,y,t,i.value)]})}}});function B(e){return Z(e)||q(e)?{span:e}:e}function de(e,l,n,r,i,s,c){const{label:o,labelFor:a,labelTooltip:g}=e,{label:b,labelTooltip:v}=l;if(!(o||b))return;const u=L(v,g,i.value,c);return d(w,W({class:n.value},r.value),{default:()=>[d("label",{for:a},[b?b():o,u&&d("span",{class:`${s}-label-tooltip`},[u])])]})}function me(e,l,n,r,i,s,c,o,a,g){const{controlTooltip:b,description:v}=e,{controlTooltip:u,description:$,message:T}=l,y=L(u,b,i.value,g),S=d("div",{class:`${a}-control-input`},[d("div",{class:`${a}-control-input-content`},[l.default&&l.default()]),y&&d("span",{class:`${a}-control-tooltip`},[y])]),h=fe(o.value,c.value,a,g),C=$?$():v,p=[];if(h){const t={default:()=>S,title:T};p.push(d(E,h,t))}else{p.push(S);const t=T?T():c.value;(!C||t)&&p.push(d("div",{class:`${a}-message`},[d(P,{name:`${n.prefixCls}-fade-down`},{default:()=>[t&&d("div",{class:`${a}-message-${s.value}`},[t])]})]))}return C&&p.push(d("div",{class:`${a}-description`},[C])),d(w,W({class:`${a}-control`},r.value),{default:()=>[p]})}function fe(e,l,n,r){if(!e)return;const i={class:[`${n}-message-tooltip`,r],offset:[0,6],placement:"bottomStart",title:l};return ee(e)?i:{...i,...e}}function L(e,l,n,r){return e?e():l&&d(E,{class:r,title:l},{default:()=>[d(X,{name:n},null)]})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const ge=z({name:"IxFormWrapper",props:le,setup(e,{slots:l}){const n=M();return I(R,n),()=>{var r;return(r=l.default)==null?void 0:r.call(l)}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const pe=ae,Te=ue,Se=ge;export{Te as I,pe as a,Se as b};
