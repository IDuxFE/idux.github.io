import{af as K,ag as A,j as B,w as T,\u0275 as M,ah as Q,u as k}from"./index.01a21eef.js";import{e as g,au as _,w as D,v as S,y as o,k as E,ad as F,i as w,a1 as R,p as U,z as V}from"./vendor.71a61ad2.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function q(e,n){return g(()=>{const t=e.value,s=n.value;let i;s<=9?i=z(1,s):i=G(t,s);const l={type:"prev",disabled:t===1},c={type:"next",disabled:t===s};return[l,...i,c]})}const z=(e,n)=>{const t=[];for(let s=e;s<=n;s++)t.push({index:s,type:"page"});return t},G=(e,n)=>{let t=[];const s={type:"prev5"},i={type:"next5"};e<5?t=[...z(2,5),i]:e<n-3?t=[s,...z(e-2,e+2),i]:t=[s,...z(n-4,n-1)];const l=z(1,1),c=z(n,n);return[...l,...t,...c]};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function O(e,n,t){return _(i=>{const l=i.target,c=Math.floor(K(l.value,e.value));n(c),t.value||(l.value="")},["enter"])}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function H(e,n){var d;const[t,s]=A(e,"pageIndex",1),[i,l]=A(e,"pageSize",(d=e.pageSize)!=null?d:n.pageSize),c=g(()=>Math.max(Math.ceil(e.total/i.value),1)),p=v=>{const m=W(v,c.value);m!==t.value&&(s(m),B(e.onChange,m,i.value))},r=v=>{l(v),B(e.onChange,t.value,v)};return D([t,c],([v,m])=>{v>m&&p(m)},{immediate:!0}),{activeIndex:t,activeSize:i,lastIndex:c,changePageIndex:p,changePageSize:r}}const W=(e,n)=>e>n?n:e<1?1:e;/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const b=Symbol("paginationToken");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const X={pageIndex:Number,pageSize:Number,disabled:{type:Boolean,default:!1},pageSizes:Array,showQuickJumper:{type:Boolean,default:void 0},showSizeChanger:{type:Boolean,default:void 0},showTitle:{type:Boolean,default:void 0},showTotal:{type:Boolean,default:void 0},simple:{type:Boolean,default:void 0},size:String,total:{type:Number,default:0},"onUpdate:pageIndex":[Function,Array],"onUpdate:pageSize":[Function,Array],onChange:[Function,Array]},Y={disabled:{type:Boolean,default:void 0},index:Number,type:{type:String,required:!0}},J={prev:"left",next:"right",prev5:"double-left",next5:"double-right",page:""},Z={next:1,prev:-1,prev5:-5,next5:5},j=S({props:Y,setup(e){const{props:n,slots:t,config:s,locale:i,mergedPrefixCls:l,activeIndex:c,changePageIndex:p}=w(b),r=g(()=>c.value===e.index),d=g(()=>e.disabled||n.disabled),v=g(()=>{var u;return(u=n.showTitle)!=null?u:s.showTitle}),m=g(()=>{const u=`${l.value}-item`;return{[u]:!0,[`${u}-${e.type}`]:!0,[`${u}-active`]:r.value,[`${u}-disabled`]:d.value}}),$=g(()=>{if(!v.value)return;const{type:u,index:x}=e;return u==="page"?x:i.pagination[u]}),I=()=>{if(d.value)return;const{type:u,index:x}=e;let f;u==="page"?f=x:f=c.value+Z[u],p(f)},C=u=>{d.value||u.code!=="Enter"||I()};return()=>{const u=`${l.value}-item`,{index:x,type:f}=e,P=d.value;let a;e.type==="prev5"||f==="next5"?a=o("span",{class:` ${u}-jumper`},[o(T,{name:J[f]},null),o(T,{class:`${u}-ellipsis`,name:"ellipsis"},null)]):E(x)?a=o(T,{name:J[f]},null):a=F(x);const h=t.item?t.item({index:x,type:f,active:r.value,disabled:P,original:a}):a;return o("li",{class:m.value,tabindex:P?-1:0,title:$.value,onClick:I,onKeydown:C},[o("span",{class:`${u}-content`},[h])])}}}),L=S({setup(){const{props:e,locale:n,mergedPrefixCls:t,mergedSize:s,jumpToIndex:i}=w(b);return()=>{const l=`${t.value}-jumper`,{disabled:c}=e,{jumpTo:p,page:r}=n.pagination;return o("li",{class:l},[p,o(M,{disabled:c,size:s.value==="lg"?"md":"sm",onKeydown:i},null),r])}}}),ee=S({setup(){const{props:e,config:n,locale:t,mergedPrefixCls:s,mergedSize:i,activeSize:l,changePageSize:c}=w(b),p=g(()=>{const{pageSizes:r=n.pageSizes}=e;return r.map(d=>({key:d,label:d}))});return()=>{const r=`${s.value}-sizes`,{itemsPerPage:d,itemsSuffix:v}=t.pagination;return o("li",{class:r},[d,o(Q,{disabled:e.disabled,dataSource:p.value,size:i.value==="lg"?"md":"sm",value:l.value,onChange:c},null),v])}}}),te=S({setup(){const{props:e,slots:n,locale:t,activeIndex:s,activeSize:i,mergedPrefixCls:l}=w(b),c=g(()=>{const p=s.value,r=i.value,d=(p-1)*r+1,v=Math.min(p*r,e.total);return[d,v]});return()=>{const p=`${l.value}-total`,{total:r}=e,{totalPrefix:d,totalSuffix:v}=t.pagination,m=n.total?n.total({total:r,range:c.value,prefix:d,suffix:v}):`${d} ${r} ${v}`;return o("li",{class:p},[m])}}}),ne=S({name:"IxPagination",props:X,setup(e,{slots:n}){const t=k("common"),s=g(()=>`${t.prefixCls}-pagination`),i=k("locale"),l=k("pagination"),c=g(()=>{var a;return(a=e.showTotal)!=null?a:l.showTotal}),p=g(()=>{var a;return(a=e.simple)!=null?a:l.simple}),r=g(()=>{var a;return(a=e.size)!=null?a:l.size}),d=g(()=>{var a;return(a=e.showQuickJumper)!=null?a:l.showQuickJumper}),v=g(()=>{var a;return(a=e.showSizeChanger)!=null?a:l.showSizeChanger}),{activeIndex:m,activeSize:$,lastIndex:I,changePageIndex:C,changePageSize:u}=H(e,l),x=q(m,I),f=O(m,C,p);U(b,{props:e,slots:n,config:l,locale:i,mergedPrefixCls:s,mergedSize:r,activeIndex:m,activeSize:$,lastIndex:I,changePageIndex:C,changePageSize:u,jumpToIndex:f});const P=g(()=>{const a=s.value;return V({[a]:!0,[`${a}-disabled`]:e.disabled,[`${a}-simple`]:p.value,[`${a}-${r.value}`]:!0})});return()=>{const a=s.value,h=c.value?[o(te,null,null)]:[];if(p.value){const y=m.value,N=I.value;h.push(o(j,{disabled:y===1,type:"prev"},null)),h.push(o("li",{class:`${a}-item`},[d.value?o(M,{disabled:e.disabled,size:r.value==="lg"?"md":"sm",value:y.toString(),onKeydown:f},null):y,o("span",{class:`${a}-item-slash`},[F("/")]),o("span",null,[N])])),h.push(o(j,{disabled:y===N,type:"next"},null))}else x.value.forEach(y=>h.push(o(j,R({key:y.type+"-"+y.index},y),null))),v.value&&h.push(o(ee,null,null)),d.value&&h.push(o(L,null,null));return o("ul",{class:P.value},[h])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const le=ne;export{le as I};
