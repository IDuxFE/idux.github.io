import{q as M,N as j,F as k,M as F,aC as R,aa as K,ag as D,aD as H,ak as G,b as U,e as w,ac as E,A as V}from"./index-a1eb659d.js";import{l as z,B as I,c as m,p as x,n as d,s as B,w as X,i as O,b as J,f as W,P,x as Q,W as Y,ab as _,U as Z,at as ee}from"./vendor-4aa48d2c.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const N=[Number,String,Object],oe={control:{type:[String,Number,Object,Array],default:void 0},colonless:{type:Boolean,default:void 0},controlCol:N,controlTooltipIcon:String,labelAlign:String,labelCol:N,labelTooltipIcon:String,layout:String,messageTooltip:{type:[Boolean,Object],default:!1},size:String,onSubmit:{type:Function,default:e=>e.preventDefault()}},te={colonless:{type:Boolean,default:void 0},control:{type:[String,Number,Object,Array],default:void 0},controlCol:N,controlTooltip:String,controlTooltipIcon:String,description:String,label:[String,Number],labelAlign:String,labelCol:N,labelFor:[String,Number],labelTooltip:String,labelTooltipIcon:String,required:{type:Boolean,default:!1},message:[String,Function,Object],messageTooltip:{type:[Boolean,Object],default:void 0},status:String},le={control:{type:[String,Number,Object,Array],default:void 0}};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ne(e){const{colorTextInfo:l,colorErrorBg:n,colorErrorText:r,fontSizeSm:i,marginSize2Xs:s,marginSizeSm:c,paddingSizeSm:o}=e;return{labelColor:l,labelRequiredColor:r,labelFontSize:i,labelColonMarginLeft:s,labelColonMarginRight:c,messageTooltipBgColor:n,itemMarginBottom:c,verticalItemLabelPadding:`0 0 ${o}px`,verticalItemLabelMargin:0}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const q=e=>ne(e),ae=z({name:"IxForm",props:oe,setup(e,{slots:l}){const n=M(),{globalHashId:r,hashId:i,registerToken:s}=j("form");s(q),I(k,n);const c=F("common"),o=m(()=>`${c.prefixCls}-form`),a=F("form"),b=m(()=>{var u;return(u=e.layout)!=null?u:a.layout}),f=m(()=>{var u;return(u=e.size)!=null?u:a.size});I(R,{props:e,config:a}),I(K,{size:f});const v=m(()=>{const u=o.value;return x({[r.value]:!!r,[i.value]:!!i.value,[u]:!0,[`${u}-${b.value}`]:!0,[`${u}-${f.value}`]:!0})});return()=>d("form",{class:v.value,onSubmit:e.onSubmit},[l.default&&l.default()])}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function re(e){const l=se(),n=D(e,l),r=ie(e,l,n);return{status:n,message:r}}function se(){const e=B();let l,n;I(H,{registerControl:(o,a)=>{n||(l=o,n=P(()=>e.value=a.value))},unregisterControl:o=>{o===l&&(n&&(n(),n=void 0),e.value=void 0)}});const s=M(),c=B();return X([s,e],([o,a])=>{const b=o!=null?o:a;c.value!==b&&(c.value=b)},{immediate:!0}),c}function ie(e,l,n){const r=F("locale");return m(()=>{const i=n.value;if(!i)return;const s=e.message;return s?O(s)?s(l.value):J(s)?s[i]:i==="invalid"?s:void 0:ce(l,r)})}function ce(e,l){const n=e.value;if(!n)return;const r=n.errors.value;for(const i in r){if(!G(r,i))continue;const{message:s,...c}=r[i];if(s){if(W(s))return s;if(O(s))return s(c,n);const o=s[l.type];if(o)return O(o)?o(c,n):o}}}const ue=z({name:"IxFormItem",props:te,setup(e,{slots:l}){const n=F("common"),{globalHashId:r,hashId:i,registerToken:s}=j("form");s(q);const c=m(()=>`${n.prefixCls}-form-item`),{props:o,config:a}=Q(R,null)||{},b=m(()=>{var t,g;return(g=(t=e.colonless)!=null?t:o==null?void 0:o.colonless)!=null?g:a==null?void 0:a.colonless}),f=m(()=>{var t,g;return(g=(t=e.labelAlign)!=null?t:o==null?void 0:o.labelAlign)!=null?g:a==null?void 0:a.labelAlign}),v=m(()=>{var t;return A((t=e.labelCol)!=null?t:o==null?void 0:o.labelCol)}),u=m(()=>{var t,g;return(g=(t=e.labelTooltipIcon)!=null?t:o==null?void 0:o.labelTooltipIcon)!=null?g:a==null?void 0:a.labelTooltipIcon}),$=m(()=>{var t;return A((t=e.controlCol)!=null?t:o==null?void 0:o.controlCol)}),T=m(()=>{var t,g;return(g=(t=e.controlTooltipIcon)!=null?t:o==null?void 0:o.controlTooltipIcon)!=null?g:a==null?void 0:a.controlTooltipIcon}),h=m(()=>{var t;return(t=e.messageTooltip)!=null?t:o==null?void 0:o.messageTooltip}),{status:S,message:y}=re(e),C=m(()=>{const t=c.value,g=S.value;return x({[r.value]:!!r.value,[i.value]:!!i.value,[t]:!0,[`${t}-${g}`]:!!g})}),p=m(()=>{const t=c.value;return x({[`${t}-label`]:!0,[`${t}-label-colon`]:!b.value,[`${t}-label-required`]:e.required,[`${t}-label-start`]:f.value==="start"})});return()=>{const t=c.value;return d(U,{class:C.value},{default:()=>[de(e,l,p,v,u,t,i.value),me(e,l,n,$,T,S,y,h,t,i.value)]})}}});function A(e){return Y(e)||W(e)?{span:e}:e}function de(e,l,n,r,i,s,c){const{label:o,labelFor:a,labelTooltip:b}=e,{label:f,labelTooltip:v}=l;if(!(o||f))return;const u=L(v,b,i.value,c);return d(w,_({class:n.value},r.value),{default:()=>[d("label",{for:a},[f?f():o,u&&d("span",{class:`${s}-label-tooltip`},[u])])]})}function me(e,l,n,r,i,s,c,o,a,b){const{controlTooltip:f,description:v}=e,{controlTooltip:u,description:$,message:T}=l,h=L(u,f,i.value,b),S=d("div",{class:`${a}-control-input`},[d("div",{class:`${a}-control-input-content`},[l.default&&l.default()]),h&&d("span",{class:`${a}-control-tooltip`},[h])]),y=ge(o.value,c.value,a,b),C=$?$():v,p=[];if(y){const t={default:()=>S,title:T};p.push(d(E,y,t))}else{p.push(S);const t=T?T():c.value;(!C||t)&&p.push(d("div",{class:`${a}-message`},[d(Z,{name:`${n.prefixCls}-fade-down`},{default:()=>[t&&d("div",{class:`${a}-message-${s.value}`},[t])]})]))}return C&&p.push(d("div",{class:`${a}-description`},[C])),d(w,_({class:`${a}-control`},r.value),{default:()=>[p]})}function ge(e,l,n,r){if(!e)return;const i={class:[`${n}-message-tooltip`,r],offset:[0,6],placement:"bottomStart",title:l};return ee(e)?i:{...i,...e}}function L(e,l,n,r){return e?e():l&&d(E,{class:r,title:l},{default:()=>[d(V,{name:n},null)]})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const be=z({name:"IxFormWrapper",props:le,setup(e,{slots:l}){const n=M();return I(k,n),()=>{var r;return(r=l.default)==null?void 0:r.call(l)}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const pe=ae,Te=ue,Se=be;export{Te as I,pe as a,Se as b};
