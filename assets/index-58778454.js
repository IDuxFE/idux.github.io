import{c as oe,M as q,P as ne,m as z,aw as Be,ao as Q,j as ve,Q as Ie,A as re,aL as Se,H as Fe,av as Re,K as $e,aT as ue,ad as we,aG as Ee,N as Le}from"./index-c73ba825.js";import{u as Oe,l as M,x as N,p as S,f as me,S as ze,aB as Ne,r as _,c as h,M as Ve,at as ye,L as ke,w as Y,R as He,$ as se,n as J,B as W,O as be,ac as Ke,m as Me,aD as _e,b as je,d as Ue}from"./vendor-deae6a9f.js";import{I as Ge}from"./index-17e96a8d.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const j=Symbol("transferContext"),Ae=Symbol("transferListContext"),Z=Symbol("TRANSFER_SOURCE_TOKEN"),p=Symbol("TRANSFER_TARGET_TOKEN"),ee=Symbol("TRANSFER_OPERATIONS_TOKEN");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function te(e){const t={};return Object.keys(e).forEach(l=>{t[l]=Oe(e[l])}),t}const We=M({setup(){const{slots:e,props:t,mergedPrefixCls:l}=N(j),r=N(ee),{appendDisabled:c,removeDisabled:n,triggerAppend:a,triggerRemove:o}=r,g=()=>{a()},u=()=>{o()},f=(v,x,T,C)=>me(x)?S(oe,{class:`${v}-btn`,icon:x,disabled:T,onClick:C},null):ze(S(oe,{class:`${v}-btn`,disabled:T,onClick:C},null),[[Ne("slos"),{icon:()=>x}]]),A=v=>{if(e.operations)return e.operations(te(r));if(t.mode!=="immediate")return S("div",{class:`${v}-inner`},[f(v,"double-right",c.value,g),f(v,"double-left",n.value,u)])};return()=>{const v=`${l.value}-operations`;return S("div",{class:v},[A(v)])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function qe(e){const t=q("pagination");return{sourcePagination:ie(e,t,!0),targetPagination:ie(e,t,!1)}}function ie(e,t,l){const r=_(),c=_(),n=h(()=>{const o=e.pagination;if(!o)return null;if(o===!0)return{};const g=l?0:1,u=ne(o.pageIndex),f=ne(o.pageSize),A=ne(o.total);return{pageIndex:u==null?void 0:u[g],pageSize:f==null?void 0:f[g],disabled:e.disabled||o.disabled,total:A==null?void 0:A[g],onChange:(v,x)=>{var T;return(T=o.onChange)==null?void 0:T.call(o,l,v,x)}}});Ve(()=>{var g,u;const o=n.value;r.value=(g=o==null?void 0:o.pageIndex)!=null?g:1,c.value=(u=o==null?void 0:o.pageSize)!=null?u:t.pageSize});const a=o=>{r.value=o};return h(()=>{const o=n.value;if(o!==null)return{simple:!0,showTotal:!1,showQuickJumper:!0,...o,pageIndex:r.value,pageSize:c.value,"onUpdate:pageIndex":a}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Qe(e,t){return{source:h(()=>de(e,t,!0)),target:h(()=>de(e,t,!1))}}function de(e,t,l){var n;const r=t.searchPlaceholder[l?0:1],c=me(e.searchPlaceholder)?e.searchPlaceholder:(n=e.searchPlaceholder)==null?void 0:n[l?0:1];return c!=null?c:r}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Je(e,t){return{source:h(()=>he(e,t,!0)),target:h(()=>he(e,t,!1))}}function he(e,t,l){var c;const r=(c=e.searchable)!=null?c:t.searchable;return!r||ye(r)?!!r:l?r.source:r.target}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Xe(e,t,l,r,c,n,a,o,g,u){const{dataSource:f,sourceData:A,targetData:v,targetKeySet:x,dataKeyMap:T,disabledKeys:C,disabledSourceKeys:i,disabledTargetKeys:b,filteredDataSource:K,filteredSourceData:B,filteredTargetData:$,paginatedDataSource:m,paginatedSourceData:P,paginatedTargetData:D,sourceSearchValue:E,setSourceSearchValue:L,targetSearchValue:w,setTargetSearchValue:V,getKey:F}=t,{sourceSelectedKeys:O,targetSelectedKeys:H,sourceSelectedKeySet:y,targetSelectedKeySet:s,sourceSelectAllStatus:d,targetSelectAllStatus:R,sourceSelectAllDisabled:k,targetSelectAllDisabled:X,handleSourceSelectChange:U,handleTargetSelectChange:I,handleSourceSelectAll:Te,handleTargetSelectAll:De}=r,{triggerAppend:Pe,triggerRemove:xe}=l,ce={dataSource:f,dataKeyMap:T,disabledDataSourceKeys:C,filteredDataSource:K,paginatedDataSource:m,targetKeySet:x,showSelectAll:n,triggerAppend:Pe,triggerRemove:xe,getKey:F};return{sourceBindings:{data:A,filteredData:B,paginatedData:P,pagination:c.sourcePagination,disabledKeys:i,selectedKeys:O,selectedKeySet:y,selectAllDisabled:k,selectAllStatus:d,searchable:a,searchPlaceholder:o,selectAll:Te,handleSelectChange:U,searchValue:E,handleSearchChange:G=>{L(G),z(e.onSearch,!0,G)},...ce},targetBindings:{data:v,filteredData:$,paginatedData:D,pagination:c.targetPagination,disabledKeys:b,selectedKeys:H,selectedKeySet:s,selectAllDisabled:X,selectAllStatus:R,searchable:g,searchPlaceholder:u,selectAll:De,handleSelectChange:I,searchValue:w,handleSearchChange:G=>{V(G),z(e.onSearch,!1,G)},...ce}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ye(e,t,l,r){const c=Be(e,t),n=h(()=>s=>{var d;return(d=c.value(s))!=null?d:s.key}),a=h(()=>e.dataSource),o=h(()=>l.value.genDataKeyMap(a.value,n.value)),[g,u]=Q(e,"value",()=>[]),[f,A]=Q(e,"sourceSearchValue",""),[v,x]=Q(e,"targetSearchValue",""),T=h(()=>new Set(g.value)),C=s=>{const d=g.value;u(s),z(e.onChange,s,d)},i=h(()=>l.value.separateDataSource(a.value,o.value,T.value,n.value)),b=h(()=>i.value.sourceData),K=h(()=>i.value.targetData),B=h(()=>l.value.genDataKeys(b.value,n.value)),$=h(()=>l.value.genDataKeys(K.value,n.value)),m=h(()=>l.value.dataFilter(a.value,f.value,(s,d)=>!e.searchFn||e.searchFn(!0,s,d))),P=h(()=>l.value.dataFilter(b.value,f.value,(s,d)=>!e.searchFn||e.searchFn(!0,s,d))),D=h(()=>l.value.dataFilter(K.value,v.value,(s,d)=>!e.searchFn||e.searchFn(!1,s,d))),E=h(()=>le(m.value,r.sourcePagination.value)),L=h(()=>le(P.value,r.sourcePagination.value)),w=h(()=>le(D.value,r.targetPagination.value)),V=(s,d)=>{let R=g.value;s.length>0&&(R=l.value.remove(s,R,n.value)),d.length>0&&(R=l.value.append(d,R,n.value)),C(R)},F=()=>{C(Array.from(H.value))},O=h(()=>l.value.genDisabledKeys(a.value,n.value)),H=h(()=>{const s=l.value.genDisabledKeys(K.value,n.value);return T.value.forEach(d=>{O.value.has(d)&&s.add(d)}),s}),y=h(()=>l.value.genDisabledKeys(b.value,n.value));return{dataSource:a,dataKeyMap:o,sourceData:b,targetData:K,sourceDataKeys:B,targetDataKeys:$,filteredDataSource:m,filteredSourceData:P,filteredTargetData:D,paginatedDataSource:E,paginatedSourceData:L,paginatedTargetData:w,targetKeys:g,targetKeySet:T,changeTargetKeys:V,clear:F,getKey:n,disabledKeys:O,disabledSourceKeys:y,disabledTargetKeys:H,sourceSearchValue:f,setSourceSearchValue:A,targetSearchValue:v,setTargetSearchValue:x}}function le(e,t){if(!t||!t.pageSize)return e;const{total:l}=t;if(l&&e.length<l)return e;const r=t.pageSize,c=(t.pageIndex-1)*r;return e.slice(c,c+r)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ze(e){const t=new Map;ke(()=>{t.clear()});const l=(r,c)=>new Set(r.map(n=>c(n)));return{genDataKeys:l,genDataKeyMap:(r,c)=>{const n=new Map;return r.forEach(a=>{n.set(c(a),a)}),n},genDisabledKeys:(r,c)=>{const n=new Set;return r.forEach(a=>{a.disabled&&n.add(c(a))}),n},getAllSelectedKeys:(r,c,n,a,o)=>{let g;return r?(g=l(c,o),a.forEach(u=>{!n.has(u)&&g.delete(u)})):(g=new Set,a.forEach(u=>{n.has(u)&&g.add(u)})),Array.from(g)},separateDataSource:(r,c,n,a)=>{const o=r.filter(u=>!n.has(a(u))),g=[];n.forEach(u=>{var A,v;const f=(v=(A=c.get(u))!=null?A:t.get(u))!=null?v:e==null?void 0:e.find(x=>a(x)===u);f&&!t.has(u)&&t.set(u,f),g.push(f!=null?f:{key:u})});for(const u of t.keys())n.has(u)||t.delete(u);return{sourceData:o,targetData:g}},dataFilter:(r,c,n)=>c?r.filter(a=>n(a,c)):r,append:(r,c)=>{const n=new Set(c);return r.forEach(a=>{n.add(a)}),Array.from(n)},remove:(r,c)=>{const n=new Set(c);return r.forEach(a=>{n.delete(a)}),Array.from(n)}}}function pe(e){var r;const t=Ze((r=e.defaultTargetData)!=null?r:[]);return h(()=>e.dataStrategy?{...t,...e.dataStrategy}:t)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function et(e,t,l){const{dataKeyMap:r,sourceData:c,targetData:n,disabledSourceKeys:a,disabledTargetKeys:o,changeTargetKeys:g,clear:u,getKey:f}=t,{sourceSelectedKeys:A,targetSelectedKeys:v}=l,x=h(()=>e.disabled||A.value.length<=0),T=h(()=>e.disabled||v.value.length<=0),C=h(()=>e.disabled||c.value.every(m=>a.value.has(f.value(m)))),i=h(()=>e.disabled||n.value.every(m=>o.value.has(f.value(m))));return{appendDisabled:x,removeDisabled:T,appendAllDisabled:C,clearDisabled:i,triggerAppend:m=>{!m&&x.value||m&&e.disabled||g([],(m!=null?m:Array.from(A.value)).filter(P=>!a.value.has(P)))},triggerRemove:m=>{!m&&T.value||m&&e.disabled||g((m!=null?m:Array.from(v.value)).filter(P=>!o.value.has(P)),[])},triggerAppendAll:()=>{C.value||g([],Array.from(r.value.keys()).filter(m=>!a.value.has(m)))},triggerClear:()=>{i.value||(u(),z(e.onClear))}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function tt(e,t,l){const[r,c]=Q(e,"sourceSelectedKeys",()=>[]),[n,a]=Q(e,"targetSelectedKeys",()=>[]),o=h(()=>new Set(r.value)),g=h(()=>new Set(n.value)),{dataKeyMap:u,dataSource:f,sourceData:A,targetData:v,sourceDataKeys:x,targetDataKeys:T,targetKeySet:C,disabledKeys:i,disabledSourceKeys:b,disabledTargetKeys:K,getKey:B}=t,$=h(()=>{const y=e.mode==="immediate"?u.value.size:x.value.size,s=e.mode==="immediate"?i.value.size:b.value.size;return y-s}),m=h(()=>T.value.size-K.value.size),P=y=>{const s=l.value.getAllSelectedKeys(!0,y?e.mode==="immediate"?f.value:A.value:v.value,new Set,new Set,B.value),d=(y?r:n).value.length,R=y?o.value:g.value;return{checked:d>0,indeterminate:(s.length!==d||s.some(k=>!R.has(k)))&&d>0}},D=h(()=>P(!0)),E=h(()=>P(!1));let L=!1;Y(o,(y,s)=>{if(e.mode==="immediate"){if(L)return;at(s,y,t)}}),Y([$,u,i,C],(y,[,,,s])=>{const d=new Set(r.value),R=new Set,k=new Set,X=I=>{d.has(I)||(d.add(I),k.add(I),R.delete(I))},U=I=>{d.has(I)&&(d.delete(I),R.add(I),k.delete(I))};r.value.forEach(I=>{if(!u.value.has(I)||i.value.has(I)){U(I);return}e.mode==="default"&&C.value.has(I)&&U(I)}),e.mode==="immediate"&&(C.value.forEach(I=>{u.value.has(I)&&X(I)}),s==null||s.forEach(I=>{C.value.has(I)||U(I)})),(k.size>0||R.size>0)&&(c(Array.from(d)),L=!0,He(()=>{L=!1}))},{immediate:!0,flush:"post"}),Y([m,T,K],()=>{const y=new Set(n.value);n.value.forEach(s=>{(!T.value.has(s)||K.value.has(s))&&y.delete(s)}),a(Array.from(y))},{immediate:!0,flush:"post"});const w=y=>{e.disabled||c(se(y)?y:Array.from(y))},V=y=>{e.disabled||a(se(y)?y:Array.from(y))},F=(y=!0,s=!0)=>{if(e.disabled)return;const d=s?e.mode==="default"?A.value:f.value:v.value,R=s?e.mode==="default"?b:i:K,k=s?o:g;(s?c:a)(l.value.getAllSelectedKeys(y,d,k.value,R.value,B.value)),z(e.onSelectAll,s,y)},O=h(()=>e.disabled||$.value<=0),H=h(()=>e.disabled||m.value<=0);return{sourceSelectedKeys:r,targetSelectedKeys:n,sourceSelectedKeySet:o,targetSelectedKeySet:g,handleSourceSelectChange:w,handleTargetSelectChange:V,sourceSelectAllStatus:D,targetSelectAllStatus:E,handleSourceSelectAll:y=>F(y,!0),handleTargetSelectAll:y=>F(y,!1),sourceSelectAllDisabled:O,targetSelectAllDisabled:H,setSourceSelectedKeys:c,setTargetSelectedKeys:a}}function at(e,t,l){const{changeTargetKeys:r}=l,c=[],n=[];for(const a of e.values())t.has(a)||n.push(a);for(const a of t.values())e.has(a)||c.push(a);r(n,c)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const nt={value:Array,sourceSelectedKeys:Array,targetSelectedKeys:Array,sourceSearchValue:String,targetSearchValue:String,clearable:{type:Boolean,default:void 0},clearIcon:String,customAdditional:{type:Function,default:void 0},dataSource:{type:Array,default:()=>[]},dataStrategy:Object,defaultTargetData:Array,disabled:{type:Boolean,default:!1},empty:{type:[String,Object],default:"simple"},getKey:[String,Function],mode:{type:String,default:"default"},pagination:{type:[Boolean,Object],default:void 0},scroll:Object,searchable:{type:[Boolean,Object],default:void 0},searchFn:Function,searchPlaceholder:[String,Array],spin:{type:[Boolean,Object],default:void 0},showSelectAll:{type:Boolean,default:void 0},virtual:{type:Boolean,default:!1},virtualItemHeight:{type:Number,default:void 0},"onUpdate:value":[Function,Array],"onUpdate:sourceSelectedKeys":[Function,Array],"onUpdate:targetSelectedKeys":[Function,Array],"onUpdate:sourceSearchValue":[Function,Array],"onUpdate:targetSearchValue":[Function,Array],onChange:[Function,Array],onSearch:[Function,Array],onSelectAll:[Function,Array],onClear:[Function,Array],onScroll:[Function,Array],onScrolledChange:[Function,Array],onScrolledBottom:[Function,Array]},ae={isSource:{type:Boolean,required:!0}},lt=ae,rt=ae,st=ae,ct={dataSource:Array,checkable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1},checked:Function,customAdditional:{type:Function,default:void 0},disabled:Function,getKey:Function,labelKey:String,scroll:Object,virtual:{type:Boolean,default:!1},virtualItemHeight:{type:Number,default:32},onCheckChange:[Function,Array],onRemove:[Function,Array],onScroll:[Function,Array],onScrolledChange:[Function,Array],onScrolledBottom:[Function,Array]},ot={checked:{type:Boolean,default:!1},checkable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},label:String,value:{type:[String,Number,Symbol],required:!0},onCheckChange:[Function,Array],onRemove:[Function,Array]},ut=M({props:ot,setup(e,{slots:t}){const{mergedPrefixCls:l}=N(Ae),r=a=>{z(e.onCheckChange,!!a)},c=()=>{z(e.onRemove)},n=h(()=>{const a=`${l.value}-item`;return J({[a]:!0,[`${a}-disabled`]:e.disabled})});return()=>{const a=`${l.value}-item`,o=[];if(e.checkable)o.push(S(ve,{class:`${a}-checkbox`,label:e.label,value:e.value,checked:e.checked,disabled:e.disabled,onChange:r},t));else{const g=Ie(t.default,e.label);o.push(S("label",{class:`${a}-label`},[g]))}return e.removable&&!e.disabled&&o.push(S("div",{class:`${a}-close-icon`,onClick:c},[S(re,{name:"close"},null)])),S("li",{class:n.value},[o])}}}),Ce=M({name:"IxTransferList",props:ct,setup(e,{slots:t,expose:l}){const r=q("common"),c=h(()=>`${r.prefixCls}-transfer-list`),n=h(()=>{var i;return(i=e.labelKey)!=null?i:"label"}),a=_();W(Ae,{mergedPrefixCls:c}),l({scrollTo:i=>{var b;return(b=a.value)==null?void 0:b.scrollTo(i)}});const g=i=>{var b,K;return(K=(b=e.getKey)==null?void 0:b.call(e,i))!=null?K:i.key},u=i=>{z(e.onScroll,i)},f=()=>{z(e.onScrolledBottom)},A=(i,b,K)=>{z(e.onScrolledChange,i,b,K)},v=({item:i,index:b})=>{var P,D;const K=g(i),B=E=>{z(e.onCheckChange,i,E)},$=()=>{z(e.onRemove,i)},m=e.customAdditional?e.customAdditional({data:i,index:b}):void 0;return S(ut,Ke({key:K,value:K,label:i[n.value],checked:!!((P=e.checked)!=null&&P.call(e,i)),disabled:!!((D=e.disabled)!=null&&D.call(e,i)),checkable:e.checkable,removable:e.removable,onCheckChange:B,onRemove:$},m),{default:t.label&&(()=>{var E;return(E=t.label)==null?void 0:E.call(t,i)})})},x=()=>{var m;const{dataSource:i,virtual:b,virtualItemHeight:K,scroll:B}=e,$=i!=null?i:[];if(!($.length<=0))return b?S(Fe,{ref:a,dataSource:$,fullHeight:!!(B!=null&&B.fullHeight),getKey:g,height:(m=B==null?void 0:B.height)!=null?m:"100%",itemHeight:K,itemRender:v,virtual:!0,onScroll:u,onScrolledBottom:f,onScrolledChange:A},null):S("ul",{class:`${c.value}-inner`},[$.map((P,D)=>v({item:P,index:D}))])},T=h(()=>{const i=c.value;return J({[i]:!0,[`${i}-virtual`]:!!e.virtual})}),C=h(()=>{const i=e.scroll;return i&&be({[i.fullHeight?"height":"maxHeight"]:Se(i.height)})});return()=>S("div",{class:T.value,style:C.value,onScroll:u},[x()])}}),it=M({props:lt,setup(e){const{props:t,slots:l,mergedPrefixCls:r,sourceTransferListRef:c,targetTransferListRef:n,getKey:a}=N(j),o=e.isSource?N(Z):N(p),{paginatedDataSource:g,paginatedData:u,selectedKeySet:f,disabledDataSourceKeys:A,disabledKeys:v,handleSelectChange:x}=o,{triggerRemove:T}=N(ee),C=e.isSource?c:n,i=D=>{z(t.onScroll,e.isSource,D)},b=()=>{z(t.onScrolledBottom,e.isSource)},K=(D,E,L)=>{z(t.onScrolledChange,e.isSource,D,E,L)},B=h(()=>e.isSource&&t.mode==="immediate"?g.value:u.value),$=h(()=>e.isSource&&t.mode==="immediate"?A.value:v.value),m=D=>{if((e.isSource&&t.mode==="immediate"?g.value:u.value).length<=0)return S("div",{class:`${D}-empty-wrapper`},[S(Re,{empty:t.empty},l)]);const L=(F,O)=>{const H=a.value(F),y=new Set(f.value);O?y.add(H):y.delete(H),x(y)},w=F=>{const O=a.value(F);T([O])},V={label:l.label&&(F=>{var O;return(O=l.label)==null?void 0:O.call(l,{item:F,isSource:e.isSource})})};return S(Ce,{ref:C,dataSource:B.value,getKey:a.value,checked:F=>f.value.has(a.value(F)),disabled:F=>t.disabled||$.value.has(a.value(F)),checkable:e.isSource||t.mode==="default",removable:!e.isSource&&t.mode==="immediate",virtual:t.virtual,virtualItemHeight:t.virtualItemHeight,scroll:t.scroll,onCheckChange:L,onRemove:w,onScroll:i,onScrolledChange:K,onScrolledBottom:b},V)},P=D=>l.default?l.default({...te(o),isSource:e.isSource}):m(D);return()=>{const D=`${r.value}-body`;return S("div",{class:`${r.value}-body`},[P(D)])}}}),dt=M({props:st,setup(e){const{slots:t,props:l,mergedPrefixCls:r}=N(j),c=e.isSource?N(Z):N(p),{pagination:n,filteredData:a,filteredDataSource:o}=c,g=u=>{var A,v;if(t.footer)return t.footer({...te(c),isSource:e.isSource});if(!n.value)return;const f=(v=(A=n.value)==null?void 0:A.total)!=null?v:e.isSource&&l.mode==="immediate"?o.value.length:a.value.length;return S("div",{class:`${u}-inner`},[S(Ge,Ke({class:`${u}-pagination`},n.value,{total:f}),null)])};return()=>{const u=`${r.value}-footer`,f=g(u);if(!(!f||se(f)&&f.length<=0))return S("div",{class:u},[f])}}}),ht=M({props:rt,setup(e){const{props:t,slots:l,config:r,locale:c,mergedPrefixCls:n}=N(j),a=e.isSource?N(Z):N(p),{clearDisabled:o,triggerClear:g}=N(ee),{showSelectAll:u,data:f,selectAllDisabled:A,selectAllStatus:v,searchable:x,searchPlaceholder:T,searchValue:C,handleSearchChange:i,selectAll:b}=a,[K,B]=$e(""),$=_(),m=()=>{var d;const s=(d=$.value)==null?void 0:d.getInputElement();s&&s.value!==C.value&&(s.value=C.value),K.value!==C.value&&B(C.value)};Me(()=>{m()}),Y(C,()=>{m()});const P=()=>{i(K.value)},D=s=>{const d=s.target.value;B(d),d||P()},E=_e(()=>{P()},["enter"]),L=s=>{b(!!s)},w=s=>{if(!(!u.value||!e.isSource&&t.mode==="immediate"))return S(ve,{class:`${s}-check-all`,checked:v.value.checked,indeterminate:v.value.indeterminate,disabled:A.value,onChange:L},null)},V=s=>{let d;return l.headerLabel?d=l.headerLabel({data:f.value,isSource:e.isSource}):d=`${e.isSource?c.toSelect:c.selected} (${f.value.length})`,S("span",{class:`${s}-label`},[d])},F=s=>{if(!x.value)return;const d={suffix:()=>S(re,{class:`${s}-search-icon`,name:"search",onClick:P},null)};return S(we,{ref:$,class:`${s}-search-input`,disabled:t.disabled,type:"text",size:"sm",placeholder:T.value,onInput:D,onKeydown:E},d)},O=s=>{var R,k;if(e.isSource||!((R=t.clearable)!=null?R:r.clearable))return;const d=J({[`${s}-clear-icon`]:!0,[`${s}-clear-icon-disabled`]:o.value});return S("span",{class:d,onClick:g},[l.clearIcon?l.clearIcon():S(re,{name:(k=t.clearIcon)!=null?k:r.clearIcon},null)])},H=s=>{var R;const d=(R=l.headerSuffix)==null?void 0:R.call(l,{isSource:e.isSource});if(!ue(d))return S("span",{class:`${s}-suffix`},[d])},y=s=>l.header?l.header({...te(a),isSource:e.isSource}):S("div",{class:`${s}-inner`},[w(s),V(s),F(s),O(s),H(s)]);return()=>{const s=`${n.value}-header`,d=y(s);if(!ue(d))return S("div",{class:s},[d])}}}),ge=M({props:ae,setup(e){const{props:t,mergedPrefixCls:l}=N(j),r=h(()=>{const a=`${l.value}-content`;return J({[a]:!0,[`${a}-${e.isSource?"source":"target"}`]:!0,[`${a}-disabled`]:t.disabled})}),c=h(()=>{var g;const a=(g=t.scroll)==null?void 0:g.width;let o;if(je(a)?o=e.isSource?a.source:a.target:o=a,!!o)return be({width:Se(o)})}),n=h(()=>{if(!Ue(t.spin))return ye(t.spin)?{spinning:!!t.spin}:{spinning:e.isSource?t.spin.source:t.spin.target}});return()=>{const a=[S(ht,{isSource:e.isSource},null),S(it,{isSource:e.isSource},null),S(dt,{isSource:e.isSource},null)];return S("div",{class:r.value,style:c.value},[n.value?S(Ee,n.value,{default:()=>[a]}):a])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function fe(e){const{heightLg:t,heightMd:l,marginSizeMd:r,marginSizeSm:c,paddingSizeSm:n,paddingSizeMd:a}=e;return{height:290,contentWidth:260,headerHeight:t,suffixMarginLeft:r,footerHeight:t,contentPadding:`0 ${n}px 0 ${a}px`,oprMinWidth:4,oprPadding:n,oprButtonWidth:24,oprButtonHeight:32,oprButtonGap:c,searchWidth:110,listItemMinHeight:l,closeIconPadding:`0 ${a}px`}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const gt=(e,t)=>fe(e),ft=M({name:"IxTransfer",props:nt,setup(e,{slots:t,expose:l}){const r=q("common"),c=q("transfer"),n=q("locale").transfer,{globalHashId:a,hashId:o,registerToken:g}=Le("transfer");g(gt);const u=h(()=>`${r.prefixCls}-transfer`),f=h(()=>{var w;return(w=e.showSelectAll)!=null?w:c.showSelectAll}),{source:A,target:v}=Je(e,c),{source:x,target:T}=Qe(e,n),C=pe(e),i=qe(e),b=Ye(e,c,C,i),K=tt(e,b,C),B=et(e,b,K),{sourceBindings:$,targetBindings:m}=Xe(e,b,B,K,i,f,A,x,v,T),P=_(),D=_();l({scrollTo:(w,...V)=>{var F;return(F=(w?P:D).value)==null?void 0:F.scrollTo(...V)}}),W(j,{props:e,slots:t,locale:n,config:c,mergedPrefixCls:u,sourceTransferListRef:P,targetTransferListRef:D,showSelectAll:f,getKey:b.getKey}),W(Z,$),W(p,m),W(ee,B);const L=h(()=>{var V;const w=u.value;return J({[a.value]:!!a.value,[o.value]:!!o.value,[w]:!0,[`${w}-fit-content`]:!!((V=e.scroll)!=null&&V.height)})});return()=>S("div",{class:L.value},[S(ge,{isSource:!0},null),S(We,null,null),S(ge,{isSource:!1},null)])}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const yt=ft,bt=Ce;export{yt as I,Z as T,p as a,bt as b};
