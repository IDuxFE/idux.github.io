import{R as Q,am as N,m as B,A as T,ac as F,an as _,L as k}from"./index-c3e0f9d9.js";import{c as g,ay as D,w as E,x as S,l as w,z as i,d as R,ag as K,q,A as U,a3 as V}from"./vendor-2973971e.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function G(e,n){return g(()=>{const t=e.value,s=n.value;let o;s<=9?o=z(1,s):o=O(t,s);const l={type:"prev",disabled:t===1},c={type:"next",disabled:t===s};return[l,...o,c]})}const z=(e,n)=>{const t=[];for(let s=e;s<=n;s++)t.push({index:s,type:"page"});return t},O=(e,n)=>{let t=[];const s={type:"prev5"},o={type:"next5"};e<5?t=[...z(2,5),o]:e<n-3?t=[s,...z(e-2,e+2),o]:t=[s,...z(n-4,n-1)];const l=z(1,1),c=z(n,n);return[...l,...t,...c]};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function H(e,n,t){return D(o=>{const l=o.target,c=Math.floor(Q(l.value,e.value));n(c),t.value||(l.value="")},["enter"])}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function L(e,n){var d;const[t,s]=N(e,"pageIndex",1),[o,l]=N(e,"pageSize",(d=e.pageSize)!=null?d:n.pageSize),c=g(()=>Math.max(Math.ceil(e.total/o.value),1)),v=p=>{const m=W(p,c.value);m!==t.value&&(s(m),B(e.onChange,m,o.value))},r=p=>{l(p),B(e.onChange,t.value,p)};return E([t,c],([p,m])=>{p>m&&v(m)},{immediate:!0}),{activeIndex:t,activeSize:o,lastIndex:c,changePageIndex:v,changePageSize:r}}const W=(e,n)=>e>n?n:e<1?1:e;/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const b=Symbol("paginationToken");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const X={pageIndex:Number,pageSize:Number,disabled:{type:Boolean,default:!1},pageSizes:Array,showQuickJumper:{type:Boolean,default:void 0},showSizeChanger:{type:Boolean,default:void 0},showTitle:{type:Boolean,default:void 0},showTotal:{type:Boolean,default:void 0},simple:{type:Boolean,default:void 0},size:String,total:{type:Number,default:0},"onUpdate:pageIndex":[Function,Array],"onUpdate:pageSize":[Function,Array],onChange:[Function,Array]},Y={disabled:{type:Boolean,default:void 0},index:Number,type:{type:String,required:!0}},J={prev:"left",next:"right",prev5:"double-left",next5:"double-right",page:""},Z={next:1,prev:-1,prev5:-5,next5:5},A=S({props:Y,setup(e){const{props:n,slots:t,config:s,locale:o,mergedPrefixCls:l,activeIndex:c,changePageIndex:v}=w(b),r=g(()=>c.value===e.index),d=g(()=>e.disabled||n.disabled),p=g(()=>{var u;return(u=n.showTitle)!=null?u:s.showTitle}),m=g(()=>{const u=`${l.value}-item`;return{[u]:!0,[`${u}-${e.type}`]:!0,[`${u}-active`]:r.value,[`${u}-disabled`]:d.value}}),$=g(()=>{if(!p.value)return;const{type:u,index:h}=e;return u==="page"?h:o.pagination[u]}),I=()=>{if(d.value)return;const{type:u,index:h}=e;let f;u==="page"?f=h:f=c.value+Z[u],v(f)},C=u=>{d.value||u.code!=="Enter"||I()};return()=>{const u=`${l.value}-item`,{index:h,type:f}=e,P=d.value;let a;e.type==="prev5"||f==="next5"?a=i("span",{class:` ${u}-jumper`},[i(T,{name:J[f]},null),i(T,{class:`${u}-ellipsis`,name:"ellipsis"},null)]):R(h)?a=i(T,{name:J[f]},null):a=K(h);const x=t.item?t.item({index:h,type:f,active:r.value,disabled:P,original:a}):a;return i("li",{class:m.value,tabindex:P?-1:0,title:$.value,onClick:I,onKeydown:C},[i("span",{class:`${u}-content`},[x])])}}}),ee=S({setup(){const{props:e,locale:n,mergedPrefixCls:t,mergedSize:s,jumpToIndex:o}=w(b);return()=>{const l=`${t.value}-jumper`,{disabled:c}=e,{jumpTo:v,page:r}=n.pagination;return i("li",{class:l},[v,i(F,{disabled:c,size:s.value==="lg"?"md":"sm",onKeydown:o},null),r])}}}),M=S({setup(){const{props:e,config:n,locale:t,mergedPrefixCls:s,mergedSize:o,activeSize:l,changePageSize:c}=w(b),v=g(()=>{const{pageSizes:r=n.pageSizes}=e;return r.map(d=>({key:d,label:d}))});return()=>{const r=`${s.value}-sizes`,{itemsPerPage:d,itemsSuffix:p}=t.pagination;return i("li",{class:r},[d,i(_,{disabled:e.disabled,dataSource:v.value,size:o.value==="lg"?"md":"sm",value:l.value,onChange:c},null),p])}}}),te=S({setup(){const{props:e,slots:n,locale:t,activeIndex:s,activeSize:o,mergedPrefixCls:l}=w(b),c=g(()=>{const v=s.value,r=o.value,d=(v-1)*r+1,p=Math.min(v*r,e.total);return[d,p]});return()=>{const v=`${l.value}-total`,{total:r}=e,{totalPrefix:d,totalSuffix:p}=t.pagination,m=n.total?n.total({total:r,range:c.value,prefix:d,suffix:p}):`${d} ${r} ${p}`;return i("li",{class:v},[m])}}}),ne=S({name:"IxPagination",props:X,setup(e,{slots:n}){const t=k("common"),s=g(()=>`${t.prefixCls}-pagination`),o=k("locale"),l=k("pagination"),c=g(()=>{var a;return(a=e.showTotal)!=null?a:l.showTotal}),v=g(()=>{var a;return(a=e.simple)!=null?a:l.simple}),r=g(()=>{var a;return(a=e.size)!=null?a:l.size}),d=g(()=>{var a;return(a=e.showQuickJumper)!=null?a:l.showQuickJumper}),p=g(()=>{var a;return(a=e.showSizeChanger)!=null?a:l.showSizeChanger}),{activeIndex:m,activeSize:$,lastIndex:I,changePageIndex:C,changePageSize:u}=L(e,l),h=G(m,I),f=H(m,C,v);q(b,{props:e,slots:n,config:l,locale:o,mergedPrefixCls:s,mergedSize:r,activeIndex:m,activeSize:$,lastIndex:I,changePageIndex:C,changePageSize:u,jumpToIndex:f});const P=g(()=>{const a=s.value;return U({[a]:!0,[`${a}-disabled`]:e.disabled,[`${a}-simple`]:v.value,[`${a}-${r.value}`]:!0})});return()=>{const a=s.value,x=c.value?[i(te,null,null)]:[];if(v.value){const y=m.value,j=I.value;x.push(i(A,{disabled:y===1,type:"prev"},null)),x.push(i("li",{class:`${a}-item`},[d.value?i(F,{disabled:e.disabled,size:r.value==="lg"?"md":"sm",value:y.toString(),onKeydown:f},null):y,i("span",{class:`${a}-item-slash`},[K("/")]),i("span",null,[j])])),x.push(i(A,{disabled:y===j,type:"next"},null)),p.value&&x.push(i(M,null,null))}else h.value.forEach(y=>x.push(i(A,V({key:y.type+"-"+y.index},y),null))),p.value&&x.push(i(M,null,null)),d.value&&x.push(i(ee,null,null));return i("ul",{class:P.value},[x])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const le=ne;export{le as I};
