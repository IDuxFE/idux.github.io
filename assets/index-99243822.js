import{K as w,al as ke,r as Oe,a9 as Ae,ad as Ee,ae as Fe,m as $,N as H,ac as X,aB as Y,L as M,a7 as Z,at as ee}from"./index-f61938a0.js";import{n as we,c as Re,Éµ as ne,a as te,b as Be,u as ae}from"./index-a172b8b8.js";import{f as P,l as Te,w as z,x as L,P as _,t as $e,v as U,i as K,b as oe,bk as le,y as C,a3 as B,a2 as re,z as ue,p as se}from"./vendor-2234ada1.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function D(e,n,t){if(n)return e.convert(n,t)}function De(e){return e.sort((n,t)=>n?t?n.valueOf()-t.valueOf():0:1)}function Me(e){return/[hH]/.test(e)}function ze(e){return/m/.test(e)}function Ue(e){return/s/.test(e)}function ce(e){return/[aA]/.test(e)}function He(e){return/A/.test(e)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function j(e,n,t,a){const[o,r]=w(void 0),[p,u]=w(!1),[i,l]=w(void 0),{parse:f,format:g}=e,h=P(()=>D(e,a.value,n.value)),x=P(()=>Te(a.value)?a.value:h.value?g(h.value,n.value):"");function v(I=!1){var S;(I||!o.value||f(o.value,n.value).valueOf()!==((S=h.value)==null?void 0:S.valueOf()))&&r(x.value),l(h.value)}z([a,n],()=>v(),{immediate:!0});function d(I,S){return I?e.parse(I,S):void 0}function m(I){return!I||e.isValid(I)}function c(I){const S=I.target.value;r(S);const F=d(S,n.value);m(F)&&t(o.value?F:void 0)}function s(){r("")}function y(){u(!0)}function V(){u(!1)}function k(I){t(I)}return{inputValue:o,panelValue:i,inputFocused:p,setInputValue:r,setPanelValue:l,init:v,handleInput:c,handleInputClear:s,handleInputFocus:y,handleInputBlur:V,handlePanelChange:k}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ie(e,n){return P(()=>{var a;const t=(a=e.allowInput)!=null?a:n.allowInput;return{enableExternalInput:t===!0,enableInternalInput:t==="overlay"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ke(e){return n=>{(n.code==="Escape"||n.code==="Enter")&&e(!1)}}function Ne(e,n,t){const{bufferUpdated:a,buffer:o}=e;return r=>{switch(r.code){case"Escape":n(!1);break;case"Enter":a.value&&t(o.value),n(!1);break}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const _e=[0,4];function de(e){const{props:n,common:t,config:a,accessor:o,mergedPrefixCls:r,overlayOpened:p,setOverlayOpened:u}=e;return P(()=>{var i;return{clickOutside:!0,container:(i=n.overlayContainer)!=null?i:a.overlayContainer,containerFallback:`.${r.value}-overlay-container`,disabled:o.disabled||n.readonly,offset:_e,placement:"bottomStart",transitionName:`${t.prefixCls}-slide-auto`,trigger:"manual",visible:p.value,"onUpdate:visible":u}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function pe(e,n){const[t,a]=ke(e,"open",!1),o=r=>{a(r),r||n.init(!0)};return L(()=>{e.autofocus&&a(!0)}),{overlayOpened:t,setOverlayOpened:o}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function fe(e,n,t,a){const{accessor:o,control:r}=Oe();Ae(r);const p=Ee(e,n),u=Fe(e,r),[i,l]=w(!1),f=d=>{const{get:m}=t,c=ce(a.value);return H(d).some(s=>{const y=m(s,"hour"),V=we(y,c),k=Re(y,!!c),I=m(s,"minute"),S=m(s,"second");return e.disabledHours(V).includes(k)||e.disabledMinutes(k,V).includes(I)||e.disabledSeconds(k,I,V).includes(S)})};function g(d){const m=_(d)?De(d):d;if(f(m))return;let c=$e(o.value);c=_(c)?c.map(s=>D(t,s,a.value)):D(t,c,a.value),o.setValue(m),$(e.onChange,m,c)}function h(d){g(void 0),$(e.onClear,d)}function x(d){l(!0),$(e.onFocus,d)}function v(d){l(!1),o.markAsBlurred(),$(e.onBlur,d)}return{accessor:o,mergedSize:p,mergedStatus:u,isFocused:i,handleChange:g,handleClear:h,handleFocus:x,handleBlur:v}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ve(e){return P(()=>{var o,r;const{props:n,config:t,accessor:a}=e;return{borderless:!1,clearable:(o=n.clearable)!=null?o:t.clearable,clearIcon:(r=n.clearIcon)!=null?r:t.clearIcon,disabled:a.disabled,size:"sm"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function je(e,n,t,a){const o=P(()=>D(n,e.defaultOpenValue,t.value)),[r,p]=w(()=>{var u;return(u=a.value)!=null?u:o.value});return z(a,u=>{p(u!=null?u:o.value)}),{activeValue:r,setActiveValue:p}}function Le(e,n,t,a){const o=P(()=>H(e.defaultOpenValue).map(l=>D(n,l,t.value))),[r,p]=w(()=>{var l,f;return(f=(l=a.value)==null?void 0:l[0])!=null?f:o.value[0]}),[u,i]=w(()=>{var l,f;return(f=(l=a.value)==null?void 0:l[1])!=null?f:o.value[1]});return z(a,l=>{var f,g;p((f=l==null?void 0:l[0])!=null?f:o.value[0]),i((g=l==null?void 0:l[1])!=null?g:o.value[1])}),{fromActiveValue:r,toActiveValue:u,setFromActiveValue:p,setToActiveValue:i}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function me(e,n){return P(()=>{const{disabledHours:t,disabledMinutes:a,disabledSeconds:o,hideDisabledOptions:r,hourStep:p,minuteStep:u,secondStep:i}=e,l=n.value;return{disabledHours:t,disabledMinutes:a,disabledSeconds:o,hideDisabledOptions:r,hourStep:p,minuteStep:u,secondStep:i,hourEnabled:Me(l),minuteEnabled:ze(l),secondEnabled:Ue(l),use12Hours:ce(l),amPmCapital:He(l)}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const G=Symbol("timePickerContext"),q=Symbol("timeRangePickerContext"),Ge=U({setup(){const e=K(G),{slots:n,props:t,locale:a,formatRef:o,dateConfig:r,inputRef:p,inputEnableStatus:u,mergedPrefixCls:i,overlayOpened:l,handleClear:f,handleKeyDown:g,controlContext:{inputValue:h,panelValue:x,inputFocused:v,handleInput:d,handleInputFocus:m,handleInputBlur:c,handlePanelChange:s}}=e,y=oe(),V=()=>{var O;u.value.enableInternalInput&&(p.value=(O=y.value)==null?void 0:O.getInputElement())};L(V),le(V);const k=ve(e),I=me(t,o),{activeValue:S,setActiveValue:F}=je(t,r,o,x),R=O=>{O.target instanceof HTMLInputElement||O.preventDefault()};return()=>{var T;const O=`${i.value}-overlay`,A=`${i.value}-board`,b={...I.value,activeValue:S.value,visible:l.value,value:x.value,onChange:s,"onUpdate:activeValue":F},E=[C("div",{class:`${O}-body ${A}`,tabindex:-1,onMousedown:R},[u.value.enableInternalInput&&C(X,B({ref:y,class:`${A}-input`},k.value,{clearVisible:!!h.value,value:h.value,readonly:t.readonly,focused:v.value,placeholder:(T=t.placeholder)!=null?T:a.timePicker.placeholder,onInput:d,onClear:f,onFocus:m,onBlur:c,onKeydown:g}),n),C(ne,B(b,{class:`${A}-panel`,tabindex:-1}),null)]),C(Y,{class:`${O}-footer`,footer:t.footer},n)];return t.overlayRender?t.overlayRender(E):C("div",{onMousedown:R},[E])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function he(e){const{props:n,config:t,accessor:a,mergedSize:o,mergedStatus:r,isFocused:p,handleBlur:u,handleFocus:i,handleClear:l,handleKeyDown:f,overlayOpened:g,setOverlayOpened:h,inputEnableStatus:x}=e,v=()=>{const d=g.value;d||a.disabled||h(!d)};return P(()=>{var d,m,c;return{borderless:n.borderless,clearable:!n.readonly&&!a.disabled&&((d=n.clearable)!=null?d:t.clearable)&&(_(a.value)?!!a.value.length:!!a.value),clearIcon:(m=n.clearIcon)!=null?m:t.clearIcon,disabled:a.disabled,focused:p.value,readonly:n.readonly||!x.value.enableExternalInput,size:o.value,status:r.value,suffix:(c=n.suffix)!=null?c:t.suffix,onClick:v,onClear:l,onFocus:i,onBlur:u,onKeyDown:f}})}const qe=U({inheritAttrs:!1,setup(e,{attrs:n}){const t=K(G),{props:a,slots:o,locale:r,mergedPrefixCls:p,formatRef:u,inputRef:i,inputEnableStatus:l,controlContext:{inputValue:f,handleInput:g}}=t,h=P(()=>{var c;return(c=a.placeholder)!=null?c:r.timePicker.placeholder}),x=P(()=>Math.max(10,u.value.length)+2),v=c=>{g(c),$(a.onInput,c)},d=he(t),m=c=>{const{readonly:s,disabled:y}=d.value;return C("input",{ref:l.value.enableExternalInput?i:void 0,class:`${c}-input`,autocomplete:"off",disabled:y,placeholder:h.value,readonly:s,size:x.value,value:f.value,onInput:v},null)};return()=>{const c=p.value,s={default:()=>m(c),suffix:o.suffix,clearIcon:o.clearIcon};return C(te,B({className:c},d.value,n),s)}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const ge={...Be,open:{type:Boolean,default:void 0},control:{type:[String,Number,Object,Array],default:void 0},allowInput:{type:[Boolean,String],default:void 0},autofocus:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},clearIcon:String,clearText:String,disabled:{type:Boolean,default:!1},format:String,overlayClassName:String,overlayContainer:{type:[String,HTMLElement,Function],default:void 0},overlayRender:Function,readonly:{type:Boolean,default:!1},size:String,status:String,suffix:String,"onUpdate:open":[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array]},Je={...ge,value:[String,Date,Number],defaultOpenValue:[String,Date,Number],footer:{type:[Boolean,Array,Object],default:!1},placeholder:String,"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},Qe={...ge,value:Array,defaultOpenValue:Array,footer:{type:[Boolean,Array,Object],default:!0},placeholder:Array,separator:[String,Object],"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},We=U({name:"IxTimePicker",inheritAttrs:!1,props:Je,setup(e,{attrs:n,expose:t,slots:a}){const o=M("common"),r=P(()=>`${o.prefixCls}-time-picker`),p=M("locale"),u=M("timePicker"),i=ae(),{elementRef:l,focus:f,blur:g}=Z(),h=P(()=>{var O;return(O=e.format)!=null?O:u.format}),x=fe(e,u,i,h),{accessor:v,handleChange:d}=x,m=j(i,h,d,re(v,"value")),{overlayOpened:c,setOverlayOpened:s}=pe(e,m),y=ie(e,u),V=Ke(s),k={props:e,slots:a,dateConfig:i,common:o,locale:p,config:u,mergedPrefixCls:r,formatRef:h,handleKeyDown:V,inputRef:l,inputEnableStatus:y,overlayOpened:c,setOverlayOpened:s,controlContext:m,...x};se(G,k),t({focus:f,blur:g}),z(c,O=>{setTimeout(()=>{var A,b;O?(f(),(A=l.value)==null||A.dispatchEvent(new FocusEvent("focus"))):(g(),(b=l.value)==null||b.dispatchEvent(new FocusEvent("blur")))})});const I=()=>C(qe,n,null),S=()=>C(Ge,null,null),F=de(k),R=P(()=>ue([`${r.value}-overlay`,e.overlayClassName]));return()=>C(ee,B(F.value,{class:R.value,triggerId:n.id}),{default:I,content:S})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Xe(e,n,t){const[a,o]=w(H(t.value).map(v=>D(e,v,n.value))),[r,p]=w(!1),u=v=>{o(Ye(e,v,n.value)),p(!0)};z([t,n],([v])=>{u(v)});const i=P(()=>H(a.value)),l=P(()=>i.value[0]),f=P(()=>i.value[1]),g=j(e,n,v=>{u([v,f.value])},l),h=j(e,n,v=>{u([l.value,v])},f);return{buffer:a,bufferUpdated:r,fromControl:g,toControl:h,init:(v=!1)=>{u(t.value),p(!1),g.init(v),h.init(v)}}}function Ye(e,n,t){return H(n).map(a=>D(e,a,t))}const Ze=U({setup(){const e=K(q),{props:n,slots:t,dateConfig:a,locale:o,mergedPrefixCls:r,formatRef:p,inputRef:u,inputEnableStatus:i,overlayOpened:l,handleChange:f,handleKeyDown:g,renderSeparator:h,setOverlayOpened:x,rangeControlContext:{buffer:v,fromControl:d,toControl:m}}=e,c=oe(),s=()=>{var b;i.value.enableInternalInput&&(u.value=(b=c.value)==null?void 0:b.getInputElement())};L(s),le(s);const y=ve(e),V=me(n,p),{fromActiveValue:k,toActiveValue:I,setFromActiveValue:S,setToActiveValue:F}=Le(n,a,p,P(()=>[d.panelValue.value,m.panelValue.value])),R=()=>{f(v.value),x(!1)},O=b=>{b.target instanceof HTMLInputElement||b.preventDefault()};function A(b){var Q,W;const{inputValue:E,inputFocused:T,panelValue:be,handleInput:ye,handleInputClear:Ie,handleInputFocus:Ce,handleInputBlur:Pe,handlePanelChange:xe}=b?d:m,J=b?0:1,Ve=(W=(Q=n.placeholder)==null?void 0:Q[J])!=null?W:o.timeRangePicker.placeholder[J],N=`${r.value}-board`,Se={...V.value,activeValue:b?k.value:I.value,visible:l.value,value:be.value,onChange:xe,"onUpdate:activeValue":b?S:F};return C("div",{class:N},[i.value.enableInternalInput&&C(X,B({ref:b?c:void 0,class:`${N}-input`},y.value,{clearVisible:!!E.value,value:E.value,readonly:n.readonly,focused:T.value,placeholder:Ve,onInput:ye,onClear:Ie,onFocus:Ce,onBlur:Pe,onKeydown:g}),t),C(ne,B(Se,{class:`${N}-panel`,tabindex:-1}),null)])}return()=>{const b=`${r.value}-overlay`,E={[`${b}-separator`]:!0,[`${b}-separator-line`]:!i.value.enableInternalInput},T=[C("div",{class:`${b}-body`,onMousedown:O},[A(!0),C("div",{class:E},[i.value.enableInternalInput&&h()]),A(!1)]),C(Y,{class:`${b}-footer`,footer:n.footer,okText:o.timeRangePicker.okText,okButton:{size:"xs",mode:"primary"},cancelVisible:!1,ok:R},t)];return n.overlayRender?n.overlayRender(T):C("div",{onMousedown:O},[T])}}}),en=U({inheritAttrs:!1,setup(e,{attrs:n}){const t=K(q),{props:a,slots:o,locale:r,mergedPrefixCls:p,inputRef:u,inputEnableStatus:i,renderSeparator:l,rangeControlContext:{fromControl:f,toControl:g}}=t,h=P(()=>{var s,y,V,k;return[(y=(s=a.placeholder)==null?void 0:s[0])!=null?y:r.timeRangePicker.placeholder[0],(k=(V=a.placeholder)==null?void 0:V[1])!=null?k:r.timeRangePicker.placeholder[1]]}),x=s=>{f.handleInput(s),$(a.onInput,!0,s)},v=s=>{g.handleInput(s),$(a.onInput,!1,s)};function d(s,y){const{inputValue:V}=y?f:g,{disabled:k,readonly:I}=m.value,S=h.value[y?0:1],F=y?x:v;return C("input",{ref:y&&i.value.enableExternalInput?u:void 0,class:`${s}-input-inner`,autocomplete:"off",disabled:k,value:V.value,placeholder:S,readonly:I,onInput:F},null)}const m=he(t),c=s=>C("span",{class:`${s}-input`},[d(s,!0),C("span",{class:`${s}-input-separator`},[l()]),d(s,!1)]);return()=>{const s=p.value,y={default:()=>c(s),suffix:o.suffix,clearIcon:o.clearIcon};return C(te,B({className:s},m.value,n),y)}}}),nn=U({name:"IxTimeRangePicker",inheritAttrs:!1,props:Qe,setup(e,{attrs:n,expose:t,slots:a}){const o=M("common"),r=P(()=>`${o.prefixCls}-time-range-picker`),p=M("locale"),u=M("timePicker"),i=ae(),{elementRef:l,focus:f,blur:g}=Z(),h=P(()=>{var A;return(A=e.format)!=null?A:u.format}),x=fe(e,u,i,h),{accessor:v,handleChange:d}=x,m=Xe(i,h,re(v,"value")),{overlayOpened:c,setOverlayOpened:s}=pe(e,m),y=ie(e,u),V=Ne(m,s,d),I={props:e,slots:a,dateConfig:i,common:o,locale:p,config:u,mergedPrefixCls:r,formatRef:h,handleKeyDown:V,inputRef:l,inputEnableStatus:y,overlayOpened:c,setOverlayOpened:s,renderSeparator:()=>{var A,b,E;return(E=(b=(A=a.separator)==null?void 0:A.call(a))!=null?b:e.separator)!=null?E:p.timeRangePicker.separator},rangeControlContext:m,...x};se(q,I),t({focus:f,blur:g}),z(c,A=>{setTimeout(()=>{var b,E;A?(f(),(b=l.value)==null||b.dispatchEvent(new FocusEvent("focus"))):(g(),(E=l.value)==null||E.dispatchEvent(new FocusEvent("blur")))})});const S=()=>C(en,n,null),F=()=>C(Ze,null,null),R=de(I),O=P(()=>ue([`${r.value}-overlay`,e.overlayClassName]));return()=>C(ee,B(R.value,{class:O.value,triggerId:n.id}),{default:S,content:F})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const ln=We,rn=nn;export{ln as I,rn as a};
