import{c as oe,M as q,P as le,m as M,aw as Ie,ao as Q,j as ve,Q as Fe,A as re,aL as Se,H as Be,av as Re,K as we,aT as ue,ad as $e,aG as Ee,N as Le}from"./index-15e00ad6.js";import{u as Oe,l as H,y as N,q as m,f as me,U as Me,aC as Ne,r as _,c as h,N as ze,au as ye,M as Ve,w as Y,S as ke,a0 as se,p as J,D as W,P as be,ad as Ke,m as He,aD as _e,b as je,d as Ue}from"./vendor-f86ff22e.js";import{I as Ge}from"./index-07e52dbd.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const j=Symbol("transferContext"),Ae=Symbol("transferListContext"),Z=Symbol("TRANSFER_SOURCE_TOKEN"),p=Symbol("TRANSFER_TARGET_TOKEN"),ee=Symbol("TRANSFER_OPERATIONS_TOKEN");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function te(e){const t={};return Object.keys(e).forEach(n=>{t[n]=Oe(e[n])}),t}const We=H({setup(){const{slots:e,props:t,mergedPrefixCls:n}=N(j),r=N(ee),{appendDisabled:c,removeDisabled:l,triggerAppend:a,triggerRemove:o}=r,g=()=>{a()},u=()=>{o()},f=(v,x,T,C)=>me(x)?m(oe,{class:`${v}-btn`,icon:x,disabled:T,onClick:C},null):Me(m(oe,{class:`${v}-btn`,disabled:T,onClick:C},null),[[Ne("slos"),{icon:()=>x}]]),A=v=>{if(e.operations)return e.operations(te(r));if(t.mode!=="immediate")return m("div",{class:`${v}-inner`},[f(v,"double-right",c.value,g),f(v,"double-left",l.value,u)])};return()=>{const v=`${n.value}-operations`;return m("div",{class:v},[A(v)])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function qe(e){const t=q("pagination");return{sourcePagination:ie(e,t,!0),targetPagination:ie(e,t,!1)}}function ie(e,t,n){const r=_(),c=_(),l=h(()=>{const o=e.pagination;if(!o)return null;if(o===!0)return{};const g=n?0:1,u=le(o.pageIndex),f=le(o.pageSize),A=le(o.total);return{pageIndex:u==null?void 0:u[g],pageSize:f==null?void 0:f[g],disabled:e.disabled||o.disabled,total:A==null?void 0:A[g],onChange:(v,x)=>{var T;return(T=o.onChange)==null?void 0:T.call(o,n,v,x)}}});ze(()=>{var g,u;const o=l.value;r.value=(g=o==null?void 0:o.pageIndex)!=null?g:1,c.value=(u=o==null?void 0:o.pageSize)!=null?u:t.pageSize});const a=o=>{r.value=o};return h(()=>{const o=l.value;if(o!==null)return{simple:!0,showTotal:!1,showQuickJumper:!0,...o,pageIndex:r.value,pageSize:c.value,"onUpdate:pageIndex":a}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Qe(e,t){return{source:h(()=>de(e,t,!0)),target:h(()=>de(e,t,!1))}}function de(e,t,n){var l;const r=t.searchPlaceholder[n?0:1],c=me(e.searchPlaceholder)?e.searchPlaceholder:(l=e.searchPlaceholder)==null?void 0:l[n?0:1];return c!=null?c:r}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Je(e,t){return{source:h(()=>he(e,t,!0)),target:h(()=>he(e,t,!1))}}function he(e,t,n){var c;const r=(c=e.searchable)!=null?c:t.searchable;return!r||ye(r)?!!r:n?r.source:r.target}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Xe(e,t,n,r,c,l,a,o,g,u){const{dataSource:f,sourceData:A,targetData:v,targetKeySet:x,dataKeyMap:T,disabledKeys:C,disabledSourceKeys:i,disabledTargetKeys:b,filteredDataSource:K,filteredSourceData:w,filteredTargetData:I,paginatedDataSource:S,paginatedSourceData:D,paginatedTargetData:P,sourceSearchValue:$,setSourceSearchValue:L,targetSearchValue:E,setTargetSearchValue:z,getKey:B}=t,{sourceSelectedKeys:O,targetSelectedKeys:k,sourceSelectedKeySet:y,targetSelectedKeySet:s,sourceSelectAllStatus:d,targetSelectAllStatus:R,sourceSelectAllDisabled:V,targetSelectAllDisabled:X,handleSourceSelectChange:U,handleTargetSelectChange:F,handleSourceSelectAll:Te,handleTargetSelectAll:De}=r,{triggerAppend:Pe,triggerRemove:xe}=n,ce={dataSource:f,dataKeyMap:T,disabledDataSourceKeys:C,filteredDataSource:K,paginatedDataSource:S,targetKeySet:x,showSelectAll:l,triggerAppend:Pe,triggerRemove:xe,getKey:B};return{sourceBindings:{data:A,filteredData:w,paginatedData:D,pagination:c.sourcePagination,disabledKeys:i,selectedKeys:O,selectedKeySet:y,selectAllDisabled:V,selectAllStatus:d,searchable:a,searchPlaceholder:o,selectAll:Te,handleSelectChange:U,searchValue:$,handleSearchChange:G=>{L(G),M(e.onSearch,!0,G)},...ce},targetBindings:{data:v,filteredData:I,paginatedData:P,pagination:c.targetPagination,disabledKeys:b,selectedKeys:k,selectedKeySet:s,selectAllDisabled:X,selectAllStatus:R,searchable:g,searchPlaceholder:u,selectAll:De,handleSelectChange:F,searchValue:E,handleSearchChange:G=>{z(G),M(e.onSearch,!1,G)},...ce}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ye(e,t,n,r){const c=Ie(e,t),l=h(()=>s=>{var d;return(d=c.value(s))!=null?d:s.key}),a=h(()=>e.dataSource),o=h(()=>n.value.genDataKeyMap(a.value,l.value)),[g,u]=Q(e,"value",()=>[]),[f,A]=Q(e,"sourceSearchValue",""),[v,x]=Q(e,"targetSearchValue",""),T=h(()=>new Set(g.value)),C=s=>{const d=g.value;u(s),M(e.onChange,s,d)},i=h(()=>n.value.separateDataSource(a.value,o.value,T.value,l.value)),b=h(()=>i.value.sourceData),K=h(()=>i.value.targetData),w=h(()=>n.value.genDataKeys(b.value,l.value)),I=h(()=>n.value.genDataKeys(K.value,l.value)),S=h(()=>n.value.dataFilter(a.value,f.value,(s,d)=>!e.searchFn||e.searchFn(!0,s,d))),D=h(()=>n.value.dataFilter(b.value,f.value,(s,d)=>!e.searchFn||e.searchFn(!0,s,d))),P=h(()=>n.value.dataFilter(K.value,v.value,(s,d)=>!e.searchFn||e.searchFn(!1,s,d))),$=h(()=>ne(S.value,r.sourcePagination.value)),L=h(()=>ne(D.value,r.sourcePagination.value)),E=h(()=>ne(P.value,r.targetPagination.value)),z=(s,d)=>{let R=g.value;s.length>0&&(R=n.value.remove(s,R,l.value)),d.length>0&&(R=n.value.append(d,R,l.value)),C(R)},B=()=>{C(Array.from(k.value))},O=h(()=>n.value.genDisabledKeys(a.value,l.value)),k=h(()=>{const s=n.value.genDisabledKeys(K.value,l.value);return T.value.forEach(d=>{O.value.has(d)&&s.add(d)}),s}),y=h(()=>n.value.genDisabledKeys(b.value,l.value));return{dataSource:a,dataKeyMap:o,sourceData:b,targetData:K,sourceDataKeys:w,targetDataKeys:I,filteredDataSource:S,filteredSourceData:D,filteredTargetData:P,paginatedDataSource:$,paginatedSourceData:L,paginatedTargetData:E,targetKeys:g,targetKeySet:T,changeTargetKeys:z,clear:B,getKey:l,disabledKeys:O,disabledSourceKeys:y,disabledTargetKeys:k,sourceSearchValue:f,setSourceSearchValue:A,targetSearchValue:v,setTargetSearchValue:x}}function ne(e,t){if(!t||!t.pageSize)return e;const{total:n}=t;if(n&&e.length<n)return e;const r=t.pageSize,c=(t.pageIndex-1)*r;return e.slice(c,c+r)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Ze(e){const t=new Map;Ve(()=>{t.clear()});const n=(r,c)=>new Set(r.map(l=>c(l)));return{genDataKeys:n,genDataKeyMap:(r,c)=>{const l=new Map;return r.forEach(a=>{l.set(c(a),a)}),l},genDisabledKeys:(r,c)=>{const l=new Set;return r.forEach(a=>{a.disabled&&l.add(c(a))}),l},getAllSelectedKeys:(r,c,l,a,o)=>{let g;return r?(g=n(c,o),a.forEach(u=>{!l.has(u)&&g.delete(u)})):(g=new Set,a.forEach(u=>{l.has(u)&&g.add(u)})),Array.from(g)},separateDataSource:(r,c,l,a)=>{const o=r.filter(u=>!l.has(a(u))),g=[];l.forEach(u=>{var A,v;const f=(v=(A=c.get(u))!=null?A:t.get(u))!=null?v:e==null?void 0:e.find(x=>a(x)===u);f&&!t.has(u)&&t.set(u,f),g.push(f!=null?f:{key:u})});for(const u of t.keys())l.has(u)||t.delete(u);return{sourceData:o,targetData:g}},dataFilter:(r,c,l)=>c?r.filter(a=>l(a,c)):r,append:(r,c)=>{const l=new Set(c);return r.forEach(a=>{l.add(a)}),Array.from(l)},remove:(r,c)=>{const l=new Set(c);return r.forEach(a=>{l.delete(a)}),Array.from(l)}}}function pe(e){var r;const t=Ze((r=e.defaultTargetData)!=null?r:[]);return h(()=>e.dataStrategy?{...t,...e.dataStrategy}:t)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function et(e,t,n){const{dataKeyMap:r,sourceData:c,targetData:l,disabledSourceKeys:a,disabledTargetKeys:o,changeTargetKeys:g,clear:u,getKey:f}=t,{sourceSelectedKeys:A,targetSelectedKeys:v}=n,x=h(()=>e.disabled||A.value.length<=0),T=h(()=>e.disabled||v.value.length<=0),C=h(()=>e.disabled||c.value.every(S=>a.value.has(f.value(S)))),i=h(()=>e.disabled||l.value.every(S=>o.value.has(f.value(S))));return{appendDisabled:x,removeDisabled:T,appendAllDisabled:C,clearDisabled:i,triggerAppend:S=>{!S&&x.value||S&&e.disabled||g([],(S!=null?S:Array.from(A.value)).filter(D=>!a.value.has(D)))},triggerRemove:S=>{!S&&T.value||S&&e.disabled||g((S!=null?S:Array.from(v.value)).filter(D=>!o.value.has(D)),[])},triggerAppendAll:()=>{C.value||g([],Array.from(r.value.keys()).filter(S=>!a.value.has(S)))},triggerClear:()=>{i.value||(u(),M(e.onClear))}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function tt(e,t,n){const[r,c]=Q(e,"sourceSelectedKeys",()=>[]),[l,a]=Q(e,"targetSelectedKeys",()=>[]),o=h(()=>new Set(r.value)),g=h(()=>new Set(l.value)),{dataKeyMap:u,dataSource:f,sourceData:A,targetData:v,sourceDataKeys:x,targetDataKeys:T,targetKeySet:C,disabledKeys:i,disabledSourceKeys:b,disabledTargetKeys:K,getKey:w}=t,I=h(()=>{const y=e.mode==="immediate"?u.value.size:x.value.size,s=e.mode==="immediate"?i.value.size:b.value.size;return y-s}),S=h(()=>T.value.size-K.value.size),D=y=>{const s=n.value.getAllSelectedKeys(!0,y?e.mode==="immediate"?f.value:A.value:v.value,new Set,new Set,w.value),d=(y?r:l).value.length,R=y?o.value:g.value;return{checked:d>0,indeterminate:(s.length!==d||s.some(V=>!R.has(V)))&&d>0}},P=h(()=>D(!0)),$=h(()=>D(!1));let L=!1;Y(o,(y,s)=>{if(e.mode==="immediate"){if(L)return;at(s,y,t)}}),Y([I,u,i,C],(y,[,,,s])=>{const d=new Set(r.value),R=new Set,V=new Set,X=F=>{d.has(F)||(d.add(F),V.add(F),R.delete(F))},U=F=>{d.has(F)&&(d.delete(F),R.add(F),V.delete(F))};r.value.forEach(F=>{if(!u.value.has(F)||i.value.has(F)){U(F);return}e.mode==="default"&&C.value.has(F)&&U(F)}),e.mode==="immediate"&&(C.value.forEach(F=>{u.value.has(F)&&X(F)}),s==null||s.forEach(F=>{C.value.has(F)||U(F)})),(V.size>0||R.size>0)&&(c(Array.from(d)),L=!0,ke(()=>{L=!1}))},{immediate:!0,flush:"post"}),Y([S,T,K],()=>{const y=new Set(l.value);l.value.forEach(s=>{(!T.value.has(s)||K.value.has(s))&&y.delete(s)}),a(Array.from(y))},{immediate:!0,flush:"post"});const E=y=>{e.disabled||c(se(y)?y:Array.from(y))},z=y=>{e.disabled||a(se(y)?y:Array.from(y))},B=(y=!0,s=!0)=>{if(e.disabled)return;const d=s?e.mode==="default"?A.value:f.value:v.value,R=s?e.mode==="default"?b:i:K,V=s?o:g;(s?c:a)(n.value.getAllSelectedKeys(y,d,V.value,R.value,w.value)),M(e.onSelectAll,s,y)},O=h(()=>e.disabled||I.value<=0),k=h(()=>e.disabled||S.value<=0);return{sourceSelectedKeys:r,targetSelectedKeys:l,sourceSelectedKeySet:o,targetSelectedKeySet:g,handleSourceSelectChange:E,handleTargetSelectChange:z,sourceSelectAllStatus:P,targetSelectAllStatus:$,handleSourceSelectAll:y=>B(y,!0),handleTargetSelectAll:y=>B(y,!1),sourceSelectAllDisabled:O,targetSelectAllDisabled:k,setSourceSelectedKeys:c,setTargetSelectedKeys:a}}function at(e,t,n){const{changeTargetKeys:r}=n,c=[],l=[];for(const a of e.values())t.has(a)||l.push(a);for(const a of t.values())e.has(a)||c.push(a);r(l,c)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const lt={value:Array,sourceSelectedKeys:Array,targetSelectedKeys:Array,sourceSearchValue:String,targetSearchValue:String,clearable:{type:Boolean,default:void 0},clearIcon:String,customAdditional:{type:Function,default:void 0},dataSource:{type:Array,default:()=>[]},dataStrategy:Object,defaultTargetData:Array,disabled:{type:Boolean,default:!1},empty:{type:[String,Object],default:"simple"},getKey:[String,Function],mode:{type:String,default:"default"},pagination:{type:[Boolean,Object],default:void 0},scroll:Object,searchable:{type:[Boolean,Object],default:void 0},searchFn:Function,searchPlaceholder:[String,Array],spin:{type:[Boolean,Object],default:void 0},showSelectAll:{type:Boolean,default:void 0},virtual:{type:Boolean,default:!1},virtualScrollMode:{type:String,default:void 0},virtualItemHeight:{type:Number,default:void 0},"onUpdate:value":[Function,Array],"onUpdate:sourceSelectedKeys":[Function,Array],"onUpdate:targetSelectedKeys":[Function,Array],"onUpdate:sourceSearchValue":[Function,Array],"onUpdate:targetSearchValue":[Function,Array],onChange:[Function,Array],onSearch:[Function,Array],onSelectAll:[Function,Array],onClear:[Function,Array],onScroll:[Function,Array],onScrolledChange:[Function,Array],onScrolledBottom:[Function,Array]},ae={isSource:{type:Boolean,required:!0}},nt=ae,rt=ae,st=ae,ct={dataSource:Array,checkable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1},checked:Function,customAdditional:{type:Function,default:void 0},disabled:Function,getKey:Function,labelKey:String,scroll:Object,virtual:{type:Boolean,default:!1},virtualScrollMode:{type:String,default:void 0},virtualItemHeight:{type:Number,default:32},onCheckChange:[Function,Array],onRemove:[Function,Array],onScroll:[Function,Array],onScrolledChange:[Function,Array],onScrolledBottom:[Function,Array]},ot={checked:{type:Boolean,default:!1},checkable:{type:Boolean,default:!0},removable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},label:String,value:{type:[String,Number,Symbol],required:!0},onCheckChange:[Function,Array],onRemove:[Function,Array]},ut=H({props:ot,setup(e,{slots:t}){const{mergedPrefixCls:n}=N(Ae),r=a=>{M(e.onCheckChange,!!a)},c=()=>{M(e.onRemove)},l=h(()=>{const a=`${n.value}-item`;return J({[a]:!0,[`${a}-disabled`]:e.disabled})});return()=>{const a=`${n.value}-item`,o=[];if(e.checkable)o.push(m(ve,{class:`${a}-checkbox`,label:e.label,value:e.value,checked:e.checked,disabled:e.disabled,onChange:r},t));else{const g=Fe(t.default,e.label);o.push(m("label",{class:`${a}-label`},[g]))}return e.removable&&!e.disabled&&o.push(m("div",{class:`${a}-close-icon`,onClick:c},[m(re,{name:"close"},null)])),m("li",{class:l.value},[o])}}}),Ce=H({name:"IxTransferList",props:ct,setup(e,{slots:t,expose:n}){const r=q("common"),c=h(()=>`${r.prefixCls}-transfer-list`),l=h(()=>{var i;return(i=e.labelKey)!=null?i:"label"}),a=_();W(Ae,{mergedPrefixCls:c}),n({scrollTo:i=>{var b;return(b=a.value)==null?void 0:b.scrollTo(i)}});const g=i=>{var b,K;return(K=(b=e.getKey)==null?void 0:b.call(e,i))!=null?K:i.key},u=i=>{M(e.onScroll,i)},f=()=>{M(e.onScrolledBottom)},A=(i,b,K)=>{M(e.onScrolledChange,i,b,K)},v=({item:i,index:b})=>{var D,P;const K=g(i),w=$=>{M(e.onCheckChange,i,$)},I=()=>{M(e.onRemove,i)},S=e.customAdditional?e.customAdditional({data:i,index:b}):void 0;return m(ut,Ke({key:K,value:K,label:i[l.value],checked:!!((D=e.checked)!=null&&D.call(e,i)),disabled:!!((P=e.disabled)!=null&&P.call(e,i)),checkable:e.checkable,removable:e.removable,onCheckChange:w,onRemove:I},S),{default:t.label&&(()=>{var $;return($=t.label)==null?void 0:$.call(t,i)})})},x=()=>{var D;const{dataSource:i,virtual:b,virtualItemHeight:K,virtualScrollMode:w,scroll:I}=e,S=i!=null?i:[];if(!(S.length<=0))return b?m(Be,{ref:a,dataSource:S,fullHeight:!!(I!=null&&I.fullHeight),getKey:g,height:(D=I==null?void 0:I.height)!=null?D:"100%",rowHeight:K,rowRender:v,virtual:!0,scrollMode:w,onScroll:u,onScrolledBottom:f,onScrolledChange:A},null):m("ul",{class:`${c.value}-inner`},[S.map((P,$)=>v({item:P,index:$}))])},T=h(()=>{const i=c.value;return J({[i]:!0,[`${i}-virtual`]:!!e.virtual})}),C=h(()=>{const i=e.scroll;return i&&be({[i.fullHeight?"height":"maxHeight"]:Se(i.height)})});return()=>m("div",{class:T.value,style:C.value,onScroll:u},[x()])}}),it=H({props:nt,setup(e){const{props:t,slots:n,mergedPrefixCls:r,sourceTransferListRef:c,targetTransferListRef:l,getKey:a}=N(j),o=e.isSource?N(Z):N(p),{paginatedDataSource:g,paginatedData:u,selectedKeySet:f,disabledDataSourceKeys:A,disabledKeys:v,handleSelectChange:x}=o,{triggerRemove:T}=N(ee),C=e.isSource?c:l,i=P=>{M(t.onScroll,e.isSource,P)},b=()=>{M(t.onScrolledBottom,e.isSource)},K=(P,$,L)=>{M(t.onScrolledChange,e.isSource,P,$,L)},w=h(()=>e.isSource&&t.mode==="immediate"?g.value:u.value),I=h(()=>e.isSource&&t.mode==="immediate"?A.value:v.value),S=P=>{if((e.isSource&&t.mode==="immediate"?g.value:u.value).length<=0)return m("div",{class:`${P}-empty-wrapper`},[m(Re,{empty:t.empty},n)]);const L=(B,O)=>{const k=a.value(B),y=new Set(f.value);O?y.add(k):y.delete(k),x(y)},E=B=>{const O=a.value(B);T([O])},z={label:n.label&&(B=>{var O;return(O=n.label)==null?void 0:O.call(n,{item:B,isSource:e.isSource})})};return m(Ce,{ref:C,dataSource:w.value,getKey:a.value,checked:B=>f.value.has(a.value(B)),disabled:B=>t.disabled||I.value.has(a.value(B)),checkable:e.isSource||t.mode==="default",removable:!e.isSource&&t.mode==="immediate",virtual:t.virtual,virtualItemHeight:t.virtualItemHeight,virtualScrollMode:t.virtualScrollMode,scroll:t.scroll,onCheckChange:L,onRemove:E,onScroll:i,onScrolledChange:K,onScrolledBottom:b},z)},D=P=>n.default?n.default({...te(o),isSource:e.isSource}):S(P);return()=>{const P=`${r.value}-body`;return m("div",{class:`${r.value}-body`},[D(P)])}}}),dt=H({props:st,setup(e){const{slots:t,props:n,mergedPrefixCls:r}=N(j),c=e.isSource?N(Z):N(p),{pagination:l,filteredData:a,filteredDataSource:o}=c,g=u=>{var A,v;if(t.footer)return t.footer({...te(c),isSource:e.isSource});if(!l.value)return;const f=(v=(A=l.value)==null?void 0:A.total)!=null?v:e.isSource&&n.mode==="immediate"?o.value.length:a.value.length;return m("div",{class:`${u}-inner`},[m(Ge,Ke({class:`${u}-pagination`},l.value,{total:f}),null)])};return()=>{const u=`${r.value}-footer`,f=g(u);if(!(!f||se(f)&&f.length<=0))return m("div",{class:u},[f])}}}),ht=H({props:rt,setup(e){const{props:t,slots:n,config:r,locale:c,mergedPrefixCls:l}=N(j),a=e.isSource?N(Z):N(p),{clearDisabled:o,triggerClear:g}=N(ee),{showSelectAll:u,data:f,selectAllDisabled:A,selectAllStatus:v,searchable:x,searchPlaceholder:T,searchValue:C,handleSearchChange:i,selectAll:b}=a,[K,w]=we(""),I=_(),S=()=>{var d;const s=(d=I.value)==null?void 0:d.getInputElement();s&&s.value!==C.value&&(s.value=C.value),K.value!==C.value&&w(C.value)};He(()=>{S()}),Y(C,()=>{S()});const D=()=>{i(K.value)},P=s=>{const d=s.target.value;w(d),d||D()},$=_e(()=>{D()},["enter"]),L=s=>{b(!!s)},E=s=>{if(!(!u.value||!e.isSource&&t.mode==="immediate"))return m(ve,{class:`${s}-check-all`,checked:v.value.checked,indeterminate:v.value.indeterminate,disabled:A.value,onChange:L},null)},z=s=>{let d;return n.headerLabel?d=n.headerLabel({data:f.value,isSource:e.isSource}):d=`${e.isSource?c.toSelect:c.selected} (${f.value.length})`,m("span",{class:`${s}-label`},[d])},B=s=>{if(!x.value)return;const d={suffix:()=>m(re,{class:`${s}-search-icon`,name:"search",onClick:D},null)};return m($e,{ref:I,class:`${s}-search-input`,disabled:t.disabled,type:"text",size:"sm",placeholder:T.value,onInput:P,onKeydown:$},d)},O=s=>{var R,V;if(e.isSource||!((R=t.clearable)!=null?R:r.clearable))return;const d=J({[`${s}-clear-icon`]:!0,[`${s}-clear-icon-disabled`]:o.value});return m("span",{class:d,onClick:g},[n.clearIcon?n.clearIcon():m(re,{name:(V=t.clearIcon)!=null?V:r.clearIcon},null)])},k=s=>{var R;const d=(R=n.headerSuffix)==null?void 0:R.call(n,{isSource:e.isSource});if(!ue(d))return m("span",{class:`${s}-suffix`},[d])},y=s=>n.header?n.header({...te(a),isSource:e.isSource}):m("div",{class:`${s}-inner`},[E(s),z(s),B(s),O(s),k(s)]);return()=>{const s=`${l.value}-header`,d=y(s);if(!ue(d))return m("div",{class:s},[d])}}}),ge=H({props:ae,setup(e){const{props:t,mergedPrefixCls:n}=N(j),r=h(()=>{const a=`${n.value}-content`;return J({[a]:!0,[`${a}-${e.isSource?"source":"target"}`]:!0,[`${a}-disabled`]:t.disabled})}),c=h(()=>{var g;const a=(g=t.scroll)==null?void 0:g.width;let o;if(je(a)?o=e.isSource?a.source:a.target:o=a,!!o)return be({width:Se(o)})}),l=h(()=>{if(!Ue(t.spin))return ye(t.spin)?{spinning:!!t.spin}:{spinning:e.isSource?t.spin.source:t.spin.target}});return()=>{const a=[m(ht,{isSource:e.isSource},null),m(it,{isSource:e.isSource},null),m(dt,{isSource:e.isSource},null)];return m("div",{class:r.value,style:c.value},[l.value?m(Ee,l.value,{default:()=>[a]}):a])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function fe(e){const{heightLg:t,heightMd:n,marginSizeMd:r,marginSizeSm:c,paddingSizeSm:l,paddingSizeMd:a}=e;return{height:290,contentWidth:260,headerHeight:t,suffixMarginLeft:r,footerHeight:t,contentPadding:`0 ${l}px 0 ${a}px`,oprMinWidth:4,oprPadding:l,oprButtonWidth:24,oprButtonHeight:32,oprButtonGap:c,searchWidth:110,listItemMinHeight:n,closeIconPadding:`0 ${a}px`}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const gt=(e,t)=>fe(e),ft=H({name:"IxTransfer",props:lt,setup(e,{slots:t,expose:n}){const r=q("common"),c=q("transfer"),l=q("locale").transfer,{globalHashId:a,hashId:o,registerToken:g}=Le("transfer");g(gt);const u=h(()=>`${r.prefixCls}-transfer`),f=h(()=>{var E;return(E=e.showSelectAll)!=null?E:c.showSelectAll}),{source:A,target:v}=Je(e,c),{source:x,target:T}=Qe(e,l),C=pe(e),i=qe(e),b=Ye(e,c,C,i),K=tt(e,b,C),w=et(e,b,K),{sourceBindings:I,targetBindings:S}=Xe(e,b,w,K,i,f,A,x,v,T),D=_(),P=_();n({scrollTo:(E,...z)=>{var B;return(B=(E?D:P).value)==null?void 0:B.scrollTo(...z)}}),W(j,{props:e,slots:t,locale:l,config:c,mergedPrefixCls:u,sourceTransferListRef:D,targetTransferListRef:P,showSelectAll:f,getKey:b.getKey}),W(Z,I),W(p,S),W(ee,w);const L=h(()=>{var z;const E=u.value;return J({[a.value]:!!a.value,[o.value]:!!o.value,[E]:!0,[`${E}-fit-content`]:!!((z=e.scroll)!=null&&z.height)})});return()=>m("div",{class:L.value},[m(ge,{isSource:!0},null),m(We,null,null),m(ge,{isSource:!1},null)])}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const yt=ft,bt=Ce;export{yt as I,Z as T,p as a,bt as b};
