import{L as k,m as S,X as Y,T as x,aC as q,ak as F,aD as z,al as B,u as L,A as $}from"./index-7e609792.js";import{i as M,aG as _,aH as K,aI as Q,aJ as G,aK as R,aL as U,aM as j,aN as p,aO as X,aP as J,aQ as Z,aR as ee,aS as ne,aT as ae,aU as te,aV as se,aW as re,aX as le,aD as ue,aY as ce,aE as oe,aZ as ie,a_ as de,aA as fe,a$ as me,b0 as ve,b1 as he,b2 as ge,b3 as be,b4 as ye,aC as Se,b5 as Ce,b6 as Pe,b7 as Ae,b8 as Oe,b9 as De,ba as we,bb as xe,bc as ke,bd as Me,be as Te,bf as Ve,ax as Fe,k as Be,l as $e,bg as He,bh as Ie,v as A,f as C,y as h,b as T,P as Ne,G as O,w as N,p as Ee,a2 as We,x as Ye,N as qe,z as ze}from"./vendor-50817465.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Le=Symbol("DATE_CONFIG_TOKEN");let D;function _e(){const e=M(Le,null);return e||(D||(D=Ke()),D)}function Ke(){const e=k("locale"),t=()=>new Date,c=(n,a)=>Ie(n,a,t(),{locale:e.date});return{now:t,weekStartsOn:()=>{var n;return((n=e.date.options)==null?void 0:n.weekStartsOn)||1},get:(n,a)=>{switch(a){case"year":return X(n);case"quarter":return p(n);case"month":return j(n);case"week":return U(n,{locale:e.date});case"date":return R(n);case"day":return G(n);case"hour":return Q(n);case"minute":return K(n);case"second":return _(n)}},set:(n,a,s)=>{switch(s){case"year":return le(n,a);case"quarter":return re(n,a);case"month":return se(n,a);case"week":return te(n,a,{locale:e.date});case"date":return ae(n,a);case"day":return ne(n,a,{locale:e.date});case"hour":return ee(n,a);case"minute":return Z(n,a);case"second":return J(n,a)}},add:(n,a,s)=>{switch(s){case"year":return de(n,a);case"quarter":return ie(n,a);case"month":return oe(n,a);case"week":return ce(n,a);case"date":case"day":return ue(n,a)}},startOf:(n,a)=>{switch(a){case"year":return ge(n);case"quarter":return he(n);case"month":return ve(n);case"week":return me(n,{locale:e.date});case"date":case"day":return fe(n)}},endOf:(n,a)=>{switch(a){case"year":return Pe(n);case"quarter":return Ce(n);case"month":return Se(n);case"week":return ye(n,{locale:e.date});case"date":case"day":return be(n)}},isSame:(n,a,s)=>{switch(s){case"year":return Te(n,a);case"quarter":return Me(n,a);case"month":return ke(n,a);case"week":return xe(n,a,{locale:e.date});case"date":case"day":return we(n,a);case"hour":return De(n,a);case"minute":return Oe(n,a);case"second":return Ae(n,a)}},isValid:n=>Ve(n),format:(n,a)=>Fe(n,a,{locale:e.date}),parse:c,convert:(n,a)=>Be(n)?t():$e(n)?c(n,a):He(n),getLocalizedLabels:(n,a,s)=>{const d=e.date.localize;switch(n){case"month":return Array.from({length:a}).map((f,l)=>d.month(l,{width:s}));case"day":return Array.from({length:a}).map((f,l)=>d.day(l,{width:s}));case"dayPeriod":return Array.from({length:a}).map((f,l)=>d.dayPeriod(l,{width:s}))}}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const V=Symbol("timePanelContext");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Qe={disabledHours:{type:Function,default:()=>[]},disabledMinutes:{type:Function,default:()=>[]},disabledSeconds:{type:Function,default:()=>[]},hideDisabledOptions:{type:Boolean,default:!1},hourStep:{type:Number,default:1},minuteStep:{type:Number,default:1},secondStep:{type:Number,default:1}},Ge={...Qe,value:Date,activeValue:Date,visible:{type:Boolean,default:!1},hourEnabled:{type:Boolean,default:!0},minuteEnabled:{type:Boolean,default:!0},secondEnabled:{type:Boolean,default:!0},use12Hours:{type:Boolean,default:!1},"onUpdate:value":[Function,Array],"onUpdate:activeValue":[Function,Array],onChange:[Function,Array]},Re={selectedValue:[String,Number],activeValue:{type:[String,Number],required:!0},options:{type:Array,require:!0},visible:{type:Boolean,default:!1},onActiveChange:[Function,Array]},Ue={disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},value:{type:[String,Number],required:!0},onActive:[Function,Array]},je=A({props:Ue,setup(e){const{mergedPrefixCls:t}=M(V),c=C(()=>{const s=`${t.value}-cell`;return{[s]:!0,[`${s}-disabled`]:e.disabled,[`${s}-selected`]:e.selected}}),n=s=>{s.stopPropagation(),!e.disabled&&!e.selected&&S(e.onActive,{value:e.value,disabled:e.disabled})},a=C(()=>pe(e.value));return()=>h("li",{class:c.value,onClick:n},[a.value])}});function pe(e){return Y(e)?e.toString().padStart(2,"0"):e}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Xe(e,t,c,n){const a=C(()=>{var l;return((l=e.options)==null?void 0:l.findIndex(u=>u.value===e.activeValue))??-1});return{handleWheel:l=>{var i;if(l.preventDefault(),l.shiftKey||!t.value||!e.options||a.value>=e.options.length)return;const u=(i=e.options)==null?void 0:i[a.value+(l.deltaY>0?1:-1)];u&&S(e.onActiveChange,u)},handleClick:l=>{var i,m;const u=(i=t.value)==null?void 0:i.children;if(u){l.preventDefault();for(let r=0;r<u.length;r++){const v=u[r].getBoundingClientRect().y,o=(m=u[r+1])==null?void 0:m.getBoundingClientRect().y;if(v<l.clientY&&(!o||o>l.clientY)){u[r].dispatchEvent(new Event("click"));return}}}},handleScroll:()=>{if(n.value)return;const l=c();l&&S(e.onActiveChange,l)}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function Je(e,t,c){const{frameRunning:n,scrollTo:a}=Ze(t),s=()=>{var u,i;return((i=(u=t.value)==null?void 0:u.querySelector(`li.${c.value}-cell`))==null?void 0:i.offsetHeight)??0},d=(u,i=200)=>{const m=t.value;if(!m)return;const r=Math.max(u*s(),0);r!==x(m).scrollTop&&a(r,i)};return{adjustPanel:d,scrollToActive:u=>{const i=e.options.findIndex(m=>m.value===e.activeValue);d(i,u)},getTargetByScrollTop:()=>{const u=t.value;if(!u)return;const i=Math.min(Math.round(x(u).scrollTop/s()),e.options.length-1);return e.options[i]},frameRunning:n}}function Ze(e){const t=T(!1);let c,n,a,s,d;const f=i=>{if(!e.value)return;const m=i>s?s:i,r=n-a,v=z(m,a,r,s);e.value.scrollTop=v},l=()=>{q(c),c=F(()=>{t.value=!0;const i=Date.now()-d;f(i),i<s?l():(n=0,s=0,d=0,F(()=>{t.value=!1}))})};return{frameRunning:t,scrollTo:(i,m=100)=>{e.value&&(s=m,n=i,a=x(e.value).scrollTop,t.value||(d=Date.now()),l())}}}const en=A({props:Re,setup(e){const{mergedPrefixCls:t}=M(V),c=T(void 0),{scrollToActive:n,getTargetByScrollTop:a,frameRunning:s}=Je(e,c,t);function d(o){S(e.onActiveChange,o)}function f(){n()}const{handleWheel:l,handleClick:u,handleScroll:i}=Xe(e,c,a,s),m=o=>{o.preventDefault()};let r=!1;const v=()=>{r=!0,i(),O(()=>{r=!1})};return Ne(()=>{e.visible&&O(()=>n(0))}),N(()=>e.activeValue,()=>{!r&&O(n)}),()=>h("div",{class:`${t.value}-column`,onMouseleave:f,onMouseenter:f,onWheel:l,onClick:u},[h("ul",{ref:c,class:`${t.value}-column-inner`,onScroll:v,onWheel:m},[e.options.map((o,g)=>{const{disabled:b,value:y}=o;return h(je,{key:g,disabled:b,selected:e.selectedValue===y,value:y,onActive:d},null)})])])}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function E(e,t=!1){if(t)return e>=12?"pm":"am"}function H(e,t){return t&&(e>12&&(e-=12),e===0&&(e=12)),e}function I(e,t){return t&&(t=t.toLowerCase(),t==="am"&&e>=12&&(e-=12),t==="pm"&&e<12&&(e+=12)),e}function nn(e,t,c,n,a){const{get:s,set:d}=e,f=Number(a),l=new Date(t);switch(c){case"hour":return d(l,I(f,E(s(t,"hour"),n)),"hour");case"minute":return d(l,f,"minute");case"second":return d(l,f,"second");case"AM/PM":return d(l,I(s(l,"hour"),a.toString()),"hour")}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function an(e,t){const{get:c}=t,[n,a]=B(e,"activeValue",()=>t.now()),[s,d]=B(e,"value"),f=C(()=>s.value&&H(c(s.value,"hour"),e.use12Hours)),l=o=>o&&E(c(o,"hour"),e.use12Hours),u=C(()=>l(s.value));function i(o){const g=()=>{const b=w(e.use12Hours?12:24,e.hourStep,e.disabledHours(u.value),e.hideDisabledOptions);if(e.use12Hours){const y=b.find(P=>P.value===0);y&&(y.value=12)}return b};switch(o){case"AM/PM":return tn("",e.hideDisabledOptions);case"second":return w(60,e.secondStep,e.disabledSeconds(f.value,s.value&&c(s.value,"minute"),u.value),e.hideDisabledOptions);case"minute":return w(60,e.minuteStep,e.disabledMinutes(f.value,u.value),e.hideDisabledOptions);case"hour":return g();default:return[]}}function m(o,g){switch(g){case"AM/PM":return l(o);case"hour":default:return H(c(o,"hour"),e.use12Hours);case"minute":return c(o,"minute");case"second":return c(o,"second")}}function r(o){const g=(b,y)=>{const P=nn(t,s.value??n.value,b,e.use12Hours,y.value);a(P),y.disabled||(d(P),S(e.onChange,P))};return b=>g(o,b)}const v=o=>C(()=>({activeValue:m(n.value,o),selectedValue:s.value&&m(s.value,o),options:i(o),onActiveChange:r(o)}));return{hourOptionsProps:v("hour"),minuteOptionsProps:v("minute"),secondOptionsProps:v("second"),amPmOptionsProps:v("AM/PM")}}function w(e,t,c,n){const a=[];for(let s=0;s<e;s+=t){const d=c.includes(s);(!d||!n)&&a.push({value:s,disabled:d})}return a}function tn(e,t){return e=e.toLowerCase(),["am","pm"].map(c=>({disabled:e===c,value:c})).filter(c=>!t||!c.disabled)}const sn=A({name:"ɵTimePanel",props:Ge,setup(e){const t=k("common"),c=C(()=>`${t.prefixCls}-time-panel`),n=_e(),{hourOptionsProps:a,minuteOptionsProps:s,secondOptionsProps:d,amPmOptionsProps:f}=an(e,n);Ee(V,{mergedPrefixCls:c});const l=C(()=>{const u=[];return e.hourEnabled&&u.push(a.value),e.minuteEnabled&&u.push(s.value),e.secondEnabled&&u.push(d.value),e.use12Hours&&u.push(f.value),u});return()=>h("div",{class:`${c.value}`},[l.value.map((u,i)=>h(en,We({key:i},u,{visible:e.visible}),null))])}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const on=sn;/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const rn={borderless:Boolean,clearable:Boolean,clearIcon:String,className:String,disabled:Boolean,focused:Boolean,readonly:Boolean,size:String,status:String,suffix:String,onClick:[Array,Function],onClear:[Array,Function],onFocus:[Array,Function],onBlur:[Array,Function],onKeyDown:[Array,Function]},ln=A({props:rn,setup(e,{slots:t}){const c=k("common"),n=C(()=>`${c.prefixCls}-trigger`),a=L(),s=T();Ye(()=>{N(a.monitor(s.value,!0),r=>{const{origin:v,event:o}=r;o&&(v?S(e.onFocus,o):S(e.onBlur,o))})}),qe(()=>a.stopMonitoring(s.value));const d=C(()=>{const r=n.value,{className:v,size:o,status:g,borderless:b,disabled:y,focused:P,readonly:W}=e;return ze({[`${v}`]:!!v,[r]:!0,[`${r}-${o}`]:!0,[`${r}-${g}`]:!!g,[`${r}-borderless`]:b,[`${r}-disabled`]:y,[`${r}-focused`]:P,[`${r}-readonly`]:W})}),f=r=>{e.disabled||S(e.onClick,r)},l=r=>{e.disabled||S(e.onKeyDown,r)},u=r=>{e.disabled||(r.stopPropagation(),S(e.onClear,r))},i=()=>{var r;return t.suffix||e.suffix?h("div",{class:`${n.value}-suffix`},[((r=t.suffix)==null?void 0:r.call(t))??(e.suffix&&h($,{name:e.suffix},null))]):null},m=()=>!e.clearable||e.disabled||!e.clearIcon&&!t.clearIcon?null:h("span",{class:`${n.value}-clear-icon`,onClick:u},[t.clearIcon?t.clearIcon():e.clearIcon&&h($,{name:e.clearIcon},null)]);return()=>{var r;return h("div",{ref:s,class:d.value,onClick:f,onKeydown:l},[(r=t.default)==null?void 0:r.call(t),i(),m()])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const dn=ln;export{Le as D,dn as a,Qe as b,H as c,E as n,_e as u,on as ɵ};
