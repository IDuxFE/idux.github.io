import{K as w,al as Se,r as ke,a9 as Oe,ad as Ae,ae as Ee,m as T,N as U,ac as W,aB as X,L as D,a7 as Y,at as Z}from"./index-7e609792.js";import{n as Fe,c as we,Éµ as ee,a as ne,b as Re,u as te}from"./index-34915103.js";import{f as P,l as Be,w as M,x as L,O as j,t as Te,v as z,i as K,b as ae,bj as oe,y as I,a2 as B,a1 as le,z as re,p as ue}from"./vendor-50817465.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function $(e,n,t){if(n)return e.convert(n,t)}function $e(e){return e.sort((n,t)=>n?t?n.valueOf()-t.valueOf():0:1)}function De(e){return/[hH]/.test(e)}function Me(e){return/m/.test(e)}function ze(e){return/s/.test(e)}function se(e){return/[aA]/.test(e)}function Ue(e){return/A/.test(e)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function _(e,n,t,a){const[o,u]=w(void 0),[i,s]=w(!1),[c,l]=w(void 0),{parse:C,format:b}=e,v=P(()=>$(e,a.value,n.value)),x=P(()=>Be(a.value)?a.value:v.value?b(v.value,n.value):"");function d(g=!1){var V;(g||!o.value||C(o.value,n.value).valueOf()!==((V=v.value)==null?void 0:V.valueOf()))&&u(x.value),l(v.value)}M([a,n],()=>d(),{immediate:!0});function p(g,V){return g?e.parse(g,V):void 0}function m(g){return!g||e.isValid(g)}function f(g){const V=g.target.value;u(V);const E=p(V,n.value);m(E)&&t(o.value?E:void 0)}function r(){u("")}function h(){s(!0)}function S(){s(!1)}function k(g){t(g)}return{inputValue:o,panelValue:c,inputFocused:i,setInputValue:u,setPanelValue:l,init:d,handleInput:f,handleInputClear:r,handleInputFocus:h,handleInputBlur:S,handlePanelChange:k}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ce(e,n){return P(()=>{const t=e.allowInput??n.allowInput;return{enableExternalInput:t===!0,enableInternalInput:t==="overlay"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function He(e){return n=>{(n.code==="Escape"||n.code==="Enter")&&e(!1)}}function Ke(e,n,t){const{bufferUpdated:a,buffer:o}=e;return u=>{switch(u.code){case"Escape":n(!1);break;case"Enter":a.value&&t(o.value),n(!1);break}}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const Ne=[0,4];function ie(e){const{props:n,common:t,config:a,accessor:o,mergedPrefixCls:u,overlayOpened:i,setOverlayOpened:s}=e;return P(()=>({clickOutside:!0,container:n.overlayContainer??a.overlayContainer,containerFallback:`.${u.value}-overlay-container`,disabled:o.disabled||n.readonly,offset:Ne,placement:"bottomStart",transitionName:`${t.prefixCls}-slide-auto`,trigger:"manual",visible:i.value,"onUpdate:visible":s}))}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function de(e,n){const[t,a]=Se(e,"open",!1),o=u=>{a(u),u||n.init(!0)};return L(()=>{e.autofocus&&a(!0)}),{overlayOpened:t,setOverlayOpened:o}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function pe(e,n,t,a){const{accessor:o,control:u}=ke();Oe(u);const i=Ae(e,n),s=Ee(e,u),[c,l]=w(!1),C=p=>{const{get:m}=t,f=se(a.value);return U(p).some(r=>{const h=m(r,"hour"),S=Fe(h,f),k=we(h,!!f),g=m(r,"minute"),V=m(r,"second");return e.disabledHours(S).includes(k)||e.disabledMinutes(k,S).includes(g)||e.disabledSeconds(k,g,S).includes(V)})};function b(p){const m=j(p)?$e(p):p;if(C(m))return;let f=Te(o.value);f=j(f)?f.map(r=>$(t,r,a.value)):$(t,f,a.value),o.setValue(m),T(e.onChange,m,f)}function v(p){b(void 0),T(e.onClear,p)}function x(p){l(!0),T(e.onFocus,p)}function d(p){l(!1),o.markAsBlurred(),T(e.onBlur,p)}return{accessor:o,mergedSize:i,mergedStatus:s,isFocused:c,handleChange:b,handleClear:v,handleFocus:x,handleBlur:d}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function fe(e){return P(()=>{const{props:n,config:t,accessor:a}=e;return{borderless:!1,clearable:n.clearable??t.clearable,clearIcon:n.clearIcon??t.clearIcon,disabled:a.disabled,size:"sm"}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function je(e,n,t,a){const o=P(()=>$(n,e.defaultOpenValue,t.value)),[u,i]=w(()=>a.value??o.value);return M(a,s=>{i(s??o.value)}),{activeValue:u,setActiveValue:i}}function _e(e,n,t,a){const o=P(()=>U(e.defaultOpenValue).map(l=>$(n,l,t.value))),[u,i]=w(()=>{var l;return((l=a.value)==null?void 0:l[0])??o.value[0]}),[s,c]=w(()=>{var l;return((l=a.value)==null?void 0:l[1])??o.value[1]});return M(a,l=>{i((l==null?void 0:l[0])??o.value[0]),c((l==null?void 0:l[1])??o.value[1])}),{fromActiveValue:u,toActiveValue:s,setFromActiveValue:i,setToActiveValue:c}}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ve(e,n){return P(()=>{const{disabledHours:t,disabledMinutes:a,disabledSeconds:o,hideDisabledOptions:u,hourStep:i,minuteStep:s,secondStep:c}=e,l=n.value;return{disabledHours:t,disabledMinutes:a,disabledSeconds:o,hideDisabledOptions:u,hourStep:i,minuteStep:s,secondStep:c,hourEnabled:De(l),minuteEnabled:Me(l),secondEnabled:ze(l),use12Hours:se(l),amPmCapital:Ue(l)}})}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const G=Symbol("timePickerContext"),q=Symbol("timeRangePickerContext"),Le=z({setup(){const e=K(G),{slots:n,props:t,locale:a,formatRef:o,dateConfig:u,inputRef:i,inputEnableStatus:s,mergedPrefixCls:c,overlayOpened:l,handleClear:C,handleKeyDown:b,controlContext:{inputValue:v,panelValue:x,inputFocused:d,handleInput:p,handleInputFocus:m,handleInputBlur:f,handlePanelChange:r}}=e,h=ae(),S=()=>{var O;s.value.enableInternalInput&&(i.value=(O=h.value)==null?void 0:O.getInputElement())};L(S),oe(S);const k=fe(e),g=ve(t,o),{activeValue:V,setActiveValue:E}=je(t,u,o,x),R=O=>{O.target instanceof HTMLInputElement||O.preventDefault()};return()=>{const O=`${c.value}-overlay`,A=`${c.value}-board`,y={...g.value,activeValue:V.value,visible:l.value,value:x.value,onChange:r,"onUpdate:activeValue":E},F=[I("div",{class:`${O}-body ${A}`,tabindex:-1,onMousedown:R},[s.value.enableInternalInput&&I(W,B({ref:h,class:`${A}-input`},k.value,{clearVisible:!!v.value,value:v.value,readonly:t.readonly,focused:d.value,placeholder:t.placeholder??a.timePicker.placeholder,onInput:p,onClear:C,onFocus:m,onBlur:f,onKeydown:b}),n),I(ee,B(y,{class:`${A}-panel`,tabindex:-1}),null)]),I(X,{class:`${O}-footer`,footer:t.footer},n)];return t.overlayRender?t.overlayRender(F):I("div",{onMousedown:R},[F])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function me(e){const{props:n,config:t,accessor:a,mergedSize:o,mergedStatus:u,isFocused:i,handleBlur:s,handleFocus:c,handleClear:l,handleKeyDown:C,overlayOpened:b,setOverlayOpened:v,inputEnableStatus:x}=e,d=()=>{const p=b.value;p||a.disabled||v(!p)};return P(()=>({borderless:n.borderless,clearable:!n.readonly&&!a.disabled&&(n.clearable??t.clearable)&&(j(a.value)?!!a.value.length:!!a.value),clearIcon:n.clearIcon??t.clearIcon,disabled:a.disabled,focused:i.value,readonly:n.readonly||!x.value.enableExternalInput,size:o.value,status:u.value,suffix:n.suffix??t.suffix,onClick:d,onClear:l,onFocus:c,onBlur:s,onKeyDown:C}))}const Ge=z({inheritAttrs:!1,setup(e,{attrs:n}){const t=K(G),{props:a,slots:o,locale:u,mergedPrefixCls:i,formatRef:s,inputRef:c,inputEnableStatus:l,controlContext:{inputValue:C,handleInput:b}}=t,v=P(()=>a.placeholder??u.timePicker.placeholder),x=P(()=>Math.max(10,s.value.length)+2),d=f=>{b(f),T(a.onInput,f)},p=me(t),m=f=>{const{readonly:r,disabled:h}=p.value;return I("input",{ref:l.value.enableExternalInput?c:void 0,class:`${f}-input`,autocomplete:"off",disabled:h,placeholder:v.value,readonly:r,size:x.value,value:C.value,onInput:d},null)};return()=>{const f=i.value,r={default:()=>m(f),suffix:o.suffix,clearIcon:o.clearIcon};return I(ne,B({className:f},p.value,n),r)}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const he={...Re,open:{type:Boolean,default:void 0},control:{type:[String,Number,Object],default:void 0},allowInput:{type:[Boolean,String],default:void 0},autofocus:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},clearIcon:String,clearText:String,disabled:{type:Boolean,default:!1},format:String,overlayClassName:String,overlayContainer:{type:[String,HTMLElement,Function],default:void 0},overlayRender:Function,readonly:{type:Boolean,default:!1},size:String,status:String,suffix:String,"onUpdate:open":[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array]},qe={...he,value:[String,Date,Number],defaultOpenValue:[String,Date,Number],footer:{type:[Boolean,Array,Object],default:!1},placeholder:String,"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},Je={...he,value:Array,defaultOpenValue:Array,footer:{type:[Boolean,Array,Object],default:!0},placeholder:Array,separator:[String,Object],"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},Qe=z({name:"IxTimePicker",inheritAttrs:!1,props:qe,setup(e,{attrs:n,expose:t,slots:a}){const o=D("common"),u=P(()=>`${o.prefixCls}-time-picker`),i=D("locale"),s=D("timePicker"),c=te(),{elementRef:l,focus:C,blur:b}=Y(),v=P(()=>e.format??s.format),x=pe(e,s,c,v),{accessor:d,handleChange:p}=x,m=_(c,v,p,le(d,"value")),{overlayOpened:f,setOverlayOpened:r}=de(e,m),h=ce(e,s),S=He(r),k={props:e,slots:a,dateConfig:c,common:o,locale:i,config:s,mergedPrefixCls:u,formatRef:v,handleKeyDown:S,inputRef:l,inputEnableStatus:h,overlayOpened:f,setOverlayOpened:r,controlContext:m,...x};ue(G,k),t({focus:C,blur:b}),M(f,O=>{setTimeout(()=>{var A,y;O?(C(),(A=l.value)==null||A.dispatchEvent(new FocusEvent("focus"))):(b(),(y=l.value)==null||y.dispatchEvent(new FocusEvent("blur")))})});const g=()=>I(Ge,n,null),V=()=>I(Le,null,null),E=ie(k),R=P(()=>re([`${u.value}-overlay`,e.overlayClassName]));return()=>I(Z,B(E.value,{class:R.value,triggerId:n.id}),{default:g,content:V})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function We(e,n,t){const[a,o]=w(U(t.value).map(d=>$(e,d,n.value))),[u,i]=w(!1),s=d=>{o(Xe(e,d,n.value)),i(!0)};M([t,n],([d])=>{s(d)});const c=P(()=>U(a.value)),l=P(()=>c.value[0]),C=P(()=>c.value[1]),b=_(e,n,d=>{s([d,C.value])},l),v=_(e,n,d=>{s([l.value,d])},C);return{buffer:a,bufferUpdated:u,fromControl:b,toControl:v,init:(d=!1)=>{s(t.value),i(!1),b.init(d),v.init(d)}}}function Xe(e,n,t){return U(n).map(a=>$(e,a,t))}const Ye=z({setup(){const e=K(q),{props:n,slots:t,dateConfig:a,locale:o,mergedPrefixCls:u,formatRef:i,inputRef:s,inputEnableStatus:c,overlayOpened:l,handleChange:C,handleKeyDown:b,renderSeparator:v,setOverlayOpened:x,rangeControlContext:{buffer:d,fromControl:p,toControl:m}}=e,f=ae(),r=()=>{var y;c.value.enableInternalInput&&(s.value=(y=f.value)==null?void 0:y.getInputElement())};L(r),oe(r);const h=fe(e),S=ve(n,i),{fromActiveValue:k,toActiveValue:g,setFromActiveValue:V,setToActiveValue:E}=_e(n,a,i,P(()=>[p.panelValue.value,m.panelValue.value])),R=()=>{C(d.value),x(!1)},O=y=>{y.target instanceof HTMLInputElement||y.preventDefault()};function A(y){var Q;const{inputValue:F,inputFocused:H,panelValue:ge,handleInput:be,handleInputClear:ye,handleInputFocus:Ie,handleInputBlur:Ce,handlePanelChange:Pe}=y?p:m,J=y?0:1,xe=((Q=n.placeholder)==null?void 0:Q[J])??o.timeRangePicker.placeholder[J],N=`${u.value}-board`,Ve={...S.value,activeValue:y?k.value:g.value,visible:l.value,value:ge.value,onChange:Pe,"onUpdate:activeValue":y?V:E};return I("div",{class:N},[c.value.enableInternalInput&&I(W,B({ref:y?f:void 0,class:`${N}-input`},h.value,{clearVisible:!!F.value,value:F.value,readonly:n.readonly,focused:H.value,placeholder:xe,onInput:be,onClear:ye,onFocus:Ie,onBlur:Ce,onKeydown:b}),t),I(ee,B(Ve,{class:`${N}-panel`,tabindex:-1}),null)])}return()=>{const y=`${u.value}-overlay`,F={[`${y}-separator`]:!0,[`${y}-separator-line`]:!c.value.enableInternalInput},H=[I("div",{class:`${y}-body`,onMousedown:O},[A(!0),I("div",{class:F},[c.value.enableInternalInput&&v()]),A(!1)]),I(X,{class:`${y}-footer`,footer:n.footer,okText:o.timeRangePicker.okText,okButton:{size:"xs",mode:"primary"},cancelVisible:!1,ok:R},t)];return n.overlayRender?n.overlayRender(H):I("div",{onMousedown:O},[H])}}}),Ze=z({inheritAttrs:!1,setup(e,{attrs:n}){const t=K(q),{props:a,slots:o,locale:u,mergedPrefixCls:i,inputRef:s,inputEnableStatus:c,renderSeparator:l,rangeControlContext:{fromControl:C,toControl:b}}=t,v=P(()=>{var r,h;return[((r=a.placeholder)==null?void 0:r[0])??u.timeRangePicker.placeholder[0],((h=a.placeholder)==null?void 0:h[1])??u.timeRangePicker.placeholder[1]]}),x=r=>{C.handleInput(r),T(a.onInput,!0,r)},d=r=>{b.handleInput(r),T(a.onInput,!1,r)};function p(r,h){const{inputValue:S}=h?C:b,{disabled:k,readonly:g}=m.value,V=v.value[h?0:1],E=h?x:d;return I("input",{ref:h&&c.value.enableExternalInput?s:void 0,class:`${r}-input-inner`,autocomplete:"off",disabled:k,value:S.value,placeholder:V,readonly:g,onInput:E},null)}const m=me(t),f=r=>I("span",{class:`${r}-input`},[p(r,!0),I("span",{class:`${r}-input-separator`},[l()]),p(r,!1)]);return()=>{const r=i.value,h={default:()=>f(r),suffix:o.suffix,clearIcon:o.clearIcon};return I(ne,B({className:r},m.value,n),h)}}}),en=z({name:"IxTimeRangePicker",inheritAttrs:!1,props:Je,setup(e,{attrs:n,expose:t,slots:a}){const o=D("common"),u=P(()=>`${o.prefixCls}-time-range-picker`),i=D("locale"),s=D("timePicker"),c=te(),{elementRef:l,focus:C,blur:b}=Y(),v=P(()=>e.format??s.format),x=pe(e,s,c,v),{accessor:d,handleChange:p}=x,m=We(c,v,le(d,"value")),{overlayOpened:f,setOverlayOpened:r}=de(e,m),h=ce(e,s),S=Ke(m,r,p),g={props:e,slots:a,dateConfig:c,common:o,locale:i,config:s,mergedPrefixCls:u,formatRef:v,handleKeyDown:S,inputRef:l,inputEnableStatus:h,overlayOpened:f,setOverlayOpened:r,renderSeparator:()=>{var A;return((A=a.separator)==null?void 0:A.call(a))??e.separator??i.timeRangePicker.separator},rangeControlContext:m,...x};ue(q,g),t({focus:C,blur:b}),M(f,A=>{setTimeout(()=>{var y,F;A?(C(),(y=l.value)==null||y.dispatchEvent(new FocusEvent("focus"))):(b(),(F=l.value)==null||F.dispatchEvent(new FocusEvent("blur")))})});const V=()=>I(Ze,n,null),E=()=>I(Ye,null,null),R=ie(g),O=P(()=>re([`${u.value}-overlay`,e.overlayClassName]));return()=>I(Z,B(R.value,{class:O.value,triggerId:n.id}),{default:V,content:E})}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const on=Qe,ln=en;export{on as I,ln as a};
