import{a7 as w,aq as Se,ab as ke,p as Oe,q as Ae,E as Ee,G as Fe,i as T,a9 as U,ɵ as W,aB as X,u as D,m as Y,at as Z}from"./index-5a6244f3.js";import{n as we,c as Re,ɵ as ee,a as ne,b as Be,u as te}from"./index-8a1c6eae.js";import{e as P,w as M,l as Te,x as _,O as Q,t as $e,v as z,i as K,b as ae,bj as oe,y as I,a2 as B,a1 as le,p as re,z as ue}from"./vendor-8302379e.js";function $(e,n,t){if(n)return e.convert(n,t)}function De(e){return e.sort((n,t)=>n?t?n.valueOf()-t.valueOf():0:1)}function Me(e){return/[hH]/.test(e)}function ze(e){return/m/.test(e)}function Ue(e){return/s/.test(e)}function se(e){return/[aA]/.test(e)}function He(e){return/A/.test(e)}function j(e,n,t,a){const[o,u]=w(void 0),[i,s]=w(!1),[c,l]=w(void 0),{parse:C,format:b}=e,v=P(()=>$(e,a.value,n.value)),x=P(()=>Te(a.value)?a.value:v.value?b(v.value,n.value):"");function d(h=!1){var V;(h||!o.value||C(o.value,n.value).valueOf()!==((V=v.value)==null?void 0:V.valueOf()))&&u(x.value),l(v.value)}M([a,n],()=>d(),{immediate:!0});function p(h,V){return h?e.parse(h,V):void 0}function m(h){return!h||e.isValid(h)}function f(h){const V=h.target.value;u(V);const E=p(V,n.value);m(E)&&t(o.value?E:void 0)}function r(){u("")}function g(){s(!0)}function S(){s(!1)}function k(h){t(h)}return{inputValue:o,panelValue:c,inputFocused:i,setInputValue:u,setPanelValue:l,init:d,handleInput:f,handleInputClear:r,handleInputFocus:g,handleInputBlur:S,handlePanelChange:k}}function ce(e,n){return P(()=>{const t=e.allowInput??n.allowInput;return{enableExternalInput:t===!0,enableInternalInput:t==="overlay"}})}function Ke(e){return n=>{(n.code==="Escape"||n.code==="Enter")&&e(!1)}}function Ne(e,n,t){const{bufferUpdated:a,buffer:o}=e;return u=>{switch(u.code){case"Escape":n(!1);break;case"Enter":a.value&&t(o.value),n(!1);break}}}const je=[0,4];function ie(e){const{props:n,common:t,config:a,accessor:o,mergedPrefixCls:u,overlayOpened:i,setOverlayOpened:s}=e,c=Se(n,a,t,u);return P(()=>({clickOutside:!0,container:c.value,disabled:o.disabled||n.readonly,offset:je,placement:"bottomStart",transitionName:`${t.prefixCls}-fade`,trigger:"manual",visible:i.value,"onUpdate:visible":s}))}function de(e,n){const[t,a]=ke(e,"open",!1),o=u=>{a(u),u||n.init(!0)};return _(()=>{e.autofocus&&a(!0)}),{overlayOpened:t,setOverlayOpened:o}}function pe(e,n,t,a){const{accessor:o,control:u}=Oe();Ae(u);const i=Ee(e,n),s=Fe(e,u),[c,l]=w(!1),C=p=>{const{get:m}=t,f=se(a.value);return U(p).some(r=>{const g=m(r,"hour"),S=we(g,f),k=Re(g,!!f),h=m(r,"minute"),V=m(r,"second");return e.disabledHours(S).includes(k)||e.disabledMinutes(k,S).includes(h)||e.disabledSeconds(k,h,S).includes(V)})};function b(p){const m=Q(p)?De(p):p;if(C(m))return;let f=$e(o.value);f=Q(f)?f.map(r=>$(t,r,a.value)):$(t,f,a.value),o.setValue(m),T(e.onChange,m,f)}function v(p){b(void 0),T(e.onClear,p)}function x(p){l(!0),T(e.onFocus,p)}function d(p){l(!1),o.markAsBlurred(),T(e.onBlur,p)}return{accessor:o,mergedSize:i,mergedStatus:s,isFocused:c,handleChange:b,handleClear:v,handleFocus:x,handleBlur:d}}function fe(e){return P(()=>{const{props:n,config:t,accessor:a}=e;return{borderless:!1,clearable:n.clearable??t.clearable,clearIcon:n.clearIcon??t.clearIcon,disabled:a.disabled,size:"sm"}})}function _e(e,n,t,a){const o=P(()=>$(n,e.defaultOpenValue,t.value)),[u,i]=w(()=>a.value??o.value);return M(a,s=>{i(s??o.value)}),{activeValue:u,setActiveValue:i}}function Le(e,n,t,a){const o=P(()=>U(e.defaultOpenValue).map(l=>$(n,l,t.value))),[u,i]=w(()=>{var l;return((l=a.value)==null?void 0:l[0])??o.value[0]}),[s,c]=w(()=>{var l;return((l=a.value)==null?void 0:l[1])??o.value[1]});return M(a,l=>{i((l==null?void 0:l[0])??o.value[0]),c((l==null?void 0:l[1])??o.value[1])}),{fromActiveValue:u,toActiveValue:s,setFromActiveValue:i,setToActiveValue:c}}function ve(e,n){return P(()=>{const{disabledHours:t,disabledMinutes:a,disabledSeconds:o,hideDisabledOptions:u,hourStep:i,minuteStep:s,secondStep:c}=e,l=n.value;return{disabledHours:t,disabledMinutes:a,disabledSeconds:o,hideDisabledOptions:u,hourStep:i,minuteStep:s,secondStep:c,hourEnabled:Me(l),minuteEnabled:ze(l),secondEnabled:Ue(l),use12Hours:se(l),amPmCapital:He(l)}})}const L=Symbol("timePickerContext"),q=Symbol("timeRangePickerContext"),qe=z({setup(){const e=K(L),{slots:n,props:t,locale:a,formatRef:o,dateConfig:u,inputRef:i,inputEnableStatus:s,mergedPrefixCls:c,overlayOpened:l,handleClear:C,handleKeyDown:b,controlContext:{inputValue:v,panelValue:x,inputFocused:d,handleInput:p,handleInputFocus:m,handleInputBlur:f,handlePanelChange:r}}=e,g=ae(),S=()=>{var O;s.value.enableInternalInput&&(i.value=(O=g.value)==null?void 0:O.getInputElement())};_(S),oe(S);const k=fe(e),h=ve(t,o),{activeValue:V,setActiveValue:E}=_e(t,u,o,x),R=O=>{O.target instanceof HTMLInputElement||O.preventDefault()};return()=>{const O=`${c.value}-overlay`,A=`${c.value}-board`,y={...h.value,activeValue:V.value,visible:l.value,value:x.value,onChange:r,"onUpdate:activeValue":E},F=[I("div",{class:`${O}-body ${A}`,tabindex:-1,onMousedown:R},[s.value.enableInternalInput&&I(W,B({ref:g,class:`${A}-input`},k.value,{clearVisible:!!v.value,value:v.value,readonly:t.readonly,focused:d.value,placeholder:t.placeholder??a.timePicker.placeholder,onInput:p,onClear:C,onFocus:m,onBlur:f,onKeydown:b}),n),I(ee,B(y,{class:`${A}-panel`,tabindex:-1}),null)]),I(X,{class:`${O}-footer`,footer:t.footer},n)];return t.overlayRender?t.overlayRender(F):I("div",{onMousedown:R},[F])}}});function me(e){const{props:n,config:t,accessor:a,mergedSize:o,mergedStatus:u,isFocused:i,handleBlur:s,handleFocus:c,handleClear:l,handleKeyDown:C,overlayOpened:b,setOverlayOpened:v,inputEnableStatus:x}=e,d=()=>{const p=b.value;p||a.disabled||v(!p)};return P(()=>({borderless:n.borderless,clearable:!n.readonly&&!a.disabled&&(n.clearable??t.clearable)&&!!a.value,clearIcon:n.clearIcon??t.clearIcon,disabled:a.disabled,focused:i.value,readonly:n.readonly||!x.value.enableExternalInput,size:o.value,status:u.value,suffix:n.suffix??t.suffix,onClick:d,onClear:l,onFocus:c,onBlur:s,onKeyDown:C}))}const Ge=z({inheritAttrs:!1,setup(e,{attrs:n}){const t=K(L),{props:a,slots:o,locale:u,mergedPrefixCls:i,formatRef:s,inputRef:c,inputEnableStatus:l,controlContext:{inputValue:C,handleInput:b}}=t,v=P(()=>a.placeholder??u.timePicker.placeholder),x=P(()=>Math.max(10,s.value.length)+2),d=f=>{b(f),T(a.onInput,f)},p=me(t),m=f=>{const{readonly:r,disabled:g}=p.value;return I("input",{ref:l.value.enableExternalInput?c:void 0,class:`${f}-input`,autocomplete:"off",disabled:g,placeholder:v.value,readonly:r,size:x.value,value:C.value,onInput:d},null)};return()=>{const f=i.value,r={default:()=>m(f),suffix:o.suffix,clearIcon:o.clearIcon};return I(ne,B({className:f},p.value,n),r)}}}),ge={...Be,open:{type:Boolean,default:void 0},control:{type:[String,Number,Object],default:void 0},allowInput:{type:[Boolean,String],default:void 0},autofocus:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},clearIcon:String,clearText:String,disabled:{type:Boolean,default:!1},format:String,overlayClassName:String,overlayContainer:{type:[String,HTMLElement,Function],default:void 0},overlayRender:Function,readonly:{type:Boolean,default:!1},size:String,status:String,suffix:String,"onUpdate:open":[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array]},Je={...ge,value:[String,Date,Number],defaultOpenValue:[String,Date,Number],footer:{type:[Boolean,Array,Object],default:!1},placeholder:String,"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},Qe={...ge,value:Array,defaultOpenValue:Array,footer:{type:[Boolean,Array,Object],default:!0},placeholder:Array,separator:[String,Object],"onUpdate:value":[Function,Array],onChange:[Function,Array],onInput:[Function,Array]},We=z({name:"IxTimePicker",inheritAttrs:!1,props:Je,setup(e,{attrs:n,expose:t,slots:a}){const o=D("common"),u=P(()=>`${o.prefixCls}-time-picker`),i=D("locale"),s=D("timePicker"),c=te(),{elementRef:l,focus:C,blur:b}=Y(),v=P(()=>e.format??s.format),x=pe(e,s,c,v),{accessor:d,handleChange:p}=x,m=j(c,v,p,le(d,"value")),{overlayOpened:f,setOverlayOpened:r}=de(e,m),g=ce(e,s),S=Ke(r),k={props:e,slots:a,dateConfig:c,common:o,locale:i,config:s,mergedPrefixCls:u,formatRef:v,handleKeyDown:S,inputRef:l,inputEnableStatus:g,overlayOpened:f,setOverlayOpened:r,controlContext:m,...x};re(L,k),t({focus:C,blur:b}),M(f,O=>{setTimeout(()=>{var A,y;O?(C(),(A=l.value)==null||A.dispatchEvent(new FocusEvent("focus"))):(b(),(y=l.value)==null||y.dispatchEvent(new FocusEvent("blur")))})});const h=()=>I(Ge,n,null),V=()=>I(qe,null,null),E=ie(k),R=P(()=>ue([`${u.value}-overlay`,e.overlayClassName]));return()=>I(Z,B(E.value,{class:R.value,triggerId:n.id}),{default:h,content:V})}});function Xe(e,n,t){const[a,o]=w(U(t.value).map(d=>$(e,d,n.value))),[u,i]=w(!1),s=d=>{o(Ye(e,d,n.value)),i(!0)};M([t,n],([d])=>{s(d)});const c=P(()=>U(a.value)),l=P(()=>c.value[0]),C=P(()=>c.value[1]),b=j(e,n,d=>{s([d,C.value])},l),v=j(e,n,d=>{s([l.value,d])},C);return{buffer:a,bufferUpdated:u,fromControl:b,toControl:v,init:(d=!1)=>{s(t.value),i(!1),b.init(d),v.init(d)}}}function Ye(e,n,t){return U(n).map(a=>$(e,a,t))}const Ze=z({setup(){const e=K(q),{props:n,slots:t,dateConfig:a,locale:o,mergedPrefixCls:u,formatRef:i,inputRef:s,inputEnableStatus:c,overlayOpened:l,handleChange:C,handleKeyDown:b,renderSeparator:v,setOverlayOpened:x,rangeControlContext:{buffer:d,fromControl:p,toControl:m}}=e,f=ae(),r=()=>{var y;c.value.enableInternalInput&&(s.value=(y=f.value)==null?void 0:y.getInputElement())};_(r),oe(r);const g=fe(e),S=ve(n,i),{fromActiveValue:k,toActiveValue:h,setFromActiveValue:V,setToActiveValue:E}=Le(n,a,i,P(()=>[p.panelValue.value,m.panelValue.value])),R=()=>{C(d.value),x(!1)},O=y=>{y.target instanceof HTMLInputElement||y.preventDefault()};function A(y){var J;const{inputValue:F,inputFocused:H,panelValue:he,handleInput:be,handleInputClear:ye,handleInputFocus:Ie,handleInputBlur:Ce,handlePanelChange:Pe}=y?p:m,G=y?0:1,xe=((J=n.placeholder)==null?void 0:J[G])??o.timeRangePicker.placeholder[G],N=`${u.value}-board`,Ve={...S.value,activeValue:y?k.value:h.value,visible:l.value,value:he.value,onChange:Pe,"onUpdate:activeValue":y?V:E};return I("div",{class:N},[c.value.enableInternalInput&&I(W,B({ref:y?f:void 0,class:`${N}-input`},g.value,{clearVisible:!!F.value,value:F.value,readonly:n.readonly,focused:H.value,placeholder:xe,onInput:be,onClear:ye,onFocus:Ie,onBlur:Ce,onKeydown:b}),t),I(ee,B(Ve,{class:`${N}-panel`,tabindex:-1}),null)])}return()=>{const y=`${u.value}-overlay`,F={[`${y}-separator`]:!0,[`${y}-separator-line`]:!c.value.enableInternalInput},H=[I("div",{class:`${y}-body`,onMousedown:O},[A(!0),I("div",{class:F},[c.value.enableInternalInput&&v()]),A(!1)]),I(X,{class:`${y}-footer`,footer:n.footer,okText:o.timeRangePicker.okText,okButton:{size:"xs",mode:"primary"},cancelVisible:!1,ok:R},t)];return n.overlayRender?n.overlayRender(H):I("div",{onMousedown:O},[H])}}}),en=z({inheritAttrs:!1,setup(e,{attrs:n}){const t=K(q),{props:a,slots:o,locale:u,mergedPrefixCls:i,inputRef:s,inputEnableStatus:c,renderSeparator:l,rangeControlContext:{fromControl:C,toControl:b}}=t,v=P(()=>{var r,g;return[((r=a.placeholder)==null?void 0:r[0])??u.timeRangePicker.placeholder[0],((g=a.placeholder)==null?void 0:g[1])??u.timeRangePicker.placeholder[1]]}),x=r=>{C.handleInput(r),T(a.onInput,!0,r)},d=r=>{b.handleInput(r),T(a.onInput,!1,r)};function p(r,g){const{inputValue:S}=g?C:b,{disabled:k,readonly:h}=m.value,V=v.value[g?0:1],E=g?x:d;return I("input",{ref:g&&c.value.enableExternalInput?s:void 0,class:`${r}-input-inner`,autocomplete:"off",disabled:k,value:S.value,placeholder:V,readonly:h,onInput:E},null)}const m=me(t),f=r=>I("span",{class:`${r}-input`},[p(r,!0),I("span",{class:`${r}-input-separator`},[l()]),p(r,!1)]);return()=>{const r=i.value,g={default:()=>f(r),suffix:o.suffix,clearIcon:o.clearIcon};return I(ne,B({className:r},m.value,n),g)}}}),nn=z({name:"IxTimeRangePicker",inheritAttrs:!1,props:Qe,setup(e,{attrs:n,expose:t,slots:a}){const o=D("common"),u=P(()=>`${o.prefixCls}-time-range-picker`),i=D("locale"),s=D("timePicker"),c=te(),{elementRef:l,focus:C,blur:b}=Y(),v=P(()=>e.format??s.format),x=pe(e,s,c,v),{accessor:d,handleChange:p}=x,m=Xe(c,v,le(d,"value")),{overlayOpened:f,setOverlayOpened:r}=de(e,m),g=ce(e,s),S=Ne(m,r,p),h={props:e,slots:a,dateConfig:c,common:o,locale:i,config:s,mergedPrefixCls:u,formatRef:v,handleKeyDown:S,inputRef:l,inputEnableStatus:g,overlayOpened:f,setOverlayOpened:r,renderSeparator:()=>{var A;return((A=a.separator)==null?void 0:A.call(a))??e.separator??i.timeRangePicker.separator},rangeControlContext:m,...x};re(q,h),t({focus:C,blur:b}),M(f,A=>{setTimeout(()=>{var y,F;A?(C(),(y=l.value)==null||y.dispatchEvent(new FocusEvent("focus"))):(b(),(F=l.value)==null||F.dispatchEvent(new FocusEvent("blur")))})});const V=()=>I(en,n,null),E=()=>I(Ze,null,null),R=ie(h),O=P(()=>ue([`${u.value}-overlay`,e.overlayClassName]));return()=>I(Z,B(R.value,{class:O.value,triggerId:n.id}),{default:V,content:E})}}),ln=We,rn=nn;export{ln as I,rn as a};
