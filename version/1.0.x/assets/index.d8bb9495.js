import{af as Q,ag as M,j as J,c as $,\u0275 as F,ah as _,u as B}from"./index.3f21dce0.js";import{e as p,au as D,w as K,v as P,y as i,a0 as S,k as E,i as T,ac as R,p as U,z as V}from"./vendor.0e7da6ec.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function q(e,t){return p(()=>{const n=e.value,s=t.value;let o;s<=9?o=b(1,s):o=G(n,s);const l={type:"prev",disabled:n===1},c={type:"next",disabled:n===s};return[l,...o,c]})}const b=(e,t)=>{const n=[];for(let s=e;s<=t;s++)n.push({index:s,type:"page"});return n},G=(e,t)=>{let n=[];const s={type:"prev5"},o={type:"next5"};e<5?n=[...b(2,5),o]:e<t-3?n=[s,...b(e-2,e+2),o]:n=[s,...b(t-4,t-1)];const l=b(1,1),c=b(t,t);return[...l,...n,...c]};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function O(e,t,n){return D(o=>{const l=o.target,c=Math.floor(Q(l.value,e.value));t(c),n.value||(l.value="")},["enter"])}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function H(e,t){var v;const[n,s]=M(e,"pageIndex",1),[o,l]=M(e,"pageSize",(v=e.pageSize)!=null?v:t.pageSize),c=p(()=>Math.max(Math.ceil(e.total/o.value),1)),u=g=>{const m=W(g,c.value);m!==n.value&&(s(m),J(e.onChange,m,o.value))},d=g=>{l(g),J(e.onChange,n.value,g)};return K([n,c],([g,m])=>{g>m&&u(m)},{immediate:!0}),{activeIndex:n,activeSize:o,lastIndex:c,changePageIndex:u,changePageSize:d}}const W=(e,t)=>e>t?t:e<1?1:e;/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const C=Symbol("paginationToken");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const X={pageIndex:Number,pageSize:Number,disabled:{type:Boolean,default:!1},pageSizes:Array,showQuickJumper:{type:Boolean,default:void 0},showSizeChanger:{type:Boolean,default:void 0},showTitle:{type:Boolean,default:void 0},showTotal:{type:Boolean,default:void 0},simple:{type:Boolean,default:void 0},size:String,total:{type:Number,default:0},"onUpdate:pageIndex":[Function,Array],"onUpdate:pageSize":[Function,Array],onChange:[Function,Array]},Y={disabled:{type:Boolean,default:void 0},index:Number,type:{type:String,required:!0}},Z={prev:"left",next:"right",prev5:"double-left",next5:"double-right",page:""},L={next:1,prev:-1,prev5:-5,next5:5},ee={md:"sm",sm:"xs"},N=P({props:Y,setup(e){const{props:t,slots:n,config:s,locale:o,mergedPrefixCls:l,activeIndex:c,changePageIndex:u}=T(C),d=p(()=>c.value===e.index),v=p(()=>e.disabled||t.disabled),g=p(()=>{var r;return(r=t.showTitle)!=null?r:s.showTitle}),m=p(()=>{const r=`${l.value}-item`,{type:x}=e;return{[r]:!0,[`${r}-active`]:d.value,[`${r}-button`]:x==="next"||x==="prev"}}),k=p(()=>{if(!g.value)return;const{type:r,index:x}=e;return r==="page"?x.toString():o.pagination[r]}),y=()=>{if(v.value)return;const{type:r,index:x}=e;let z;r==="page"?z=x:z=c.value+L[r],u(z)};return()=>{var A;const r=`${l.value}-item`,{index:x,type:z}=e,I=v.value,j=d.value;let a;const h=Z[z],f={mode:"text",size:ee[(A=t.size)!=null?A:s.size],shape:"circle"};e.type==="prev5"||z==="next5"?a=i("span",{class:`${r}-jumper`},[i($,S(f,{icon:h,disabled:I}),null),i($,S(f,{class:`${r}-ellipsis`,icon:"ellipsis",disabled:I}),null)]):E(x)?a=i($,S(f,{icon:h,disabled:I}),null):a=i($,S(f,{icon:h,disabled:I}),{default:()=>[x]});const w=n.item?n.item({index:x,type:z,active:j,disabled:I,original:a}):a;return i("li",{class:m.value,title:k.value,onClick:y},[w])}}}),te=P({setup(){const{props:e,locale:t,mergedPrefixCls:n,jumpToIndex:s}=T(C);return()=>{const o=`${n.value}-jumper`,{disabled:l}=e,{jumpTo:c,page:u}=t.pagination;return i("li",{class:o},[c,i(F,{disabled:l,size:"sm",onKeydown:s},null),u])}}}),ne=P({setup(){const{props:e,config:t,locale:n,mergedPrefixCls:s,activeSize:o,changePageSize:l}=T(C),c=p(()=>{const{pageSizes:u=t.pageSizes}=e;return u.map(d=>({key:d,label:d}))});return()=>{const u=`${s.value}-sizes`,{itemsPerPage:d,itemsSuffix:v}=n.pagination;return i("li",{class:u},[d,i("div",{class:`${u}-select-wrapper`},[i(_,{disabled:e.disabled,dataSource:c.value,size:"sm",value:o.value,onChange:l},null)]),v])}}}),ae=P({setup(){const{props:e,slots:t,locale:n,activeIndex:s,activeSize:o,mergedPrefixCls:l}=T(C),c=p(()=>{const u=s.value,d=o.value,v=(u-1)*d+1,g=Math.min(u*d,e.total);return[v,g]});return()=>{const u=`${l.value}-total`,{total:d}=e,{totalPrefix:v,totalSuffix:g}=n.pagination,m=t.total?t.total({total:d,range:c.value,prefix:v,suffix:g}):`${v} ${d} ${g}`;return i("li",{class:u},[m])}}}),se=P({name:"IxPagination",props:X,setup(e,{slots:t}){const n=B("common"),s=p(()=>`${n.prefixCls}-pagination`),o=B("locale"),l=B("pagination"),c=p(()=>{var a;return(a=e.showTotal)!=null?a:l.showTotal}),u=p(()=>{var a;return(a=e.simple)!=null?a:l.simple}),d=p(()=>{var a;return(a=e.size)!=null?a:l.size}),v=p(()=>{var a;return(a=e.showQuickJumper)!=null?a:l.showQuickJumper}),g=p(()=>{var a;return(a=e.showSizeChanger)!=null?a:l.showSizeChanger}),{activeIndex:m,activeSize:k,lastIndex:y,changePageIndex:r,changePageSize:x}=H(e,l),z=q(m,y),I=O(m,r,u);U(C,{props:e,slots:t,config:l,locale:o,mergedPrefixCls:s,activeIndex:m,activeSize:k,lastIndex:y,changePageIndex:r,changePageSize:x,jumpToIndex:I});const j=p(()=>{const a=s.value;return V({[a]:!0,[`${a}-disabled`]:e.disabled,[`${a}-simple`]:u.value,[`${a}-${d.value}`]:!0})});return()=>{const a=s.value,h=c.value?[i(ae,null,null)]:[];if(u.value){const f=m.value,w=y.value;h.push(i(N,{disabled:f===1,type:"prev"},null)),h.push(i("li",{class:`${a}-item`},[v.value?i(F,{disabled:e.disabled,size:"sm",value:f.toString(),onKeydown:I},null):f,i("span",{class:`${a}-item-slash`},[R("/")]),i("span",null,[w])])),h.push(i(N,{disabled:f===w,type:"next"},null))}else z.value.forEach(f=>h.push(i(N,S({key:f.type+"-"+f.index},f),null))),g.value&&h.push(i(ne,null,null)),v.value&&h.push(i(te,null,null));return i("ul",{class:j.value},[h])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const oe=se;export{oe as I};
